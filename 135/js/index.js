/**
 * Created by qkl | QQ:80508567 Wechat:qklandy on 2015/12/7.
 */
;UE.I18N['zh-cn'] = {
    'labelMap': {
        'anchor': '锚点',
        'undo': '撤销',
        'redo': '重做',
        'bold': '加粗',
        'indent': '首行缩进',
        'snapscreen': '截图',
        'italic': '斜体',
        'underline': '下划线',
        'strikethrough': '删除线',
        'subscript': '下标',
        'fontborder': '字符边框',
        'superscript': '上标',
        'formatmatch': '格式刷',
        'source': '源代码',
        'blockquote': '引用',
        'pasteplain': '纯文本粘贴模式',
        'selectall': '全选',
        'print': '打印',
        'preview': '预览',
        'horizontal': '分隔线',
        'removeformat': '清除格式',
        'time': '时间',
        'date': '日期',
        'unlink': '取消链接',
        'insertrow': '前插入行',
        'insertcol': '前插入列',
        'mergeright': '右合并单元格',
        'mergedown': '下合并单元格',
        'deleterow': '删除行',
        'deletecol': '删除列',
        'splittorows': '拆分成行',
        'splittocols': '拆分成列',
        'splittocells': '完全拆分单元格',
        'deletecaption': '删除表格标题',
        'inserttitle': '插入标题',
        'mergecells': '合并多个单元格',
        'deletetable': '删除表格',
        'cleardoc': '清空文档',
        'insertparagraphbeforetable': "表格前插入行",
        'insertcode': '代码语言',
        'fontfamily': '字体',
        'fontsize': '字号 10~72px',
        'paragraph': '段落格式',
        'simpleupload': '单图上传',
        'insertimage': '多图上传',
        'edittable': '表格属性',
        'edittd': '单元格属性',
        'link': '超链接',
        'emotion': '表情',
        'spechars': '特殊字符',
        'searchreplace': '查询替换',
        'map': 'Baidu地图',
        'gmap': 'Google地图',
        'insertvideo': '视频',
        'help': '帮助',
        'justifyleft': '居左对齐',
        'justifyright': '居右对齐',
        'justifycenter': '居中对齐',
        'justifyjustify': '两端对齐',
        'forecolor': '字体颜色',
        'backcolor': '背景色',
        'insertorderedlist': '有序列表',
        'insertunorderedlist': '无序列表',
        'fullscreen': '全屏',
        'directionalityltr': '从左向右输入',
        'directionalityrtl': '从右向左输入',
        'rowspacingtop': '段前距',
        'rowspacingbottom': '段后距',
        'pagebreak': '分页',
        'insertframe': '插入Iframe',
        'imagenone': '默认',
        'imageleft': '左浮动',
        'imageright': '右浮动',
        'attachment': '附件',
        'imagecenter': '居中',
        'wordimage': '图片转存',
        'lineheight': '行间距',
        'edittip': '编辑提示',
        'customstyle': '自定义标题',
        'autotypeset': '自动排版',
        'webapp': '百度应用',
        'touppercase': '字母大写',
        'tolowercase': '字母小写',
        'background': '背景',
        'template': '模板',
        'scrawl': '涂鸦',
        'music': '音乐',
        'inserttable': '插入表格',
        'drafts': '从草稿箱加载',
        'charts': '图表'
    },
    'insertorderedlist': {
        'num': '1,2,3...',
        'num1': '1),2),3)...',
        'num2': '(1),(2),(3)...',
        'cn': '一,二,三....',
        'cn1': '一),二),三)....',
        'cn2': '(一),(二),(三)....',
        'decimal': '1,2,3...',
        'lower-alpha': 'a,b,c...',
        'lower-roman': 'i,ii,iii...',
        'upper-alpha': 'A,B,C...',
        'upper-roman': 'I,II,III...'
    },
    'insertunorderedlist': {
        'circle': '○ 大圆圈',
        'disc': '● 小黑点',
        'square': '■ 小方块 ',
        'dash': '— 破折号',
        'dot': ' 。 小圆圈'
    },
    'paragraph': {
        'p': '段落',
        'h1': '标题 1',
        'h2': '标题 2',
        'h3': '标题 3',
        'h4': '标题 4',
        'h5': '标题 5',
        'h6': '标题 6'
    },
    'fontfamily': {
        'songti': '宋体',
        'kaiti': '楷体',
        'heiti': '黑体',
        'lishu': '隶书',
        'yahei': '微软雅黑',
        'andaleMono': 'andale mono',
        'arial': 'arial',
        'arialBlack': 'arial black',
        'comicSansMs': 'comic sans ms',
        'impact': 'impact',
        'timesNewRoman': 'times new roman'
    },
    'customstyle': {
        'tc': '标题居中',
        'tl': '标题居左',
        'im': '强调',
        'hi': '明显强调'
    },
    'autoupload': {
        'exceedSizeError': '文件大小超出限制',
        'exceedTypeError': '文件格式不允许',
        'jsonEncodeError': '服务器返回格式错误',
        'loading': "正在上传...",
        'loadError': "上传错误",
        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'
    },
    'simpleupload': {
        'exceedSizeError': '文件大小超出限制',
        'exceedTypeError': '文件格式不允许',
        'jsonEncodeError': '服务器返回格式错误',
        'loading': "正在上传...",
        'loadError': "上传错误",
        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'
    },
    'elementPathTip': "元素路径",
    'wordCountTip': "字数统计",
    'wordCountMsg': '当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ',
    'wordOverFlowMsg': '<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',
    'ok': "确认",
    'cancel': "取消",
    'closeDialog': "关闭对话框",
    'tableDrag': "表格拖动必须引入uiUtils.js文件！",
    'autofloatMsg': "工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",
    'loadconfigError': '获取后台配置项请求出错，上传功能将不能正常使用！',
    'loadconfigFormatError': '后台配置项返回格式出错，上传功能将不能正常使用！',
    'loadconfigHttpError': '请求后台配置项http错误，上传功能将不能正常使用！',
    'snapScreen_plugin': {
        'browserMsg': "仅支持IE浏览器！",
        'callBackErrorMsg': "服务器返回数据有误，请检查配置项之后重试。",
        'uploadErrorMsg': "截图上传失败，请检查服务器端环境! "
    },
    'insertcode': {
        'as3': 'ActionScript 3',
        'bash': 'Bash/Shell',
        'cpp': 'C/C++',
        'css': 'CSS',
        'cf': 'ColdFusion',
        'c#': 'C#',
        'delphi': 'Delphi',
        'diff': 'Diff',
        'erlang': 'Erlang',
        'groovy': 'Groovy',
        'html': 'HTML',
        'java': 'Java',
        'jfx': 'JavaFX',
        'js': 'JavaScript',
        'pl': 'Perl',
        'php': 'PHP',
        'plain': 'Plain Text',
        'ps': 'PowerShell',
        'python': 'Python',
        'ruby': 'Ruby',
        'scala': 'Scala',
        'sql': 'SQL',
        'vb': 'Visual Basic',
        'xml': 'XML'
    },
    'confirmClear': "确定清空当前文档么？",
    'contextMenu': {
        'delete': "删除",
        'selectall': "全选",
        'deletecode': "删除代码",
        'cleardoc': "清空文档",
        'confirmclear': "确定清空当前文档么？",
        'unlink': "删除超链接",
        'paragraph': "段落格式",
        'edittable': "表格属性",
        'aligntd': "单元格对齐方式",
        'aligntable': '表格对齐方式',
        'tableleft': '左浮动',
        'tablecenter': '居中显示',
        'tableright': '右浮动',
        'edittd': "单元格属性",
        'setbordervisible': '设置表格边线可见',
        'justifyleft': '左对齐',
        'justifyright': '右对齐',
        'justifycenter': '居中对齐',
        'justifyjustify': '两端对齐',
        'table': "表格",
        'inserttable': '插入表格',
        'deletetable': "删除表格",
        'insertparagraphbefore': "前插入段落",
        'insertparagraphafter': '后插入段落',
        'deleterow': "删除当前行",
        'deletecol': "删除当前列",
        'insertrow': "前插入行",
        'insertcol': "左插入列",
        'insertrownext': '后插入行',
        'insertcolnext': '右插入列',
        'insertcaption': '插入表格名称',
        'deletecaption': '删除表格名称',
        'inserttitle': '插入表格标题行',
        'deletetitle': '删除表格标题行',
        'inserttitlecol': '插入表格标题列',
        'deletetitlecol': '删除表格标题列',
        'averageDiseRow': '平均分布各行',
        'averageDisCol': '平均分布各列',
        'mergeright': "向右合并",
        'mergeleft': "向左合并",
        'mergedown': "向下合并",
        'mergecells': "合并单元格",
        'splittocells': "完全拆分单元格",
        'splittocols': "拆分成列",
        'splittorows': "拆分成行",
        'tablesort': '表格排序',
        'enablesort': '设置表格可排序',
        'disablesort': '取消表格可排序',
        'reversecurrent': '逆序当前',
        'orderbyasc': '按ASCII字符升序',
        'reversebyasc': '按ASCII字符降序',
        'orderbynum': '按数值大小升序',
        'reversebynum': '按数值大小降序',
        'borderbk': '边框底纹',
        'setcolor': '表格隔行变色',
        'unsetcolor': '取消表格隔行变色',
        'setbackground': '选区背景隔行',
        'unsetbackground': '取消选区背景',
        'redandblue': '红蓝相间',
        'threecolorgradient': '三色渐变',
        'copy': "复制(Ctrl + c)",
        'copymsg': "浏览器不支持,请使用 'Ctrl + c'",
        'paste': "粘贴(Ctrl + v)",
        'pastemsg': "浏览器不支持,请使用 'Ctrl + v'"
    },
    'copymsg': "浏览器不支持,请使用 'Ctrl + c'",
    'pastemsg': "浏览器不支持,请使用 'Ctrl + v'",
    'anthorMsg': "链接",
    'clearColor': '清空颜色',
    'standardColor': '标准颜色',
    'themeColor': '主题颜色',
    'property': '属性',
    'default': '默认',
    'modify': '修改',
    'justifyleft': '左对齐',
    'justifyright': '右对齐',
    'justifycenter': '居中',
    'justify': '默认',
    'changeImage': '换图',
    'edit': '编辑',
    'ok': '确定',
    'recentlyColor': '最近使用颜色',
    'clear': '清除',
    'anchorMsg': '锚点',
    'delete': '删除',
    'clickToUpload': "点击上传",
    'unset': '尚未设置语言文件',
    't_row': '行',
    't_col': '列',
    'more': '更多',
    'pasteOpt': '粘贴选项',
    'pasteSourceFormat': "保留源格式",
    'tagFormat': '只保留标签',
    'pasteTextFormat': '只保留文本',
    'autoTypeSet': {
        'mergeLine': "合并空行",
        'delLine': "清除空行",
        'removeFormat': "清除格式",
        'indent': "首行缩进",
        'alignment': "对齐方式",
        'imageFloat': "图片浮动",
        'removeFontsize': "清除字号",
        'removeFontFamily': "清除字体",
        'removeHtml': "清除冗余HTML代码",
        'pasteFilter': "粘贴过滤",
        'run': "执行",
        'symbol': '符号转换',
        'bdc2sb': '全角转半角',
        'tobdc': '半角转全角'
    },
    'background': {
        'static': {
            'lang_background_normal': '背景设置',
            'lang_background_local': '在线图片',
            'lang_background_set': '选项',
            'lang_background_none': '无背景色',
            'lang_background_colored': '有背景色',
            'lang_background_color': '颜色设置',
            'lang_background_netimg': '网络图片',
            'lang_background_align': '对齐方式',
            'lang_background_position': '精确定位',
            'repeatType': {
                'options': ["居中", "横向重复", "纵向重复", "平铺", "自定义"]
            }
        },
        'noUploadImage': "当前未上传过任何图片！",
        'toggleSelect': "单击可切换选中状态\n原图尺寸: "
    },
    'insertimage': {
        'static': {
            'lang_tab_remote': "插入图片",
            'lang_tab_upload': "本地上传",
            'lang_tab_online': "在线管理",
            'lang_tab_search': "图片搜索",
            'lang_input_url': "地 址：",
            'lang_input_size': "大 小：",
            'lang_input_width': "宽度",
            'lang_input_height': "高度",
            'lang_input_border': "边 框：",
            'lang_input_vhspace': "边 距：",
            'lang_input_title': "描 述：",
            'lang_input_align': '图片浮动方式：',
            'lang_imgLoading': "　图片加载中……",
            'lang_start_upload': "开始上传",
            'lock': {
                'title': "锁定宽高比例"
            },
            'searchType': {
                'title': "图片类型",
                'options': ["新闻", "壁纸", "表情", "头像"]
            },
            'searchTxt': {
                'value': "请输入搜索关键词"
            },
            'searchBtn': {
                'value': "百度一下"
            },
            'searchReset': {
                'value': "清空搜索"
            },
            'noneAlign': {
                'title': '无浮动'
            },
            'leftAlign': {
                'title': '左浮动'
            },
            'rightAlign': {
                'title': '右浮动'
            },
            'centerAlign': {
                'title': '居中独占一行'
            }
        },
        'uploadSelectFile': '点击选择图片',
        'uploadAddFile': '继续添加',
        'uploadStart': '开始上传',
        'uploadPause': '暂停上传',
        'uploadContinue': '继续上传',
        'uploadRetry': '重试上传',
        'uploadDelete': '删除',
        'uploadTurnLeft': '向左旋转',
        'uploadTurnRight': '向右旋转',
        'uploadPreview': '预览中',
        'uploadNoPreview': '不能预览',
        'updateStatusReady': '选中_张图片，共_KB。',
        'updateStatusConfirm': '已成功上传_张照片，_张照片上传失败',
        'updateStatusFinish': '共_张（_KB），_张上传成功',
        'updateStatusError': '，_张上传失败。',
        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
        'errorExceedSize': '文件大小超出',
        'errorFileType': '文件格式不允许',
        'errorInterrupt': '文件传输中断',
        'errorUploadRetry': '上传失败，请重试',
        'errorHttp': 'http请求错误',
        'errorServerUpload': '服务器返回出错',
        'remoteLockError': "宽高不正确,不能所定比例",
        'numError': "请输入正确的长度或者宽度值！例如：123，400",
        'imageUrlError': "不允许的图片格式或者图片域！",
        'imageLoadError': "图片加载失败！请检查链接地址或网络状态！",
        'searchRemind': "请输入搜索关键词",
        'searchLoading': "图片加载中，请稍后……",
        'searchRetry': " :( ，抱歉，没有找到图片！请重试一次！"
    },
    'attachment': {
        'static': {
            'lang_tab_upload': '上传附件',
            'lang_tab_online': '在线附件',
            'lang_start_upload': "开始上传",
            'lang_drop_remind': "可以将文件拖到这里，单次最多可选100个文件"
        },
        'uploadSelectFile': '点击选择文件',
        'uploadAddFile': '继续添加',
        'uploadStart': '开始上传',
        'uploadPause': '暂停上传',
        'uploadContinue': '继续上传',
        'uploadRetry': '重试上传',
        'uploadDelete': '删除',
        'uploadTurnLeft': '向左旋转',
        'uploadTurnRight': '向右旋转',
        'uploadPreview': '预览中',
        'updateStatusReady': '选中_个文件，共_KB。',
        'updateStatusConfirm': '已成功上传_个文件，_个文件上传失败',
        'updateStatusFinish': '共_个（_KB），_个上传成功',
        'updateStatusError': '，_张上传失败。',
        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
        'errorExceedSize': '文件大小超出',
        'errorFileType': '文件格式不允许',
        'errorInterrupt': '文件传输中断',
        'errorUploadRetry': '上传失败，请重试',
        'errorHttp': 'http请求错误',
        'errorServerUpload': '服务器返回出错'
    },
    'insertvideo': {
        'static': {
            'lang_tab_insertV': "插入视频",
            'lang_tab_searchV': "搜索视频",
            'lang_tab_uploadV': "上传视频",
            'lang_video_url': "视频网址",
            'lang_video_size': "视频尺寸",
            'lang_videoW': "宽度",
            'lang_videoH': "高度",
            'lang_alignment': "对齐方式",
            'videoSearchTxt': {
                'value': "请输入搜索关键字！"
            },
            'videoType': {
                'options': ["全部", "热门", "娱乐", "搞笑", "体育", "科技", "综艺"]
            },
            'videoSearchBtn': {
                'value': "百度一下"
            },
            'videoSearchReset': {
                'value': "清空结果"
            },
            'lang_input_fileStatus': ' 当前未上传文件',
            'startUpload': {
                'style': "background:url(upload.png) no-repeat;"
            },
            'lang_upload_size': "视频尺寸",
            'lang_upload_width': "宽度",
            'lang_upload_height': "高度",
            'lang_upload_alignment': "对齐方式",
            'lang_format_advice': "建议使用mp4格式."
        },
        'numError': "请输入正确的数值，如123,400",
        'floatLeft': "左浮动",
        'floatRight': "右浮动",
        '"default"': "默认",
        'block': "独占一行",
        'urlError': "输入的视频地址有误，请检查后再试！",
        'loading': " &nbsp;视频加载中，请等待……",
        'clickToSelect': "点击选中",
        'goToSource': '访问源视频',
        'noVideo': " &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",
        'browseFiles': '浏览文件',
        'uploadSuccess': '上传成功!',
        'delSuccessFile': '从成功队列中移除',
        'delFailSaveFile': '移除保存失败文件',
        'statusPrompt': ' 个文件已上传！ ',
        'flashVersionError': '当前Flash版本过低，请更新FlashPlayer后重试！',
        'flashLoadingError': 'Flash加载失败!请检查路径或网络状态',
        'fileUploadReady': '等待上传……',
        'delUploadQueue': '从上传队列中移除',
        'limitPrompt1': '单次不能选择超过',
        'limitPrompt2': '个文件！请重新选择！',
        'delFailFile': '移除失败文件',
        'fileSizeLimit': '文件大小超出限制！',
        'emptyFile': '空文件无法上传！',
        'fileTypeError': '文件类型不允许！',
        'unknownError': '未知错误！',
        'fileUploading': '上传中，请等待……',
        'cancelUpload': '取消上传',
        'netError': '网络错误',
        'failUpload': '上传失败!',
        'serverIOError': '服务器IO错误！',
        'noAuthority': '无权限！',
        'fileNumLimit': '上传个数限制',
        'failCheck': '验证失败，本次上传被跳过！',
        'fileCanceling': '取消中，请等待……',
        'stopUploading': '上传已停止……',
        'uploadSelectFile': '点击选择文件',
        'uploadAddFile': '继续添加',
        'uploadStart': '开始上传',
        'uploadPause': '暂停上传',
        'uploadContinue': '继续上传',
        'uploadRetry': '重试上传',
        'uploadDelete': '删除',
        'uploadTurnLeft': '向左旋转',
        'uploadTurnRight': '向右旋转',
        'uploadPreview': '预览中',
        'updateStatusReady': '选中_个文件，共_KB。',
        'updateStatusConfirm': '成功上传_个，_个失败',
        'updateStatusFinish': '共_个(_KB)，_个成功上传',
        'updateStatusError': '，_张上传失败。',
        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
        'errorExceedSize': '文件大小超出',
        'errorFileType': '文件格式不允许',
        'errorInterrupt': '文件传输中断',
        'errorUploadRetry': '上传失败，请重试',
        'errorHttp': 'http请求错误',
        'errorServerUpload': '服务器返回出错'
    },
    'webapp': {
        'tip1': "本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",
        'tip2': "申请完成之后请至ueditor.config.js中配置获得的appkey! ",
        'applyFor': "点此申请",
        'anthorApi': "百度API"
    },
    'template': {
        'static': {
            'lang_template_bkcolor': '背景颜色',
            'lang_template_clear': '保留原有内容',
            'lang_template_select': '选择模板'
        },
        'blank': "空白文档",
        'blog': "博客文章",
        'resume': "个人简历",
        'richText': "图文混排",
        'sciPapers': "科技论文"
    },
    'scrawl': {
        'static': {
            'lang_input_previousStep': "上一步",
            'lang_input_nextsStep': "下一步",
            'lang_input_clear': '清空',
            'lang_input_addPic': '添加背景',
            'lang_input_ScalePic': '缩放背景',
            'lang_input_removePic': '删除背景',
            'J_imgTxt': {
                title: '添加背景图片'
            }
        },
        'noScarwl': "尚未作画，白纸一张~",
        'scrawlUpLoading': "涂鸦上传中,别急哦~",
        'continueBtn': "继续",
        'imageError': "糟糕，图片读取失败了！",
        'backgroundUploading': '背景图片上传中,别急哦~'
    },
    'music': {
        'static': {
            'lang_input_tips': "输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",
            'J_searchBtn': {
                value: '搜索歌曲'
            }
        },
        'emptyTxt': '未搜索到相关音乐结果，请换一个关键词试试。',
        'chapter': '歌曲',
        'singer': '歌手',
        'special': '专辑',
        'listenTest': '试听'
    },
    'anchor': {
        'static': {
            'lang_input_anchorName': '锚点名字：'
        }
    },
    'charts': {
        'static': {
            'lang_data_source': '数据源：',
            'lang_chart_format': '图表格式：',
            'lang_data_align': '数据对齐方式',
            'lang_chart_align_same': '数据源与图表X轴Y轴一致',
            'lang_chart_align_reverse': '数据源与图表X轴Y轴相反',
            'lang_chart_title': '图表标题',
            'lang_chart_main_title': '主标题：',
            'lang_chart_sub_title': '子标题：',
            'lang_chart_x_title': 'X轴标题：',
            'lang_chart_y_title': 'Y轴标题：',
            'lang_chart_tip': '提示文字',
            'lang_cahrt_tip_prefix': '提示文字前缀：',
            'lang_cahrt_tip_description': '仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀',
            'lang_chart_data_unit': '数据单位',
            'lang_chart_data_unit_title': '单位：',
            'lang_chart_data_unit_description': '显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃',
            'lang_chart_type': '图表类型：',
            'lang_prev_btn': '上一个',
            'lang_next_btn': '下一个'
        }
    },
    'emotion': {
        'static': {
            'lang_input_choice': '精选',
            'lang_input_Tuzki': '兔斯基',
            'lang_input_BOBO': 'BOBO',
            'lang_input_lvdouwa': '绿豆蛙',
            'lang_input_babyCat': 'baby猫',
            'lang_input_bubble': '泡泡',
            'lang_input_youa': '有啊'
        }
    },
    'gmap': {
        'static': {
            'lang_input_address': '地址',
            'lang_input_search': '搜索',
            'address': {
                value: "北京"
            }
        },
        searchError: '无法定位到该地址!'
    },
    'help': {
        'static': {
            'lang_input_about': '关于UEditor',
            'lang_input_shortcuts': '快捷键',
            'lang_input_introduction': 'UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。',
            'lang_Txt_shortcuts': '快捷键',
            'lang_Txt_func': '功能',
            'lang_Txt_bold': '给选中字设置为加粗',
            'lang_Txt_copy': '复制选中内容',
            'lang_Txt_cut': '剪切选中内容',
            'lang_Txt_Paste': '粘贴',
            'lang_Txt_undo': '重新执行上次操作',
            'lang_Txt_redo': '撤销上一次操作',
            'lang_Txt_italic': '给选中字设置为斜体',
            'lang_Txt_underline': '给选中字加下划线',
            'lang_Txt_selectAll': '全部选中',
            'lang_Txt_visualEnter': '软回车',
            'lang_Txt_fullscreen': '全屏'
        }
    },
    'insertframe': {
        'static': {
            'lang_input_address': '地址：',
            'lang_input_width': '宽度：',
            'lang_input_height': '高度：',
            'lang_input_isScroll': '允许滚动条：',
            'lang_input_frameborder': '显示框架边框：',
            'lang_input_alignMode': '对齐方式：',
            'align': {
                title: "对齐方式",
                options: ["默认", "左对齐", "右对齐", "居中"]
            }
        },
        'enterAddress': '请输入地址!'
    },
    'link': {
        'static': {
            'lang_input_text': '文本内容：',
            'lang_input_url': '链接地址：',
            'lang_input_title': '标题：',
            'lang_input_target': '是否在新窗口打开：'
        },
        'validLink': '只支持选中一个链接时生效',
        'httpPrompt': '您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀'
    },
    'map': {
        'static': {
            lang_city: "城市",
            lang_address: "地址",
            city: {
                value: "北京"
            },
            lang_search: "搜索",
            lang_dynamicmap: "插入动态地图"
        },
        cityMsg: "请选择城市",
        errorMsg: "抱歉，找不到该位置！"
    },
    'searchreplace': {
        'static': {
            lang_tab_search: "查找",
            lang_tab_replace: "替换",
            lang_search1: "查找",
            lang_search2: "查找",
            lang_replace: "替换",
            lang_searchReg: '支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',
            lang_searchReg1: '支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',
            lang_case_sensitive1: "区分大小写",
            lang_case_sensitive2: "区分大小写",
            nextFindBtn: {
                value: "下一个"
            },
            preFindBtn: {
                value: "上一个"
            },
            nextReplaceBtn: {
                value: "下一个"
            },
            preReplaceBtn: {
                value: "上一个"
            },
            repalceBtn: {
                value: "替换"
            },
            repalceAllBtn: {
                value: "全部替换"
            }
        },
        getEnd: "已经搜索到文章末尾！",
        getStart: "已经搜索到文章头部",
        countMsg: "总共替换了{#count}处！"
    },
    'snapscreen': {
        'static': {
            lang_showMsg: "截图功能需要首先安装UEditor截图插件！ ",
            lang_download: "点此下载",
            lang_step1: "第一步，下载UEditor截图插件并运行安装。",
            lang_step2: "第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"
        }
    },
    'spechars': {
        'static': {},
        tsfh: "特殊字符",
        lmsz: "罗马字符",
        szfh: "数学字符",
        rwfh: "日文字符",
        xlzm: "希腊字母",
        ewzm: "俄文字符",
        pyzm: "拼音字母",
        yyyb: "英语音标",
        zyzf: "其他"
    },
    'edittable': {
        'static': {
            'lang_tableStyle': '表格样式',
            'lang_insertCaption': '添加表格名称行',
            'lang_insertTitle': '添加表格标题行',
            'lang_insertTitleCol': '添加表格标题列',
            'lang_orderbycontent': "使表格内容可排序",
            'lang_tableSize': '自动调整表格尺寸',
            'lang_autoSizeContent': '按表格文字自适应',
            'lang_autoSizePage': '按页面宽度自适应',
            'lang_example': '示例',
            'lang_borderStyle': '表格边框',
            'lang_color': '颜色:'
        },
        captionName: '表格名称',
        titleName: '标题',
        cellsName: '内容',
        errorMsg: '有合并单元格，不可排序'
    },
    'edittip': {
        'static': {
            lang_delRow: '删除整行',
            lang_delCol: '删除整列'
        }
    },
    'edittd': {
        'static': {
            lang_tdBkColor: '背景颜色:'
        }
    },
    'formula': {
        'static': {}
    },
    'wordimage': {
        'static': {
            lang_resave: "转存步骤",
            uploadBtn: {
                src: "upload.png",
                alt: "上传"
            },
            clipboard: {
                style: "background: url(copy.png) -153px -1px no-repeat;"
            },
            lang_step: "1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"
        },
        'fileType': "图片",
        'flashError': "FLASH初始化失败，请检查FLASH插件是否正确安装！",
        'netError': "网络连接错误，请重试！",
        'copySuccess': "图片地址已经复制！",
        'flashI18n': {}
    },
    'autosave': {
        'saving': '保存中...',
        'success': '本地保存成功'
    }
};;

jQuery(function($) {
    $.jslanguage = {
        selectAll: '全选',
        noSelect: '没有选中项',
        confirm_trash: '您确认要删除数据到回收站吗？',
        confirm_delete: '您确认要彻底删除数据吗？',
        confirm_restore: '您确认要从回收站恢复数据吗？',
        confirm_publish: '您确认要发布这些数据吗？',
        confirm_batchEdit: '批量修改将会修改您选择的所有行的值，您确认要进行批量修改吗？',
        confirm_unpublish: '您确认要使这些发布的数据下线吗？',
        cancel_fav_confirm: '您确认要取消收藏这条数据吗？',
        needlogin: '登录',
        sure_delete: '您确认要删除数据吗？',
        dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],
        dayNamesShort: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
        dayNamesMin: ['日', '一', '二', '三', '四', '五', '六'],
        weekHeader: '周',
        dateFormat: 'yy-mm-dd',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: true,
        yearSuffix: '',
        noSelect: '没有选中项',
        wysiswyg_mode: '不能在查看源代码时插入',
        select_editor: '请先在编辑器中选择要插入的位置',
        insert_portlet: '插入portlet',
        use_editor: '使用编辑器',
        destory_editor: '注销编辑器'
    };
    if (typeof $.tools != 'undefined' && typeof $.tools.validator != 'undefined') {
        $.tools.validator.localize("zh", {
            '*': '请检查输入格式是否正确',
            ':email': '请输入有效的邮箱地址。',
            ':number': '请输入有效的数字。',
            ':url': '请输入有效的网址。',
            '[max]': '最大值不大于$1',
            '[min]': '最小值不小于$1',
            '[required]': '此项必填，不允许为空。'
        });
    }
});;

(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'));
    } else {
        factory(jQuery);
    }
}(function($) {
    var pluses = /\+/g;

    function encode(s) {
        return config.raw ? s : encodeURIComponent(s);
    }

    function decode(s) {
        return config.raw ? s : decodeURIComponent(s);
    }

    function stringifyCookieValue(value) {
        return encode(config.json ? JSON.stringify(value) : String(value));
    }

    function parseCookieValue(s) {
        if (s.indexOf('"') === 0) {
            s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
        }
        try {
            s = decodeURIComponent(s.replace(pluses, ' '));
            return config.json ? JSON.parse(s) : s;
        } catch (e) {}
    }

    function read(s, converter) {
        var value = config.raw ? s : parseCookieValue(s);
        return $.isFunction(converter) ? converter(value) : value;
    }
    var config = $.cookie = function(key, value, options) {
        if (value !== undefined && !$.isFunction(value)) {
            options = $.extend({}, config.defaults, options);
            if (typeof options.expires === 'number') {
                var days = options.expires,
                    t = options.expires = new Date();
                t.setTime(+t + days * 864e+5);
            }
            return (document.cookie = [encode(key), '=', stringifyCookieValue(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join(''));
        }
        var result = key ? undefined : {};
        var cookies = document.cookie ? document.cookie.split('; ') : [];
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].split('=');
            var name = decode(parts.shift());
            var cookie = parts.join('=');
            if (key && key === name) {
                result = read(cookie, value);
                break;
            }
            if (!key && (cookie = read(cookie)) !== undefined) {
                result[name] = cookie;
            }
        }
        return result;
    };
    config.defaults = {};
    $.removeCookie = function(key, options) {
        if ($.cookie(key) === undefined) {
            return false;
        }
        $.cookie(key, '', $.extend({}, options, {
            expires: -1
        }));
        return !$.cookie(key);
    };
}));;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
!
    function(a) {
        "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
    }(function(a) {
        function b(b) {
            var g = b || window.event,
                h = i.call(arguments, 1),
                j = 0,
                l = 0,
                m = 0,
                n = 0,
                o = 0,
                p = 0;
            if (b = a.event.fix(g), b.type = "mousewheel", "detail" in g && (m = -1 * g.detail), "wheelDelta" in g && (m = g.wheelDelta), "wheelDeltaY" in g && (m = g.wheelDeltaY), "wheelDeltaX" in g && (l = -1 * g.wheelDeltaX), "axis" in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m, m = 0), j = 0 === m ? l : m, "deltaY" in g && (m = -1 * g.deltaY, j = m), "deltaX" in g && (l = g.deltaX, 0 === m && (j = -1 * l)), 0 !== m || 0 !== l) {
                if (1 === g.deltaMode) {
                    var q = a.data(this, "mousewheel-line-height");
                    j *= q, m *= q, l *= q
                } else if (2 === g.deltaMode) {
                    var r = a.data(this, "mousewheel-page-height");
                    j *= r, m *= r, l *= r
                }
                if (n = Math.max(Math.abs(m), Math.abs(l)), (!f || f > n) && (f = n, d(g, n) && (f /= 40)), d(g, n) && (j /= 40, l /= 40, m /= 40), j = Math[j >= 1 ? "floor" : "ceil"](j / f), l = Math[l >= 1 ? "floor" : "ceil"](l / f), m = Math[m >= 1 ? "floor" : "ceil"](m / f), k.settings.normalizeOffset && this.getBoundingClientRect) {
                    var s = this.getBoundingClientRect();
                    o = b.clientX - s.left, p = b.clientY - s.top
                }
                return b.deltaX = l, b.deltaY = m, b.deltaFactor = f, b.offsetX = o, b.offsetY = p, b.deltaMode = 0, h.unshift(b, j, l, m), e && clearTimeout(e), e = setTimeout(c, 200), (a.event.dispatch || a.event.handle).apply(this, h)
            }
        }
        function c() {
            f = null
        }
        function d(a, b) {
            return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
        }
        var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
            h = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
            i = Array.prototype.slice;
        if (a.event.fixHooks) for (var j = g.length; j;) a.event.fixHooks[g[--j]] = a.event.mouseHooks;
        var k = a.event.special.mousewheel = {
            version: "3.1.12",
            setup: function() {
                if (this.addEventListener) for (var c = h.length; c;) this.addEventListener(h[--c], b, !1);
                else this.onmousewheel = b;
                a.data(this, "mousewheel-line-height", k.getLineHeight(this)), a.data(this, "mousewheel-page-height", k.getPageHeight(this))
            },
            teardown: function() {
                if (this.removeEventListener) for (var c = h.length; c;) this.removeEventListener(h[--c], b, !1);
                else this.onmousewheel = null;
                a.removeData(this, "mousewheel-line-height"), a.removeData(this, "mousewheel-page-height")
            },
            getLineHeight: function(b) {
                var c = a(b),
                    d = c["offsetParent" in a.fn ? "offsetParent" : "parent"]();
                return d.length || (d = a("body")), parseInt(d.css("fontSize"), 10) || parseInt(c.css("fontSize"), 10) || 16
            },
            getPageHeight: function(b) {
                return a(b).height()
            },
            settings: {
                adjustOldDeltas: !0,
                normalizeOffset: !0
            }
        };
        a.fn.extend({
            mousewheel: function(a) {
                return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
            },
            unmousewheel: function(a) {
                return this.unbind("mousewheel", a)
            }
        })
    });;
/*! 
 * LESS - Leaner CSS v1.7.0
 * http://lesscss.org
 *
 * Copyright (c) 2009-2014, Alexis Sellier <self@cloudhead.net>
 * Licensed under the Apache v2 License.
 *
 */

/** * @license Apache v2
 */

!
    function(a, b) {
        function c(b) {
            return a.less[b.split("/")[1]]
        }
        function d(a, b) {
            "undefined" != typeof console && w.logLevel >= b && console.log("less: " + a)
        }
        function e(a) {
            return a.replace(/^[a-z-]+:\/+?[^\/]+/, "").replace(/^\//, "").replace(/\.[a-zA-Z]+$/, "").replace(/[^\.\w-]+/g, "-").replace(/\./g, ":")
        }
        function f(a, c) {
            var e = "{line} {content}",
                f = a.filename || c,
                g = [],
                h = (a.type || "Syntax") + "Error: " + (a.message || "There is an error in your .less file") + " in " + f + " ",
                i = function(a, c, d) {
                    a.extract[c] !== b && g.push(e.replace(/\{line\}/, (parseInt(a.line, 10) || 0) + (c - 1)).replace(/\{class\}/, d).replace(/\{content\}/, a.extract[c]))
                };
            a.extract ? (i(a, 0, ""), i(a, 1, "line"), i(a, 2, ""), h += "on line " + a.line + ", column " + (a.column + 1) + ":\n" + g.join("\n")) : a.stack && (h += a.stack), d(h, z.errors)
        }
        function g(a, b, c) {
            var f = b.href || "",
                g = "less:" + (b.title || e(f)),
                h = document.getElementById(g),
                i = !1,
                j = document.createElement("style");
            if (j.setAttribute("type", "text/css"), b.media && j.setAttribute("media", b.media), j.id = g, j.styleSheet) try {
                j.styleSheet.cssText = a
            } catch (k) {
                throw new Error("Couldn't reassign styleSheet.cssText.")
            } else j.appendChild(document.createTextNode(a)), i = null !== h && h.childNodes.length > 0 && j.childNodes.length > 0 && h.firstChild.nodeValue === j.firstChild.nodeValue;
            var l = document.getElementsByTagName("head")[0];
            if (null === h || i === !1) {
                var m = b && b.nextSibling || null;
                m ? m.parentNode.insertBefore(j, m) : l.appendChild(j)
            }
            if (h && i === !1 && h.parentNode.removeChild(h), c && D) {
                d("saving " + f + " to cache.", z.info);
                try {
                    D.setItem(f, a), D.setItem(f + ":timestamp", c)
                } catch (k) {
                    d("failed to save", z.errors)
                }
            }
        }
        function h(a) {
            return w.postProcessor && "function" == typeof w.postProcessor && (a = w.postProcessor.call(a, a) || a), a
        }
        function i(a, c) {
            var d, f, h = "less-error-message:" + e(c || ""),
                i = '<li><label>{line}</label><pre class="{class}">{content}</pre></li>',
                j = document.createElement("div"),
                k = [],
                l = a.filename || c,
                m = l.match(/([^\/]+(\?.*)?)$/)[1];
            j.id = h, j.className = "less-error-message", f = "<h3>" + (a.type || "Syntax") + "Error: " + (a.message || "There is an error in your .less file") + '</h3><p>in <a href="' + l + '">' + m + "</a> ";
            var n = function(a, c, d) {
                a.extract[c] !== b && k.push(i.replace(/\{line\}/, (parseInt(a.line, 10) || 0) + (c - 1)).replace(/\{class\}/, d).replace(/\{content\}/, a.extract[c]))
            };
            a.extract ? (n(a, 0, ""), n(a, 1, "line"), n(a, 2, ""), f += "on line " + a.line + ", column " + (a.column + 1) + ":</p><ul>" + k.join("") + "</ul>") : a.stack && (f += "<br/>" + a.stack.split("\n").slice(1).join("<br/>")), j.innerHTML = f, g([".less-error-message ul, .less-error-message li {", "list-style-type: none;", "margin-right: 15px;", "padding: 4px 0;", "margin: 0;", "}", ".less-error-message label {", "font-size: 12px;", "margin-right: 15px;", "padding: 4px 0;", "color: #cc7777;", "}", ".less-error-message pre {", "color: #dd6666;", "padding: 4px 0;", "margin: 0;", "display: inline-block;", "}", ".less-error-message pre.line {", "color: #ff0000;", "}", ".less-error-message h3 {", "font-size: 20px;", "font-weight: bold;", "padding: 15px 0 5px 0;", "margin: 0;", "}", ".less-error-message a {", "color: #10a", "}", ".less-error-message .error {", "color: red;", "font-weight: bold;", "padding-bottom: 2px;", "border-bottom: 1px dashed red;", "}"].join("\n"), {
                title: "error-message"
            }), j.style.cssText = ["font-family: Arial, sans-serif", "border: 1px solid #e00", "background-color: #eee", "border-radius: 5px", "-webkit-border-radius: 5px", "-moz-border-radius: 5px", "color: #e00", "padding: 15px", "margin-bottom: 15px"].join(";"), "development" == w.env && (d = setInterval(function() {
                document.body && (document.getElementById(h) ? document.body.replaceChild(j, document.getElementById(h)) : document.body.insertBefore(j, document.body.firstChild), clearInterval(d))
            }, 10))
        }
        function j(a, b) {
            w.errorReporting && "html" !== w.errorReporting ? "console" === w.errorReporting ? f(a, b) : "function" == typeof w.errorReporting && w.errorReporting("add", a, b) : i(a, b)
        }
        function k(a) {
            var b = document.getElementById("less-error-message:" + e(a));
            b && b.parentNode.removeChild(b)
        }
        function l() {}
        function m(a) {
            w.errorReporting && "html" !== w.errorReporting ? "console" === w.errorReporting ? l(a) : "function" == typeof w.errorReporting && w.errorReporting("remove", a) : k(a)
        }
        function n(a) {
            for (var b, c = document.getElementsByTagName("style"), d = 0; d < c.length; d++) if (b = c[d], b.type.match(C)) {
                var e = new w.tree.parseEnv(w),
                    f = b.innerHTML || "";
                e.filename = document.location.href.replace(/#.*$/, ""), (a || w.globalVars) && (e.useFileCache = !0);
                var g = function(a) {
                    return function(b, c) {
                        if (b) return j(b, "inline");
                        var d = c.toCSS(w);
                        a.type = "text/css", a.styleSheet ? a.styleSheet.cssText = d : a.innerHTML = d
                    }
                }(b);
                new w.Parser(e).parse(f, g, {
                    globalVars: w.globalVars,
                    modifyVars: a
                })
            }
        }
        function o(a, b) {
            var c, d, e = /^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,
                f = a.match(e),
                g = {},
                h = [];
            if (!f) throw new Error("Could not parse sheet href - '" + a + "'");
            if (!f[1] || f[2]) {
                if (d = b.match(e), !d) throw new Error("Could not parse page url - '" + b + "'");
                f[1] = f[1] || d[1] || "", f[2] || (f[3] = d[3] + f[3])
            }
            if (f[3]) {
                for (h = f[3].replace(/\\/g, "/").split("/"), c = 0; c < h.length; c++)"." === h[c] && (h.splice(c, 1), c -= 1);
                for (c = 0; c < h.length; c++)".." === h[c] && c > 0 && (h.splice(c - 1, 2), c -= 2)
            }
            return g.hostPart = f[1], g.directories = h, g.path = f[1] + h.join("/"), g.fileUrl = g.path + (f[4] || ""), g.url = g.fileUrl + (f[5] || ""), g
        }
        function p(a, b) {
            var c, d, e, f, g = o(a),
                h = o(b),
                i = "";
            if (g.hostPart !== h.hostPart) return "";
            for (d = Math.max(h.directories.length, g.directories.length), c = 0; d > c && h.directories[c] === g.directories[c]; c++);
            for (f = h.directories.slice(c), e = g.directories.slice(c), c = 0; c < f.length - 1; c++) i += "../";
            for (c = 0; c < e.length - 1; c++) i += e[c] + "/";
            return i
        }
        function q() {
            if (a.XMLHttpRequest && ("file:" !== a.location.protocol || !a.ActiveXObject)) return new XMLHttpRequest;
            try {
                return new ActiveXObject("Microsoft.XMLHTTP")
            } catch (b) {
                return d("browser doesn't support AJAX.", z.errors), null
            }
        }
        function r(a, b, c, e) {
            function f(b, c, d) {
                b.status >= 200 && b.status < 300 ? c(b.responseText, b.getResponseHeader("Last-Modified")) : "function" == typeof d && d(b.status, a)
            }
            var g = q(),
                h = y ? w.fileAsync : w.async;
            "function" == typeof g.overrideMimeType && g.overrideMimeType("text/css"), d("XHR: Getting '" + a + "'", z.debug), g.open("GET", a, h), g.setRequestHeader("Accept", b || "text/x-less, text/css; q=0.9, */*; q=0.5"), g.send(null), y && !w.fileAsync ? 0 === g.status || g.status >= 200 && g.status < 300 ? c(g.responseText) : e(g.status, a) : h ? g.onreadystatechange = function() {
                4 == g.readyState && f(g, c, e)
            } : f(g, c, e)
        }
        function s(b, c, d, e) {
            c && c.currentDirectory && !/^([a-z-]+:)?\//.test(b) && (b = c.currentDirectory + b);
            var f = o(b, a.location.href),
                g = f.url,
                h = {
                    currentDirectory: f.path,
                    filename: g
                };
            if (c ? (h.entryPath = c.entryPath, h.rootpath = c.rootpath, h.rootFilename = c.rootFilename, h.relativeUrls = c.relativeUrls) : (h.entryPath = f.path, h.rootpath = w.rootpath || f.path, h.rootFilename = g, h.relativeUrls = e.relativeUrls), h.relativeUrls && (h.rootpath = e.rootpath ? o(e.rootpath + p(f.path, h.entryPath)).path : f.path), e.useFileCache && E[g]) try {
                var i = E[g];
                d(null, i, g, h, {
                    lastModified: new Date
                })
            } catch (j) {
                d(j, null, g)
            } else r(g, e.mime, function(a, b) {
                E[g] = a;
                try {
                    d(null, a, g, h, {
                        lastModified: b
                    })
                } catch (c) {
                    d(c, null, g)
                }
            }, function(a, b) {
                d({
                    type: "File",
                    message: "'" + b + "' wasn't found (" + a + ")"
                }, null, g)
            })
        }
        function t(a, b, c, d, e) {
            var f = new w.tree.parseEnv(w);
            f.mime = a.type, (e || w.globalVars) && (f.useFileCache = !0), s(a.href, null, function(h, i, j, k, l) {
                if (l) {
                    l.remaining = d;
                    var n = D && D.getItem(j),
                        o = D && D.getItem(j + ":timestamp");
                    if (!c && o && l.lastModified && new Date(l.lastModified).valueOf() === new Date(o).valueOf()) return g(n, a), l.local = !0, void b(null, null, i, a, l, j)
                }
                m(j), i ? (f.currentFileInfo = k, new w.Parser(f).parse(i, function(c, d) {
                    if (c) return b(c, null, null, a);
                    try {
                        b(c, d, i, a, l, j)
                    } catch (c) {
                        b(c, null, null, a)
                    }
                }, {
                    modifyVars: e,
                    globalVars: w.globalVars
                })) : b(h, null, null, a, l, j)
            }, f, e)
        }
        function u(a, b, c) {
            for (var d = 0; d < w.sheets.length; d++) t(w.sheets[d], a, b, w.sheets.length - (d + 1), c)
        }
        function v() {
            "development" === w.env ? (w.optimization = 0, w.watchTimer = setInterval(function() {
                w.watchMode && u(function(a, b, c, d, e) {
                    if (a) j(a, d.href);
                    else if (b) {
                        var f = b.toCSS(w);
                        f = h(f), g(f, d, e.lastModified)
                    }
                })
            }, w.poll)) : w.optimization = 3
        }("undefined" == typeof a.less || "undefined" != typeof a.less.nodeType) && (a.less = {}), w = a.less, x = a.less.tree = {}, w.mode = "browser";
        var w, x;
        w === b && (w = exports, x = c("./tree"), w.mode = "node"), w.Parser = function(a) {
            function d() {
                D = y, G.push({
                    current: C,
                    i: y,
                    j: z
                })
            }
            function e() {
                var a = G.pop();
                C = a.current, D = y = a.i, z = a.j
            }
            function f() {
                G.pop()
            }
            function g() {
                y > D && (C = C.slice(y - D), D = y)
            }
            function h(a, b) {
                var c = a.charCodeAt(0 | b);
                return 32 >= c && (32 === c || 10 === c || 9 === c)
            }
            function i(a) {
                var b, c, d = typeof a;
                return "string" === d ? v.charAt(y) !== a ? null : (l(1), a) : (g(), (b = a.exec(C)) ? (c = b[0].length, l(c), "string" == typeof b ? b : 1 === b.length ? b[0] : b) : null)
            }
            function j(a) {
                y > D && (C = C.slice(y - D), D = y);
                var b = a.exec(C);
                return b ? (l(b[0].length), "string" == typeof b ? b : 1 === b.length ? b[0] : b) : null
            }
            function k(a) {
                return v.charAt(y) !== a ? null : (l(1), a)
            }
            function l(a) {
                for (var b, c = y, d = z, e = y - D, f = y + C.length - e, g = y += a, h = v; f > y && (b = h.charCodeAt(y), !(b > 32)) && (32 === b || 10 === b || 9 === b || 13 === b); y++);
                return C = C.slice(a + y - g + e), D = y, !C.length && z < B.length - 1 ? (C = B[++z], l(0), !0) : c !== y || d !== z
            }
            function m(a, b) {
                var c = "[object Function]" === Object.prototype.toString.call(a) ? a.call(F) : i(a);
                return c ? c : void o(b || ("string" == typeof a ? "expected '" + a + "' got '" + v.charAt(y) + "'" : "unexpected token"))
            }
            function n(a, b) {
                return v.charAt(y) === a ? (l(1), a) : void o(b || "expected '" + a + "' got '" + v.charAt(y) + "'")
            }
            function o(a, b) {
                var c = new Error(a);
                throw c.index = y, c.type = b || "Syntax", c
            }
            function p(a) {
                return "string" == typeof a ? v.charAt(y) === a : a.test(C)
            }
            function q(a) {
                return v.charAt(y) === a
            }
            function r(a, b) {
                return a.filename && b.currentFileInfo.filename && a.filename !== b.currentFileInfo.filename ? E.imports.contents[a.filename] : v
            }
            function s(a, b) {
                for (var c = a + 1, d = null, e = -1; --c >= 0 && "\n" !== b.charAt(c);) e++;
                return "number" == typeof a && (d = (b.slice(0, a).match(/\n/g) || "").length), {
                    line: d,
                    column: e
                }
            }
            function t(a, b, d) {
                var e = d.currentFileInfo.filename;
                return "browser" !== w.mode && "rhino" !== w.mode && (e = c("path").resolve(e)), {
                    lineNumber: s(a, b).line + 1,
                    fileName: e
                }
            }
            function u(a, b) {
                var c = r(a, b),
                    d = s(a.index, c),
                    e = d.line,
                    f = d.column,
                    g = a.call && s(a.call, c).line,
                    h = c.split("\n");
                this.type = a.type || "Syntax", this.message = a.message, this.filename = a.filename || b.currentFileInfo.filename, this.index = a.index, this.line = "number" == typeof e ? e + 1 : null, this.callLine = g + 1, this.callExtract = h[g], this.stack = a.stack, this.column = f, this.extract = [h[e - 1], h[e], h[e + 1]]
            }
            var v, y, z, A, B, C, D, E, F, G = [],
                H = a && a.filename;
            a instanceof x.parseEnv || (a = new x.parseEnv(a));
            var I = this.imports = {
                    paths: a.paths || [],
                    queue: [],
                    files: a.files,
                    contents: a.contents,
                    contentsIgnoredChars: a.contentsIgnoredChars,
                    mime: a.mime,
                    error: null,
                    push: function(b, c, d, e) {
                        var f = this;
                        this.queue.push(b);
                        var g = function(a, c, d) {
                            f.queue.splice(f.queue.indexOf(b), 1);
                            var g = d === H;
                            f.files[d] = c, a && !f.error && (f.error = a), e(a, c, g, d)
                        };
                        w.Parser.importer ? w.Parser.importer(b, c, g, a) : w.Parser.fileLoader(b, c, function(b, e, f, h) {
                            if (b) return void g(b);
                            var i = new x.parseEnv(a);
                            i.currentFileInfo = h, i.processImports = !1, i.contents[f] = e, (c.reference || d.reference) && (h.reference = !0), d.inline ? g(null, e, f) : new w.Parser(i).parse(e, function(a, b) {
                                g(a, b, f)
                            })
                        }, a)
                    }
                },
                J = j;
            return u.prototype = new Error, u.prototype.constructor = u, this.env = a = a || {}, this.optimization = "optimization" in this.env ? this.env.optimization : 1, E = {
                imports: I,
                parse: function(d, e, f) {
                    var g, h, i, j, k, l = null,
                        m = "";
                    if (y = z = D = A = 0, j = f && f.globalVars ? w.Parser.serializeVars(f.globalVars) + "\n" : "", k = f && f.modifyVars ? "\n" + w.Parser.serializeVars(f.modifyVars) : "", (j || f && f.banner) && (m = (f && f.banner ? f.banner : "") + j, E.imports.contentsIgnoredChars[a.currentFileInfo.filename] = m.length), d = d.replace(/\r\n/g, "\n"), v = d = m + d.replace(/^\uFEFF/, "") + k, E.imports.contents[a.currentFileInfo.filename] = d, B = function(b) {
                            function c(b, c) {
                                l = new u({
                                    index: c || i,
                                    type: "Parse",
                                    message: b,
                                    filename: a.currentFileInfo.filename
                                }, a)
                            }
                            function d(a) {
                                var c = i - s;
                                512 > c && !a || !c || (r.push(b.slice(s, i + 1)), s = i + 1)
                            }
                            var e, f, g, h, i, j, k, m, n, o = b.length,
                                p = 0,
                                q = 0,
                                r = [],
                                s = 0;
                            for (i = 0; o > i; i++) if (k = b.charCodeAt(i), !(k >= 97 && 122 >= k || 34 > k)) switch (k) {
                                case 40:
                                    q++, f = i;
                                    continue;
                                case 41:
                                    if (--q < 0) return c("missing opening `(`");
                                    continue;
                                case 59:
                                    q || d();
                                    continue;
                                case 123:
                                    p++, e = i;
                                    continue;
                                case 125:
                                    if (--p < 0) return c("missing opening `{`");
                                    p || q || d();
                                    continue;
                                case 92:
                                    if (o - 1 > i) {
                                        i++;
                                        continue
                                    }
                                    return c("unescaped `\\`");
                                case 34:
                                case 39:
                                case 96:
                                    for (n = 0, j = i, i += 1; o > i; i++) if (m = b.charCodeAt(i), !(m > 96)) {
                                        if (m == k) {
                                            n = 1;
                                            break
                                        }
                                        if (92 == m) {
                                            if (i == o - 1) return c("unescaped `\\`");
                                            i++
                                        }
                                    }
                                    if (n) continue;
                                    return c("unmatched `" + String.fromCharCode(k) + "`", j);
                                case 47:
                                    if (q || i == o - 1) continue;
                                    if (m = b.charCodeAt(i + 1), 47 == m) for (i += 2; o > i && (m = b.charCodeAt(i), !(13 >= m) || 10 != m && 13 != m); i++);
                                    else if (42 == m) {
                                        for (g = j = i, i += 2; o - 1 > i && (m = b.charCodeAt(i), 125 == m && (h = i), 42 != m || 47 != b.charCodeAt(i + 1)); i++);
                                        if (i == o - 1) return c("missing closing `*/`", j);
                                        i++
                                    }
                                    continue;
                                case 42:
                                    if (o - 1 > i && 47 == b.charCodeAt(i + 1)) return c("unmatched `/*`");
                                    continue
                            }
                            return 0 !== p ? g > e && h > g ? c("missing closing `}` or `*/`", e) : c("missing closing `}`", e) : 0 !== q ? c("missing closing `)`", f) : (d(!0), r)
                        }(d), l) return e(new u(l, a));
                    C = B[0];
                    try {
                        g = new x.Ruleset(null, this.parsers.primary()), g.root = !0, g.firstRoot = !0
                    } catch (n) {
                        return e(new u(n, a))
                    }
                    if (g.toCSS = function(d) {
                            return function(e, f) {
                                e = e || {};
                                var g, h, i = new x.evalEnv(e);
                                "object" != typeof f || Array.isArray(f) || (f = Object.keys(f).map(function(a) {
                                    var b = f[a];
                                    return b instanceof x.Value || (b instanceof x.Expression || (b = new x.Expression([b])), b = new x.Value([b])), new x.Rule("@" + a, b, !1, null, 0)
                                }), i.frames = [new x.Ruleset(null, f)]);
                                try {
                                    var j, k = [],
                                        l = [new x.joinSelectorVisitor, new x.processExtendsVisitor, new x.toCSSVisitor({
                                            compress: Boolean(e.compress)
                                        })],
                                        m = this;
                                    if (e.plugins) for (j = 0; j < e.plugins.length; j++) e.plugins[j].isPreEvalVisitor ? k.push(e.plugins[j]) : e.plugins[j].isPreVisitor ? l.splice(0, 0, e.plugins[j]) : l.push(e.plugins[j]);
                                    for (j = 0; j < k.length; j++) k[j].run(m);
                                    for (g = d.call(m, i), j = 0; j < l.length; j++) l[j].run(g);
                                    e.sourceMap && (g = new x.sourceMapOutput({
                                        contentsIgnoredCharsMap: E.imports.contentsIgnoredChars,
                                        writeSourceMap: e.writeSourceMap,
                                        rootNode: g,
                                        contentsMap: E.imports.contents,
                                        sourceMapFilename: e.sourceMapFilename,
                                        sourceMapURL: e.sourceMapURL,
                                        outputFilename: e.sourceMapOutputFilename,
                                        sourceMapBasepath: e.sourceMapBasepath,
                                        sourceMapRootpath: e.sourceMapRootpath,
                                        outputSourceFiles: e.outputSourceFiles,
                                        sourceMapGenerator: e.sourceMapGenerator
                                    })), h = g.toCSS({
                                        compress: Boolean(e.compress),
                                        dumpLineNumbers: a.dumpLineNumbers,
                                        strictUnits: Boolean(e.strictUnits),
                                        numPrecision: 8
                                    })
                                } catch (n) {
                                    throw new u(n, a)
                                }
                                if (e.cleancss && "node" === w.mode) {
                                    var o = c("clean-css"),
                                        p = e.cleancssOptions || {};
                                    return p.keepSpecialComments === b && (p.keepSpecialComments = "*"), p.processImport = !1, p.noRebase = !0, p.noAdvanced === b && (p.noAdvanced = !0), new o(p).minify(h)
                                }
                                return e.compress ? h.replace(/(^(\s)+)|((\s)+$)/g, "") : h
                            }
                        }(g.eval), y < v.length - 1) {
                        y = A;
                        var o = s(y, v);
                        i = v.split("\n"), h = o.line + 1, l = {
                            type: "Parse",
                            message: "Unrecognised input",
                            index: y,
                            filename: a.currentFileInfo.filename,
                            line: h,
                            column: o.column,
                            extract: [i[h - 2], i[h - 1], i[h]]
                        }
                    }
                    var p = function(b) {
                        return b = l || b || E.imports.error, b ? (b instanceof u || (b = new u(b, a)), e(b)) : e(null, g)
                    };
                    return a.processImports === !1 ? p() : void new x.importVisitor(this.imports, p).run(g)
                },
                parsers: F = {
                    primary: function() {
                        for (var a, b = this.mixin, c = J, d = []; C;) {
                            if (a = this.extendRule() || b.definition() || this.rule() || this.ruleset() || b.call() || this.comment() || this.rulesetCall() || this.directive()) d.push(a);
                            else if (!c(/^[\s\n]+/) && !c(/^;+/)) break;
                            if (q("}")) break
                        }
                        return d
                    },
                    comment: function() {
                        var b;
                        if ("/" === v.charAt(y)) return "/" === v.charAt(y + 1) ? new x.Comment(j(/^\/\/.*/), !0, y, a.currentFileInfo) : (b = j(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/), b ? new x.Comment(b, !1, y, a.currentFileInfo) : void 0)
                    },
                    comments: function() {
                        for (var a, b = [];;) {
                            if (a = this.comment(), !a) break;
                            b.push(a)
                        }
                        return b
                    },
                    entities: {
                        quoted: function() {
                            var b, c, d = y,
                                e = y;
                            return "~" === v.charAt(d) && (d++, c = !0), '"' === v.charAt(d) || "'" === v.charAt(d) ? (c && k("~"), b = j(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/), b ? new x.Quoted(b[0], b[1] || b[2], c, e, a.currentFileInfo) : void 0) : void 0
                        },
                        keyword: function() {
                            var a;
                            if (a = j(/^%|^[_A-Za-z-][_A-Za-z0-9-]*/)) {
                                var b = x.Color.fromKeyword(a);
                                return b ? b : new x.Keyword(a)
                            }
                        },
                        call: function() {
                            var b, c, d, e, f = y;
                            if (b = /^([\w-]+|%|progid:[\w\.]+)\(/.exec(C)) {
                                if (b = b[1], c = b.toLowerCase(), "url" === c) return null;
                                if (y += b.length, "alpha" === c && (e = F.alpha(), "undefined" != typeof e)) return e;
                                if (k("("), d = this.arguments(), k(")")) return b ? new x.Call(b, d, f, a.currentFileInfo) : void 0
                            }
                        },
                        arguments: function() {
                            for (var a, b = [];;) {
                                if (a = this.assignment() || F.expression(), !a) break;
                                if (b.push(a), !k(",")) break
                            }
                            return b
                        },
                        literal: function() {
                            return this.dimension() || this.color() || this.quoted() || this.unicodeDescriptor()
                        },
                        assignment: function() {
                            var a, b;
                            return a = j(/^\w+(?=\s?=)/i), a && k("=") ? (b = F.entity(), b ? new x.Assignment(a, b) : void 0) : void 0
                        },
                        url: function() {
                            var b;
                            if ("u" === v.charAt(y) && j(/^url\(/)) return b = this.quoted() || this.variable() || j(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/) || "", n(")"), new x.URL(null != b.value || b instanceof x.Variable ? b : new x.Anonymous(b), a.currentFileInfo)
                        },
                        variable: function() {
                            var b, c = y;
                            return "@" === v.charAt(y) && (b = j(/^@@?[\w-]+/)) ? new x.Variable(b, c, a.currentFileInfo) : void 0
                        },
                        variableCurly: function() {
                            var b, c = y;
                            return "@" === v.charAt(y) && (b = j(/^@\{([\w-]+)\}/)) ? new x.Variable("@" + b[1], c, a.currentFileInfo) : void 0
                        },
                        color: function() {
                            var a;
                            return "#" === v.charAt(y) && (a = j(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)) ? new x.Color(a[1]) : void 0
                        },
                        dimension: function() {
                            var a, b = v.charCodeAt(y);
                            if (!(b > 57 || 43 > b || 47 === b || 44 == b)) return a = j(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/), a ? new x.Dimension(a[1], a[2]) : void 0
                        },
                        unicodeDescriptor: function() {
                            var a;
                            return a = j(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/), a ? new x.UnicodeDescriptor(a[0]) : void 0
                        },
                        javascript: function() {
                            var c, d, e = y;
                            return "~" === v.charAt(e) && (e++, d = !0), "`" === v.charAt(e) ? (a.javascriptEnabled === b || a.javascriptEnabled || o("You are using JavaScript, which has been disabled."), d && k("~"), c = j(/^`([^`]*)`/), c ? new x.JavaScript(c[1], y, d) : void 0) : void 0
                        }
                    },
                    variable: function() {
                        var a;
                        return "@" === v.charAt(y) && (a = j(/^(@[\w-]+)\s*:/)) ? a[1] : void 0
                    },
                    rulesetCall: function() {
                        var a;
                        return "@" === v.charAt(y) && (a = j(/^(@[\w-]+)\s*\(\s*\)\s*;/)) ? new x.RulesetCall(a[1]) : void 0
                    },
                    extend: function(a) {
                        var b, c, d, e, f, g = y;
                        if (j(a ? /^&:extend\(/ : /^:extend\(/)) {
                            do {
                                for (d = null, b = null; !(d = j(/^(all)(?=\s*(\)|,))/)) && (c = this.element());) b ? b.push(c) : b = [c];
                                d = d && d[1], f = new x.Extend(new x.Selector(b), d, g), e ? e.push(f) : e = [f]
                            } while (k(","));
                            return m(/^\)/), a && m(/^;/), e
                        }
                    },
                    extendRule: function() {
                        return this.extend(!0)
                    },
                    mixin: {
                        call: function() {
                            var b, c, g, h, i, l, m = v.charAt(y),
                                o = !1,
                                p = y;
                            if ("." === m || "#" === m) {
                                for (d();;) {
                                    if (b = y, h = j(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/), !h) break;
                                    g = new x.Element(i, h, b, a.currentFileInfo), c ? c.push(g) : c = [g], i = k(">")
                                }
                                return c && (k("(") && (l = this.args(!0).args, n(")")), F.important() && (o = !0), F.end()) ? (f(), new x.mixin.Call(c, l, p, a.currentFileInfo, o)) : void e()
                            }
                        },
                        args: function(a) {
                            var b, c, g, h, i, l, m = E.parsers,
                                n = m.entities,
                                p = {
                                    args: null,
                                    variadic: !1
                                },
                                q = [],
                                r = [],
                                s = [];
                            for (d();;) {
                                if (a) l = m.detachedRuleset() || m.expression();
                                else {
                                    if (m.comments(), "." === v.charAt(y) && j(/^\.{3}/)) {
                                        p.variadic = !0, k(";") && !b && (b = !0), (b ? r : s).push({
                                            variadic: !0
                                        });
                                        break
                                    }
                                    l = n.variable() || n.literal() || n.keyword()
                                }
                                if (!l) break;
                                h = null, l.throwAwayComments && l.throwAwayComments(), i = l;
                                var t = null;
                                if (a ? l.value && 1 == l.value.length && (t = l.value[0]) : t = l, t && t instanceof x.Variable) if (k(":")) {
                                    if (q.length > 0 && (b && o("Cannot mix ; and , as delimiter types"), c = !0), i = a && m.detachedRuleset() || m.expression(), !i) {
                                        if (!a) return e(), p.args = [], p;
                                        o("could not understand value for named argument")
                                    }
                                    h = g = t.name
                                } else {
                                    if (!a && j(/^\.{3}/)) {
                                        p.variadic = !0, k(";") && !b && (b = !0), (b ? r : s).push({
                                            name: l.name,
                                            variadic: !0
                                        });
                                        break
                                    }
                                    a || (g = h = t.name, i = null)
                                }
                                i && q.push(i), s.push({
                                    name: h,
                                    value: i
                                }), k(",") || (k(";") || b) && (c && o("Cannot mix ; and , as delimiter types"), b = !0, q.length > 1 && (i = new x.Value(q)), r.push({
                                    name: g,
                                    value: i
                                }), g = null, q = [], c = !1)
                            }
                            return f(), p.args = b ? r : s, p
                        },
                        definition: function() {
                            var a, b, c, g, h = [],
                                i = !1;
                            if (!("." !== v.charAt(y) && "#" !== v.charAt(y) || p(/^[^{]*\}/))) if (d(), b = j(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)) {
                                a = b[1];
                                var l = this.args(!1);
                                if (h = l.args, i = l.variadic, !k(")")) return A = y, void e();
                                if (F.comments(), j(/^when/) && (g = m(F.conditions, "expected condition")), c = F.block()) return f(), new x.mixin.Definition(a, h, c, g, i);
                                e()
                            } else f()
                        }
                    },
                    entity: function() {
                        var a = this.entities;
                        return a.literal() || a.variable() || a.url() || a.call() || a.keyword() || a.javascript() || this.comment()
                    },
                    end: function() {
                        return k(";") || q("}")
                    },
                    alpha: function() {
                        var a;
                        if (j(/^\(opacity=/i)) return a = j(/^\d+/) || this.entities.variable(), a ? (n(")"), new x.Alpha(a)) : void 0
                    },
                    element: function() {
                        var b, c, g, h = y;
                        return c = this.combinator(), b = j(/^(?:\d+\.\d+|\d+)%/) || j(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/) || k("*") || k("&") || this.attribute() || j(/^\([^()@]+\)/) || j(/^[\.#](?=@)/) || this.entities.variableCurly(), b || (d(), k("(") ? (g = this.selector()) && k(")") ? (b = new x.Paren(g), f()) : e() : f()), b ? new x.Element(c, b, h, a.currentFileInfo) : void 0
                    },
                    combinator: function() {
                        var a = v.charAt(y);
                        if (">" === a || "+" === a || "~" === a || "|" === a || "^" === a) {
                            for (y++, "^" === v.charAt(y) && (a = "^^", y++); h(v, y);) y++;
                            return new x.Combinator(a)
                        }
                        return new x.Combinator(h(v, y - 1) ? " " : null)
                    },
                    lessSelector: function() {
                        return this.selector(!0)
                    },
                    selector: function(b) {
                        for (var c, d, e, f, g, h, i, j = y, k = J;
                             (b && (g = this.extend()) || b && (h = k(/^when/)) || (f = this.element())) && (h ? i = m(this.conditions, "expected condition") : i ? o("CSS guard can only be used at the end of selector") : g ? d ? d.push(g) : d = [g] : (d && o("Extend can only be used at the end of selector"), e = v.charAt(y), c ? c.push(f) : c = [f], f = null), "{" !== e && "}" !== e && ";" !== e && "," !== e && ")" !== e););
                        return c ? new x.Selector(c, d, i, j, a.currentFileInfo) : void(d && o("Extend must be used to extend a selector, it cannot be used on its own"))
                    },
                    attribute: function() {
                        if (k("[")) {
                            var a, b, c, d = this.entities;
                            return (a = d.variableCurly()) || (a = m(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)), c = j(/^[|~*$^]?=/), c && (b = d.quoted() || j(/^[0-9]+%/) || j(/^[\w-]+/) || d.variableCurly()), n("]"), new x.Attribute(a, c, b)
                        }
                    },
                    block: function() {
                        var a;
                        return k("{") && (a = this.primary()) && k("}") ? a : void 0
                    },
                    blockRuleset: function() {
                        var a = this.block();
                        return a && (a = new x.Ruleset(null, a)), a
                    },
                    detachedRuleset: function() {
                        var a = this.blockRuleset();
                        return a ? new x.DetachedRuleset(a) : void 0
                    },
                    ruleset: function() {
                        var b, c, g, h;
                        for (d(), a.dumpLineNumbers && (h = t(y, v, a));;) {
                            if (c = this.lessSelector(), !c) break;
                            if (b ? b.push(c) : b = [c], this.comments(), c.condition && b.length > 1 && o("Guards are only currently allowed on a single selector."), !k(",")) break;
                            c.condition && o("Guards are only currently allowed on a single selector."), this.comments()
                        }
                        if (b && (g = this.block())) {
                            f();
                            var i = new x.Ruleset(b, g, a.strictImports);
                            return a.dumpLineNumbers && (i.debugInfo = h), i
                        }
                        A = y, e()
                    },
                    rule: function(b) {
                        var c, g, h, i, j, k = y,
                            l = v.charAt(k);
                        if ("." !== l && "#" !== l && "&" !== l) if (d(), c = this.variable() || this.ruleProperty()) {
                            if (j = "string" == typeof c, j && (g = this.detachedRuleset()), g || (g = b || !a.compress && !j ? this.anonymousValue() || this.value() : this.value() || this.anonymousValue(), h = this.important(), i = !j && c.pop().value), g && this.end()) return f(), new x.Rule(c, g, h, i, k, a.currentFileInfo);
                            if (A = y, e(), g && !b) return this.rule(!0)
                        } else f()
                    },
                    anonymousValue: function() {
                        var a;
                        return a = /^([^@+\/'"*`(;{}-]*);/.exec(C), a ? (y += a[0].length - 1, new x.Anonymous(a[1])) : void 0
                    },
                    "import": function() {
                        var b, c, g = y;
                        d();
                        var h = j(/^@import?\s+/),
                            i = (h ? this.importOptions() : null) || {};
                        return h && (b = this.entities.quoted() || this.entities.url()) && (c = this.mediaFeatures(), k(";")) ? (f(), c = c && new x.Value(c), new x.Import(b, c, i, g, a.currentFileInfo)) : void e()
                    },
                    importOptions: function() {
                        var a, b, c, d = {};
                        if (!k("(")) return null;
                        do
                            if (a = this.importOption()) {
                                switch (b = a, c = !0, b) {
                                    case "css":
                                        b = "less", c = !1;
                                        break;
                                    case "once":
                                        b = "multiple", c = !1
                                }
                                if (d[b] = c, !k(",")) break
                            }
                        while (a);
                        return n(")"), d
                    },
                    importOption: function() {
                        var a = j(/^(less|css|multiple|once|inline|reference)/);
                        return a ? a[1] : void 0
                    },
                    mediaFeature: function() {
                        var b, c, d = this.entities,
                            e = [];
                        do
                            if (b = d.keyword() || d.variable()) e.push(b);
                            else if (k("(")) {
                                if (c = this.property(), b = this.value(), !k(")")) return null;
                                if (c && b) e.push(new x.Paren(new x.Rule(c, b, null, null, y, a.currentFileInfo, !0)));
                                else {
                                    if (!b) return null;
                                    e.push(new x.Paren(b))
                                }
                            }
                        while (b);
                        return e.length > 0 ? new x.Expression(e) : void 0
                    },
                    mediaFeatures: function() {
                        var a, b = this.entities,
                            c = [];
                        do
                            if (a = this.mediaFeature()) {
                                if (c.push(a), !k(",")) break
                            } else if (a = b.variable(), a && (c.push(a), !k(","))) break;
                        while (a);
                        return c.length > 0 ? c : null
                    },
                    media: function() {
                        var b, c, d, e;
                        return a.dumpLineNumbers && (e = t(y, v, a)), j(/^@media/) && (b = this.mediaFeatures(), c = this.block()) ? (d = new x.Media(c, b, y, a.currentFileInfo), a.dumpLineNumbers && (d.debugInfo = e), d) : void 0
                    },
                    directive: function() {
                        var b, c, g, h, i, l, m, n = y,
                            p = !0;
                        if ("@" === v.charAt(y)) {
                            if (c = this["import"]() || this.media()) return c;
                            if (d(), b = j(/^@[a-z-]+/)) {
                                switch (h = b, "-" == b.charAt(1) && b.indexOf("-", 2) > 0 && (h = "@" + b.slice(b.indexOf("-", 2) + 1)), h) {
                                    case "@charset":
                                        i = !0, p = !1;
                                        break;
                                    case "@namespace":
                                        l = !0, p = !1;
                                        break;
                                    case "@keyframes":
                                        i = !0;
                                        break;
                                    case "@host":
                                    case "@page":
                                    case "@document":
                                    case "@supports":
                                        m = !0
                                }
                                return i ? (c = this.entity(), c || o("expected " + b + " identifier")) : l ? (c = this.expression(), c || o("expected " + b + " expression")) : m && (c = (j(/^[^{;]+/) || "").trim(), c && (c = new x.Anonymous(c))), p && (g = this.blockRuleset()), g || !p && c && k(";") ? (f(), new x.Directive(b, c, g, n, a.currentFileInfo, a.dumpLineNumbers ? t(n, v, a) : null)) : void e()
                            }
                        }
                    },
                    value: function() {
                        var a, b = [];
                        do
                            if (a = this.expression(), a && (b.push(a), !k(","))) break;
                        while (a);
                        return b.length > 0 ? new x.Value(b) : void 0
                    },
                    important: function() {
                        return "!" === v.charAt(y) ? j(/^! *important/) : void 0
                    },
                    sub: function() {
                        var a, b;
                        return k("(") && (a = this.addition()) ? (b = new x.Expression([a]), n(")"), b.parens = !0, b) : void 0
                    },
                    multiplication: function() {
                        var a, b, c, d, e;
                        if (a = this.operand()) {
                            for (e = h(v, y - 1);;) {
                                if (p(/^\/[*\/]/)) break;
                                if (c = k("/") || k("*"), !c) break;
                                if (b = this.operand(), !b) break;
                                a.parensInOp = !0, b.parensInOp = !0, d = new x.Operation(c, [d || a, b], e), e = h(v, y - 1)
                            }
                            return d || a
                        }
                    },
                    addition: function() {
                        var a, b, c, d, e;
                        if (a = this.multiplication()) {
                            for (e = h(v, y - 1);;) {
                                if (c = j(/^[-+]\s+/) || !e && (k("+") || k("-")), !c) break;
                                if (b = this.multiplication(), !b) break;
                                a.parensInOp = !0, b.parensInOp = !0, d = new x.Operation(c, [d || a, b], e), e = h(v, y - 1)
                            }
                            return d || a
                        }
                    },
                    conditions: function() {
                        var a, b, c, d = y;
                        if (a = this.condition()) {
                            for (;;) {
                                if (!p(/^,\s*(not\s*)?\(/) || !k(",")) break;
                                if (b = this.condition(), !b) break;
                                c = new x.Condition("or", c || a, b, d)
                            }
                            return c || a
                        }
                    },
                    condition: function() {
                        var a, b, c, d, e = this.entities,
                            f = y,
                            g = !1;
                        return j(/^not/) && (g = !0), n("("), a = this.addition() || e.keyword() || e.quoted(), a ? (d = j(/^(?:>=|<=|=<|[<=>])/), d ? (b = this.addition() || e.keyword() || e.quoted(), b ? c = new x.Condition(d, a, b, f, g) : o("expected expression")) : c = new x.Condition("=", a, new x.Keyword("true"), f, g), n(")"), j(/^and/) ? new x.Condition("and", c, this.condition()) : c) : void 0
                    },
                    operand: function() {
                        var a, b = this.entities,
                            c = v.charAt(y + 1);
                        "-" !== v.charAt(y) || "@" !== c && "(" !== c || (a = k("-"));
                        var d = this.sub() || b.dimension() || b.color() || b.variable() || b.call();
                        return a && (d.parensInOp = !0, d = new x.Negative(d)), d
                    },
                    expression: function() {
                        var a, b, c = [];
                        do a = this.addition() || this.entity(), a && (c.push(a), p(/^\/[\/*]/) || (b = k("/"), b && c.push(new x.Anonymous(b))));
                        while (a);
                        return c.length > 0 ? new x.Expression(c) : void 0
                    },
                    property: function() {
                        var a = j(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);
                        return a ? a[1] : void 0
                    },
                    ruleProperty: function() {
                        function b(a) {
                            var b = a.exec(e);
                            return b ? (g.push(y + h), h += b[0].length, e = e.slice(b[1].length), f.push(b[1])) : void 0
                        }
                        var c, d, e = C,
                            f = [],
                            g = [],
                            h = 0;
                        for (b(/^(\*?)/); b(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/););
                        if (f.length > 1 && b(/^\s*((?:\+_|\+)?)\s*:/)) {
                            for (l(h), "" === f[0] && (f.shift(), g.shift()), d = 0; d < f.length; d++) c = f[d], f[d] = "@" !== c.charAt(0) ? new x.Keyword(c) : new x.Variable("@" + c.slice(2, -1), g[d], a.currentFileInfo);
                            return f
                        }
                    }
                }
            }
        }, w.Parser.serializeVars = function(a) {
            var b = "";
            for (var c in a) if (Object.hasOwnProperty.call(a, c)) {
                var d = a[c];
                b += ("@" === c[0] ? "" : "@") + c + ": " + d + (";" === ("" + d).slice(-1) ? "" : ";")
            }
            return b
        }, function(d) {
            function e(a, b, c) {
                if (!(c instanceof d.Dimension)) throw {
                    type: "Argument",
                    message: "argument must be a number"
                };
                return null == b ? b = c.unit : c = c.unify(), new d.Dimension(a(parseFloat(c.value)), b)
            }
            function f(a, b, c) {
                var e, f, g, h, i = b.alpha,
                    j = c.alpha,
                    k = [];
                g = j + i * (1 - j);
                for (var l = 0; 3 > l; l++) e = b.rgb[l] / 255, f = c.rgb[l] / 255, h = a(e, f), g && (h = (j * f + i * (e - j * (e + f - h))) / g), k[l] = 255 * h;
                return new d.Color(k, g)
            }
            function g() {
                var a, b = d.functions;
                for (a in l) l.hasOwnProperty(a) && (b[a] = e.bind(null, Math[a], l[a]));
                for (a in m) m.hasOwnProperty(a) && (b[a] = f.bind(null, m[a]));
                a = d.defaultFunc, b["default"] = a.eval.bind(a)
            }
            function h(a) {
                return d.functions.hsla(a.h, a.s, a.l, a.a)
            }
            function i(a, b) {
                return a instanceof d.Dimension && a.unit.is("%") ? parseFloat(a.value * b / 100) : j(a)
            }
            function j(a) {
                if (a instanceof d.Dimension) return parseFloat(a.unit.is("%") ? a.value / 100 : a.value);
                if ("number" == typeof a) return a;
                throw {
                    error: "RuntimeError",
                    message: "color functions take numbers as parameters"
                }
            }
            function k(a) {
                return Math.min(1, Math.max(0, a))
            }
            d.functions = {
                rgb: function(a, b, c) {
                    return this.rgba(a, b, c, 1)
                },
                rgba: function(a, b, c, e) {
                    var f = [a, b, c].map(function(a) {
                        return i(a, 255)
                    });
                    return e = j(e), new d.Color(f, e)
                },
                hsl: function(a, b, c) {
                    return this.hsla(a, b, c, 1)
                },
                hsla: function(a, b, c, d) {
                    function e(a) {
                        return a = 0 > a ? a + 1 : a > 1 ? a - 1 : a, 1 > 6 * a ? g + (f - g) * a * 6 : 1 > 2 * a ? f : 2 > 3 * a ? g + (f - g) * (2 / 3 - a) * 6 : g
                    }
                    a = j(a) % 360 / 360, b = k(j(b)), c = k(j(c)), d = k(j(d));
                    var f = .5 >= c ? c * (b + 1) : c + b - c * b,
                        g = 2 * c - f;
                    return this.rgba(255 * e(a + 1 / 3), 255 * e(a), 255 * e(a - 1 / 3), d)
                },
                hsv: function(a, b, c) {
                    return this.hsva(a, b, c, 1)
                },
                hsva: function(a, b, c, d) {
                    a = j(a) % 360 / 360 * 360, b = j(b), c = j(c), d = j(d);
                    var e, f;
                    e = Math.floor(a / 60 % 6), f = a / 60 - e;
                    var g = [c, c * (1 - b), c * (1 - f * b), c * (1 - (1 - f) * b)],
                        h = [
                            [0, 3, 1],
                            [2, 0, 1],
                            [1, 0, 3],
                            [1, 2, 0],
                            [3, 1, 0],
                            [0, 1, 2]
                        ];
                    return this.rgba(255 * g[h[e][0]], 255 * g[h[e][1]], 255 * g[h[e][2]], d)
                },
                hue: function(a) {
                    return new d.Dimension(Math.round(a.toHSL().h))
                },
                saturation: function(a) {
                    return new d.Dimension(Math.round(100 * a.toHSL().s), "%")
                },
                lightness: function(a) {
                    return new d.Dimension(Math.round(100 * a.toHSL().l), "%")
                },
                hsvhue: function(a) {
                    return new d.Dimension(Math.round(a.toHSV().h))
                },
                hsvsaturation: function(a) {
                    return new d.Dimension(Math.round(100 * a.toHSV().s), "%")
                },
                hsvvalue: function(a) {
                    return new d.Dimension(Math.round(100 * a.toHSV().v), "%")
                },
                red: function(a) {
                    return new d.Dimension(a.rgb[0])
                },
                green: function(a) {
                    return new d.Dimension(a.rgb[1])
                },
                blue: function(a) {
                    return new d.Dimension(a.rgb[2])
                },
                alpha: function(a) {
                    return new d.Dimension(a.toHSL().a)
                },
                luma: function(a) {
                    return new d.Dimension(Math.round(a.luma() * a.alpha * 100), "%")
                },
                luminance: function(a) {
                    var b = .2126 * a.rgb[0] / 255 + .7152 * a.rgb[1] / 255 + .0722 * a.rgb[2] / 255;
                    return new d.Dimension(Math.round(b * a.alpha * 100), "%")
                },
                saturate: function(a, b) {
                    if (!a.rgb) return null;
                    var c = a.toHSL();
                    return c.s += b.value / 100, c.s = k(c.s), h(c)
                },
                desaturate: function(a, b) {
                    var c = a.toHSL();
                    return c.s -= b.value / 100, c.s = k(c.s), h(c)
                },
                lighten: function(a, b) {
                    var c = a.toHSL();
                    return c.l += b.value / 100, c.l = k(c.l), h(c)
                },
                darken: function(a, b) {
                    var c = a.toHSL();
                    return c.l -= b.value / 100, c.l = k(c.l), h(c)
                },
                fadein: function(a, b) {
                    var c = a.toHSL();
                    return c.a += b.value / 100, c.a = k(c.a), h(c)
                },
                fadeout: function(a, b) {
                    var c = a.toHSL();
                    return c.a -= b.value / 100, c.a = k(c.a), h(c)
                },
                fade: function(a, b) {
                    var c = a.toHSL();
                    return c.a = b.value / 100, c.a = k(c.a), h(c)
                },
                spin: function(a, b) {
                    var c = a.toHSL(),
                        d = (c.h + b.value) % 360;
                    return c.h = 0 > d ? 360 + d : d, h(c)
                },
                mix: function(a, b, c) {
                    c || (c = new d.Dimension(50));
                    var e = c.value / 100,
                        f = 2 * e - 1,
                        g = a.toHSL().a - b.toHSL().a,
                        h = ((f * g == -1 ? f : (f + g) / (1 + f * g)) + 1) / 2,
                        i = 1 - h,
                        j = [a.rgb[0] * h + b.rgb[0] * i, a.rgb[1] * h + b.rgb[1] * i, a.rgb[2] * h + b.rgb[2] * i],
                        k = a.alpha * e + b.alpha * (1 - e);
                    return new d.Color(j, k)
                },
                greyscale: function(a) {
                    return this.desaturate(a, new d.Dimension(100))
                },
                contrast: function(a, b, c, d) {
                    if (!a.rgb) return null;
                    if ("undefined" == typeof c && (c = this.rgba(255, 255, 255, 1)), "undefined" == typeof b && (b = this.rgba(0, 0, 0, 1)), b.luma() > c.luma()) {
                        var e = c;
                        c = b, b = e
                    }
                    return d = "undefined" == typeof d ? .43 : j(d), a.luma() < d ? c : b
                },
                e: function(a) {
                    return new d.Anonymous(a instanceof d.JavaScript ? a.evaluated : a)
                },
                escape: function(a) {
                    return new d.Anonymous(encodeURI(a.value).replace(/=/g, "%3D").replace(/:/g, "%3A").replace(/#/g, "%23").replace(/;/g, "%3B").replace(/\(/g, "%28").replace(/\)/g, "%29"))
                },
                replace: function(a, b, c, e) {
                    var f = a.value;
                    return f = f.replace(new RegExp(b.value, e ? e.value : ""), c.value), new d.Quoted(a.quote || "", f, a.escaped)
                },
                "%": function(a) {
                    for (var b = Array.prototype.slice.call(arguments, 1), c = a.value, e = 0; e < b.length; e++) c = c.replace(/%[sda]/i, function(a) {
                        var c = a.match(/s/i) ? b[e].value : b[e].toCSS();
                        return a.match(/[A-Z]$/) ? encodeURIComponent(c) : c
                    });
                    return c = c.replace(/%%/g, "%"), new d.Quoted(a.quote || "", c, a.escaped)
                },
                unit: function(a, b) {
                    if (!(a instanceof d.Dimension)) throw {
                        type: "Argument",
                        message: "the first argument to unit must be a number" + (a instanceof d.Operation ? ". Have you forgotten parenthesis?" : "")
                    };
                    return b = b ? b instanceof d.Keyword ? b.value : b.toCSS() : "", new d.Dimension(a.value, b)
                },
                convert: function(a, b) {
                    return a.convertTo(b.value)
                },
                round: function(a, b) {
                    var c = "undefined" == typeof b ? 0 : b.value;
                    return e(function(a) {
                        return a.toFixed(c)
                    }, null, a)
                },
                pi: function() {
                    return new d.Dimension(Math.PI)
                },
                mod: function(a, b) {
                    return new d.Dimension(a.value % b.value, a.unit)
                },
                pow: function(a, b) {
                    if ("number" == typeof a && "number" == typeof b) a = new d.Dimension(a), b = new d.Dimension(b);
                    else if (!(a instanceof d.Dimension && b instanceof d.Dimension)) throw {
                        type: "Argument",
                        message: "arguments must be numbers"
                    };
                    return new d.Dimension(Math.pow(a.value, b.value), a.unit)
                },
                _minmax: function(a, c) {
                    switch (c = Array.prototype.slice.call(c), c.length) {
                        case 0:
                            throw {
                                type: "Argument",
                                message: "one or more arguments required"
                            }
                    }
                    var e, f, g, h, i, j, k, l, m = [],
                        n = {};
                    for (e = 0; e < c.length; e++) if (g = c[e], g instanceof d.Dimension) if (h = "" === g.unit.toString() && l !== b ? new d.Dimension(g.value, l).unify() : g.unify(), j = "" === h.unit.toString() && k !== b ? k : h.unit.toString(), k = "" !== j && k === b || "" !== j && "" === m[0].unify().unit.toString() ? j : k, l = "" !== j && l === b ? g.unit.toString() : l, f = n[""] !== b && "" !== j && j === k ? n[""] : n[j], f !== b) i = "" === m[f].unit.toString() && l !== b ? new d.Dimension(m[f].value, l).unify() : m[f].unify(), (a && h.value < i.value || !a && h.value > i.value) && (m[f] = g);
                    else {
                        if (k !== b && j !== k) throw {
                            type: "Argument",
                            message: "incompatible types"
                        };
                        n[j] = m.length, m.push(g)
                    } else Array.isArray(c[e].value) && Array.prototype.push.apply(c, Array.prototype.slice.call(c[e].value));
                    return 1 == m.length ? m[0] : (c = m.map(function(a) {
                        return a.toCSS(this.env)
                    }).join(this.env.compress ? "," : ", "), new d.Anonymous((a ? "min" : "max") + "(" + c + ")"))
                },
                min: function() {
                    return this._minmax(!0, arguments)
                },
                max: function() {
                    return this._minmax(!1, arguments)
                },
                "get-unit": function(a) {
                    return new d.Anonymous(a.unit)
                },
                argb: function(a) {
                    return new d.Anonymous(a.toARGB())
                },
                percentage: function(a) {
                    return new d.Dimension(100 * a.value, "%")
                },
                color: function(a) {
                    if (a instanceof d.Quoted) {
                        var b, c = a.value;
                        if (b = d.Color.fromKeyword(c)) return b;
                        if (/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/.test(c)) return new d.Color(c.slice(1));
                        throw {
                            type: "Argument",
                            message: "argument must be a color keyword or 3/6 digit hex e.g. #FFF"
                        }
                    }
                    throw {
                        type: "Argument",
                        message: "argument must be a string"
                    }
                },
                iscolor: function(a) {
                    return this._isa(a, d.Color)
                },
                isnumber: function(a) {
                    return this._isa(a, d.Dimension)
                },
                isstring: function(a) {
                    return this._isa(a, d.Quoted)
                },
                iskeyword: function(a) {
                    return this._isa(a, d.Keyword)
                },
                isurl: function(a) {
                    return this._isa(a, d.URL)
                },
                ispixel: function(a) {
                    return this.isunit(a, "px")
                },
                ispercentage: function(a) {
                    return this.isunit(a, "%")
                },
                isem: function(a) {
                    return this.isunit(a, "em")
                },
                isunit: function(a, b) {
                    return a instanceof d.Dimension && a.unit.is(b.value || b) ? d.True : d.False
                },
                _isa: function(a, b) {
                    return a instanceof b ? d.True : d.False
                },
                tint: function(a, b) {
                    return this.mix(this.rgb(255, 255, 255), a, b)
                },
                shade: function(a, b) {
                    return this.mix(this.rgb(0, 0, 0), a, b)
                },
                extract: function(a, b) {
                    return b = b.value - 1, Array.isArray(a.value) ? a.value[b] : Array(a)[b]
                },
                length: function(a) {
                    var b = Array.isArray(a.value) ? a.value.length : 1;
                    return new d.Dimension(b)
                },
                "data-uri": function(b, e) {
                    if ("undefined" != typeof a) return new d.URL(e || b, this.currentFileInfo).eval(this.env);
                    var f = b.value,
                        g = e && e.value,
                        h = c("fs"),
                        i = c("path"),
                        j = !1;
                    if (arguments.length < 2 && (g = f), this.env.isPathRelative(g) && (g = this.currentFileInfo.relativeUrls ? i.join(this.currentFileInfo.currentDirectory, g) : i.join(this.currentFileInfo.entryPath, g)), arguments.length < 2) {
                        var k;
                        try {
                            k = c("mime")
                        } catch (l) {
                            k = d._mime
                        }
                        f = k.lookup(g);
                        var m = k.charsets.lookup(f);
                        j = ["US-ASCII", "UTF-8"].indexOf(m) < 0, j && (f += ";base64")
                    } else j = /;base64$/.test(f);
                    var n = h.readFileSync(g),
                        o = 32,
                        p = parseInt(n.length / 1024, 10);
                    if (p >= o && this.env.ieCompat !== !1) return this.env.silent || console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!", g, p, o), new d.URL(e || b, this.currentFileInfo).eval(this.env);
                    n = j ? n.toString("base64") : encodeURIComponent(n);
                    var q = '"data:' + f + "," + n + '"';
                    return new d.URL(new d.Anonymous(q))
                },
                "svg-gradient": function(a) {
                    function e() {
                        throw {
                            type: "Argument",
                            message: "svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position]"
                        }
                    }
                    arguments.length < 3 && e();
                    var f, g, h, i, j, k, l, m = Array.prototype.slice.call(arguments, 1),
                        n = "linear",
                        o = 'x="0" y="0" width="1" height="1"',
                        p = !0,
                        q = {
                            compress: !1
                        },
                        r = a.toCSS(q);
                    switch (r) {
                        case "to bottom":
                            f = 'x1="0%" y1="0%" x2="0%" y2="100%"';
                            break;
                        case "to right":
                            f = 'x1="0%" y1="0%" x2="100%" y2="0%"';
                            break;
                        case "to bottom right":
                            f = 'x1="0%" y1="0%" x2="100%" y2="100%"';
                            break;
                        case "to top right":
                            f = 'x1="0%" y1="100%" x2="100%" y2="0%"';
                            break;
                        case "ellipse":
                        case "ellipse at center":
                            n = "radial", f = 'cx="50%" cy="50%" r="75%"', o = 'x="-50" y="-50" width="101" height="101"';
                            break;
                        default:
                            throw {
                                type: "Argument",
                                message: "svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"
                            }
                    }
                    for (g = '<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><' + n + 'Gradient id="gradient" gradientUnits="userSpaceOnUse" ' + f + ">", h = 0; h < m.length; h += 1) m[h].value ? (i = m[h].value[0], j = m[h].value[1]) : (i = m[h], j = b), i instanceof d.Color && ((0 === h || h + 1 === m.length) && j === b || j instanceof d.Dimension) || e(), k = j ? j.toCSS(q) : 0 === h ? "0%" : "100%", l = i.alpha, g += '<stop offset="' + k + '" stop-color="' + i.toRGB() + '"' + (1 > l ? ' stop-opacity="' + l + '"' : "") + "/>";
                    if (g += "</" + n + "Gradient><rect " + o + ' fill="url(#gradient)" /></svg>', p) try {
                        g = c("./encoder").encodeBase64(g)
                    } catch (s) {
                        p = !1
                    }
                    return g = "'data:image/svg+xml" + (p ? ";base64" : "") + "," + g + "'", new d.URL(new d.Anonymous(g))
                }
            }, d._mime = {
                _types: {
                    ".htm": "text/html",
                    ".html": "text/html",
                    ".gif": "image/gif",
                    ".jpg": "image/jpeg",
                    ".jpeg": "image/jpeg",
                    ".png": "image/png"
                },
                lookup: function(a) {
                    var e = c("path").extname(a),
                        f = d._mime._types[e];
                    if (f === b) throw new Error('Optional dependency "mime" is required for ' + e);
                    return f
                },
                charsets: {
                    lookup: function(a) {
                        return a && /^text\//.test(a) ? "UTF-8" : ""
                    }
                }
            };
            var l = {
                    ceil: null,
                    floor: null,
                    sqrt: null,
                    abs: null,
                    tan: "",
                    sin: "",
                    cos: "",
                    atan: "rad",
                    asin: "rad",
                    acos: "rad"
                },
                m = {
                    multiply: function(a, b) {
                        return a * b
                    },
                    screen: function(a, b) {
                        return a + b - a * b
                    },
                    overlay: function(a, b) {
                        return a *= 2, 1 >= a ? m.multiply(a, b) : m.screen(a - 1, b)
                    },
                    softlight: function(a, b) {
                        var c = 1,
                            d = a;
                        return b > .5 && (d = 1, c = a > .25 ? Math.sqrt(a) : ((16 * a - 12) * a + 4) * a), a - (1 - 2 * b) * d * (c - a)
                    },
                    hardlight: function(a, b) {
                        return m.overlay(b, a)
                    },
                    difference: function(a, b) {
                        return Math.abs(a - b)
                    },
                    exclusion: function(a, b) {
                        return a + b - 2 * a * b
                    },
                    average: function(a, b) {
                        return (a + b) / 2
                    },
                    negation: function(a, b) {
                        return 1 - Math.abs(a + b - 1)
                    }
                };
            d.defaultFunc = {
                eval: function() {
                    var a = this.value_,
                        b = this.error_;
                    if (b) throw b;
                    return null != a ? a ? d.True : d.False : void 0
                },
                value: function(a) {
                    this.value_ = a
                },
                error: function(a) {
                    this.error_ = a
                },
                reset: function() {
                    this.value_ = this.error_ = null
                }
            }, g(), d.fround = function(a, b) {
                var c;
                return a && null != a.numPrecision ? (c = Math.pow(10, a.numPrecision), Math.round(b * c) / c) : b
            }, d.functionCall = function(a, b) {
                this.env = a, this.currentFileInfo = b
            }, d.functionCall.prototype = d.functions
        }(c("./tree")), function(a) {
            a.colors = {
                aliceblue: "#f0f8ff",
                antiquewhite: "#faebd7",
                aqua: "#00ffff",
                aquamarine: "#7fffd4",
                azure: "#f0ffff",
                beige: "#f5f5dc",
                bisque: "#ffe4c4",
                black: "#000000",
                blanchedalmond: "#ffebcd",
                blue: "#0000ff",
                blueviolet: "#8a2be2",
                brown: "#a52a2a",
                burlywood: "#deb887",
                cadetblue: "#5f9ea0",
                chartreuse: "#7fff00",
                chocolate: "#d2691e",
                coral: "#ff7f50",
                cornflowerblue: "#6495ed",
                cornsilk: "#fff8dc",
                crimson: "#dc143c",
                cyan: "#00ffff",
                darkblue: "#00008b",
                darkcyan: "#008b8b",
                darkgoldenrod: "#b8860b",
                darkgray: "#a9a9a9",
                darkgrey: "#a9a9a9",
                darkgreen: "#006400",
                darkkhaki: "#bdb76b",
                darkmagenta: "#8b008b",
                darkolivegreen: "#556b2f",
                darkorange: "#ff8c00",
                darkorchid: "#9932cc",
                darkred: "#8b0000",
                darksalmon: "#e9967a",
                darkseagreen: "#8fbc8f",
                darkslateblue: "#483d8b",
                darkslategray: "#2f4f4f",
                darkslategrey: "#2f4f4f",
                darkturquoise: "#00ced1",
                darkviolet: "#9400d3",
                deeppink: "#ff1493",
                deepskyblue: "#00bfff",
                dimgray: "#696969",
                dimgrey: "#696969",
                dodgerblue: "#1e90ff",
                firebrick: "#b22222",
                floralwhite: "#fffaf0",
                forestgreen: "#228b22",
                fuchsia: "#ff00ff",
                gainsboro: "#dcdcdc",
                ghostwhite: "#f8f8ff",
                gold: "#ffd700",
                goldenrod: "#daa520",
                gray: "#808080",
                grey: "#808080",
                green: "#008000",
                greenyellow: "#adff2f",
                honeydew: "#f0fff0",
                hotpink: "#ff69b4",
                indianred: "#cd5c5c",
                indigo: "#4b0082",
                ivory: "#fffff0",
                khaki: "#f0e68c",
                lavender: "#e6e6fa",
                lavenderblush: "#fff0f5",
                lawngreen: "#7cfc00",
                lemonchiffon: "#fffacd",
                lightblue: "#add8e6",
                lightcoral: "#f08080",
                lightcyan: "#e0ffff",
                lightgoldenrodyellow: "#fafad2",
                lightgray: "#d3d3d3",
                lightgrey: "#d3d3d3",
                lightgreen: "#90ee90",
                lightpink: "#ffb6c1",
                lightsalmon: "#ffa07a",
                lightseagreen: "#20b2aa",
                lightskyblue: "#87cefa",
                lightslategray: "#778899",
                lightslategrey: "#778899",
                lightsteelblue: "#b0c4de",
                lightyellow: "#ffffe0",
                lime: "#00ff00",
                limegreen: "#32cd32",
                linen: "#faf0e6",
                magenta: "#ff00ff",
                maroon: "#800000",
                mediumaquamarine: "#66cdaa",
                mediumblue: "#0000cd",
                mediumorchid: "#ba55d3",
                mediumpurple: "#9370d8",
                mediumseagreen: "#3cb371",
                mediumslateblue: "#7b68ee",
                mediumspringgreen: "#00fa9a",
                mediumturquoise: "#48d1cc",
                mediumvioletred: "#c71585",
                midnightblue: "#191970",
                mintcream: "#f5fffa",
                mistyrose: "#ffe4e1",
                moccasin: "#ffe4b5",
                navajowhite: "#ffdead",
                navy: "#000080",
                oldlace: "#fdf5e6",
                olive: "#808000",
                olivedrab: "#6b8e23",
                orange: "#ffa500",
                orangered: "#ff4500",
                orchid: "#da70d6",
                palegoldenrod: "#eee8aa",
                palegreen: "#98fb98",
                paleturquoise: "#afeeee",
                palevioletred: "#d87093",
                papayawhip: "#ffefd5",
                peachpuff: "#ffdab9",
                peru: "#cd853f",
                pink: "#ffc0cb",
                plum: "#dda0dd",
                powderblue: "#b0e0e6",
                purple: "#800080",
                red: "#ff0000",
                rosybrown: "#bc8f8f",
                royalblue: "#4169e1",
                saddlebrown: "#8b4513",
                salmon: "#fa8072",
                sandybrown: "#f4a460",
                seagreen: "#2e8b57",
                seashell: "#fff5ee",
                sienna: "#a0522d",
                silver: "#c0c0c0",
                skyblue: "#87ceeb",
                slateblue: "#6a5acd",
                slategray: "#708090",
                slategrey: "#708090",
                snow: "#fffafa",
                springgreen: "#00ff7f",
                steelblue: "#4682b4",
                tan: "#d2b48c",
                teal: "#008080",
                thistle: "#d8bfd8",
                tomato: "#ff6347",
                turquoise: "#40e0d0",
                violet: "#ee82ee",
                wheat: "#f5deb3",
                white: "#ffffff",
                whitesmoke: "#f5f5f5",
                yellow: "#ffff00",
                yellowgreen: "#9acd32"
            }
        }(c("./tree")), function(a) {
            a.debugInfo = function(b, c, d) {
                var e = "";
                if (b.dumpLineNumbers && !b.compress) switch (b.dumpLineNumbers) {
                    case "comments":
                        e = a.debugInfo.asComment(c);
                        break;
                    case "mediaquery":
                        e = a.debugInfo.asMediaQuery(c);
                        break;
                    case "all":
                        e = a.debugInfo.asComment(c) + (d || "") + a.debugInfo.asMediaQuery(c)
                }
                return e
            }, a.debugInfo.asComment = function(a) {
                return "/* line " + a.debugInfo.lineNumber + ", " + a.debugInfo.fileName + " */\n"
            }, a.debugInfo.asMediaQuery = function(a) {
                return "@media -sass-debug-info{filename{font-family:" + ("file://" + a.debugInfo.fileName).replace(/([.:\/\\])/g, function(a) {
                        return "\\" == a && (a = "/"), "\\" + a
                    }) + "}line{font-family:\\00003" + a.debugInfo.lineNumber + "}}\n"
            }, a.find = function(a, b) {
                for (var c, d = 0; d < a.length; d++) if (c = b.call(a, a[d])) return c;
                return null
            }, a.jsify = function(a) {
                return Array.isArray(a.value) && a.value.length > 1 ? "[" + a.value.map(function(a) {
                    return a.toCSS(!1)
                }).join(", ") + "]" : a.toCSS(!1)
            }, a.toCSS = function(a) {
                var b = [];
                return this.genCSS(a, {
                    add: function(a) {
                        b.push(a)
                    },
                    isEmpty: function() {
                        return 0 === b.length
                    }
                }), b.join("")
            }, a.outputRuleset = function(a, b, c) {
                var d, e = c.length;
                if (a.tabLevel = (0 | a.tabLevel) + 1, a.compress) {
                    for (b.add("{"), d = 0; e > d; d++) c[d].genCSS(a, b);
                    return b.add("}"), void a.tabLevel--
                }
                var f = "\n" + Array(a.tabLevel).join("  "),
                    g = f + "  ";
                if (e) {
                    for (b.add(" {" + g), c[0].genCSS(a, b), d = 1; e > d; d++) b.add(g), c[d].genCSS(a, b);
                    b.add(f + "}")
                } else b.add(" {" + f + "}");
                a.tabLevel--
            }
        }(c("./tree")), function(a) {
            a.Alpha = function(a) {
                this.value = a
            }, a.Alpha.prototype = {
                type: "Alpha",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                eval: function(b) {
                    return this.value.eval ? new a.Alpha(this.value.eval(b)) : this
                },
                genCSS: function(a, b) {
                    b.add("alpha(opacity="), this.value.genCSS ? this.value.genCSS(a, b) : b.add(this.value), b.add(")")
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            a.Anonymous = function(a, b, c, d) {
                this.value = a.value || a, this.index = b, this.mapLines = d, this.currentFileInfo = c
            }, a.Anonymous.prototype = {
                type: "Anonymous",
                eval: function() {
                    return new a.Anonymous(this.value, this.index, this.currentFileInfo, this.mapLines)
                },
                compare: function(a) {
                    if (!a.toCSS) return -1;
                    var b = this.toCSS(),
                        c = a.toCSS();
                    return b === c ? 0 : c > b ? -1 : 1
                },
                genCSS: function(a, b) {
                    b.add(this.value, this.currentFileInfo, this.index, this.mapLines)
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            a.Assignment = function(a, b) {
                this.key = a, this.value = b
            }, a.Assignment.prototype = {
                type: "Assignment",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                eval: function(b) {
                    return this.value.eval ? new a.Assignment(this.key, this.value.eval(b)) : this
                },
                genCSS: function(a, b) {
                    b.add(this.key + "="), this.value.genCSS ? this.value.genCSS(a, b) : b.add(this.value)
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            a.Call = function(a, b, c, d) {
                this.name = a, this.args = b, this.index = c, this.currentFileInfo = d
            }, a.Call.prototype = {
                type: "Call",
                accept: function(a) {
                    this.args && (this.args = a.visitArray(this.args))
                },
                eval: function(b) {
                    var c, d, e = this.args.map(function(a) {
                            return a.eval(b)
                        }),
                        f = this.name.toLowerCase();
                    if (f in a.functions) try {
                        if (d = new a.functionCall(b, this.currentFileInfo), c = d[f].apply(d, e), null != c) return c
                    } catch (g) {
                        throw {
                            type: g.type || "Runtime",
                            message: "error evaluating function `" + this.name + "`" + (g.message ? ": " + g.message : ""),
                            index: this.index,
                            filename: this.currentFileInfo.filename
                        }
                    }
                    return new a.Call(this.name, e, this.index, this.currentFileInfo)
                },
                genCSS: function(a, b) {
                    b.add(this.name + "(", this.currentFileInfo, this.index);
                    for (var c = 0; c < this.args.length; c++) this.args[c].genCSS(a, b), c + 1 < this.args.length && b.add(", ");
                    b.add(")")
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            function b(a) {
                return "#" + a.map(function(a) {
                        return a = c(Math.round(a), 255), (16 > a ? "0" : "") + a.toString(16)
                    }).join("")
            }
            function c(a, b) {
                return Math.min(Math.max(a, 0), b)
            }
            a.Color = function(a, b) {
                this.rgb = Array.isArray(a) ? a : 6 == a.length ? a.match(/.{2}/g).map(function(a) {
                    return parseInt(a, 16)
                }) : a.split("").map(function(a) {
                    return parseInt(a + a, 16)
                }), this.alpha = "number" == typeof b ? b : 1
            };
            var d = "transparent";
            a.Color.prototype = {
                type: "Color",
                eval: function() {
                    return this
                },
                luma: function() {
                    var a = this.rgb[0] / 255,
                        b = this.rgb[1] / 255,
                        c = this.rgb[2] / 255;
                    return a = .03928 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4), b = .03928 >= b ? b / 12.92 : Math.pow((b + .055) / 1.055, 2.4), c = .03928 >= c ? c / 12.92 : Math.pow((c + .055) / 1.055, 2.4), .2126 * a + .7152 * b + .0722 * c
                },
                genCSS: function(a, b) {
                    b.add(this.toCSS(a))
                },
                toCSS: function(b, e) {
                    var f = b && b.compress && !e,
                        g = a.fround(b, this.alpha);
                    if (1 > g) return 0 === g && this.isTransparentKeyword ? d : "rgba(" + this.rgb.map(function(a) {
                        return c(Math.round(a), 255)
                    }).concat(c(g, 1)).join("," + (f ? "" : " ")) + ")";
                    var h = this.toRGB();
                    if (f) {
                        var i = h.split("");
                        i[1] === i[2] && i[3] === i[4] && i[5] === i[6] && (h = "#" + i[1] + i[3] + i[5])
                    }
                    return h
                },
                operate: function(b, c, d) {
                    for (var e = [], f = this.alpha * (1 - d.alpha) + d.alpha, g = 0; 3 > g; g++) e[g] = a.operate(b, c, this.rgb[g], d.rgb[g]);
                    return new a.Color(e, f)
                },
                toRGB: function() {
                    return b(this.rgb)
                },
                toHSL: function() {
                    var a, b, c = this.rgb[0] / 255,
                        d = this.rgb[1] / 255,
                        e = this.rgb[2] / 255,
                        f = this.alpha,
                        g = Math.max(c, d, e),
                        h = Math.min(c, d, e),
                        i = (g + h) / 2,
                        j = g - h;
                    if (g === h) a = b = 0;
                    else {
                        switch (b = i > .5 ? j / (2 - g - h) : j / (g + h), g) {
                            case c:
                                a = (d - e) / j + (e > d ? 6 : 0);
                                break;
                            case d:
                                a = (e - c) / j + 2;
                                break;
                            case e:
                                a = (c - d) / j + 4
                        }
                        a /= 6
                    }
                    return {
                        h: 360 * a,
                        s: b,
                        l: i,
                        a: f
                    }
                },
                toHSV: function() {
                    var a, b, c = this.rgb[0] / 255,
                        d = this.rgb[1] / 255,
                        e = this.rgb[2] / 255,
                        f = this.alpha,
                        g = Math.max(c, d, e),
                        h = Math.min(c, d, e),
                        i = g,
                        j = g - h;
                    if (b = 0 === g ? 0 : j / g, g === h) a = 0;
                    else {
                        switch (g) {
                            case c:
                                a = (d - e) / j + (e > d ? 6 : 0);
                                break;
                            case d:
                                a = (e - c) / j + 2;
                                break;
                            case e:
                                a = (c - d) / j + 4
                        }
                        a /= 6
                    }
                    return {
                        h: 360 * a,
                        s: b,
                        v: i,
                        a: f
                    }
                },
                toARGB: function() {
                    return b([255 * this.alpha].concat(this.rgb))
                },
                compare: function(a) {
                    return a.rgb ? a.rgb[0] === this.rgb[0] && a.rgb[1] === this.rgb[1] && a.rgb[2] === this.rgb[2] && a.alpha === this.alpha ? 0 : -1 : -1
                }
            }, a.Color.fromKeyword = function(b) {
                if (b = b.toLowerCase(), a.colors.hasOwnProperty(b)) return new a.Color(a.colors[b].slice(1));
                if (b === d) {
                    var c = new a.Color([0, 0, 0], 0);
                    return c.isTransparentKeyword = !0, c
                }
            }
        }(c("../tree")), function(a) {
            a.Comment = function(a, b, c, d) {
                this.value = a, this.silent = !! b, this.currentFileInfo = d
            }, a.Comment.prototype = {
                type: "Comment",
                genCSS: function(b, c) {
                    this.debugInfo && c.add(a.debugInfo(b, this), this.currentFileInfo, this.index), c.add(this.value.trim())
                },
                toCSS: a.toCSS,
                isSilent: function(a) {
                    var b = this.currentFileInfo && this.currentFileInfo.reference && !this.isReferenced,
                        c = a.compress && !this.value.match(/^\/\*!/);
                    return this.silent || b || c
                },
                eval: function() {
                    return this
                },
                markReferenced: function() {
                    this.isReferenced = !0
                }
            }
        }(c("../tree")), function(a) {
            a.Condition = function(a, b, c, d, e) {
                this.op = a.trim(), this.lvalue = b, this.rvalue = c, this.index = d, this.negate = e
            }, a.Condition.prototype = {
                type: "Condition",
                accept: function(a) {
                    this.lvalue = a.visit(this.lvalue), this.rvalue = a.visit(this.rvalue)
                },
                eval: function(a) {
                    var b, c = this.lvalue.eval(a),
                        d = this.rvalue.eval(a),
                        e = this.index;
                    return b = function(a) {
                        switch (a) {
                            case "and":
                                return c && d;
                            case "or":
                                return c || d;
                            default:
                                if (c.compare) b = c.compare(d);
                                else {
                                    if (!d.compare) throw {
                                        type: "Type",
                                        message: "Unable to perform comparison",
                                        index: e
                                    };
                                    b = d.compare(c)
                                }
                                switch (b) {
                                    case -1:
                                        return "<" === a || "=<" === a || "<=" === a;
                                    case 0:
                                        return "=" === a || ">=" === a || "=<" === a || "<=" === a;
                                    case 1:
                                        return ">" === a || ">=" === a
                                }
                        }
                    }(this.op), this.negate ? !b : b
                }
            }
        }(c("../tree")), function(a) {
            a.DetachedRuleset = function(a, b) {
                this.ruleset = a, this.frames = b
            }, a.DetachedRuleset.prototype = {
                type: "DetachedRuleset",
                accept: function(a) {
                    this.ruleset = a.visit(this.ruleset)
                },
                eval: function(b) {
                    var c = this.frames || b.frames.slice(0);
                    return new a.DetachedRuleset(this.ruleset, c)
                },
                callEval: function(b) {
                    return this.ruleset.eval(this.frames ? new a.evalEnv(b, this.frames.concat(b.frames)) : b)
                }
            }
        }(c("../tree")), function(a) {
            a.Dimension = function(c, d) {
                this.value = parseFloat(c), this.unit = d && d instanceof a.Unit ? d : new a.Unit(d ? [d] : b)
            }, a.Dimension.prototype = {
                type: "Dimension",
                accept: function(a) {
                    this.unit = a.visit(this.unit)
                },
                eval: function() {
                    return this
                },
                toColor: function() {
                    return new a.Color([this.value, this.value, this.value])
                },
                genCSS: function(b, c) {
                    if (b && b.strictUnits && !this.unit.isSingular()) throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: " + this.unit.toString());
                    var d = a.fround(b, this.value),
                        e = String(d);
                    if (0 !== d && 1e-6 > d && d > -1e-6 && (e = d.toFixed(20).replace(/0+$/, "")), b && b.compress) {
                        if (0 === d && this.unit.isLength()) return void c.add(e);
                        d > 0 && 1 > d && (e = e.substr(1))
                    }
                    c.add(e), this.unit.genCSS(b, c)
                },
                toCSS: a.toCSS,
                operate: function(b, c, d) {
                    var e = a.operate(b, c, this.value, d.value),
                        f = this.unit.clone();
                    if ("+" === c || "-" === c) if (0 === f.numerator.length && 0 === f.denominator.length) f.numerator = d.unit.numerator.slice(0), f.denominator = d.unit.denominator.slice(0);
                    else if (0 === d.unit.numerator.length && 0 === f.denominator.length);
                    else {
                        if (d = d.convertTo(this.unit.usedUnits()), b.strictUnits && d.unit.toString() !== f.toString()) throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '" + f.toString() + "' and '" + d.unit.toString() + "'.");
                        e = a.operate(b, c, this.value, d.value)
                    } else "*" === c ? (f.numerator = f.numerator.concat(d.unit.numerator).sort(), f.denominator = f.denominator.concat(d.unit.denominator).sort(), f.cancel()) : "/" === c && (f.numerator = f.numerator.concat(d.unit.denominator).sort(), f.denominator = f.denominator.concat(d.unit.numerator).sort(), f.cancel());
                    return new a.Dimension(e, f)
                },
                compare: function(b) {
                    if (b instanceof a.Dimension) {
                        var c, d, e, f;
                        if (this.unit.isEmpty() || b.unit.isEmpty()) c = this, d = b;
                        else if (c = this.unify(), d = b.unify(), 0 !== c.unit.compare(d.unit)) return -1;
                        return e = c.value, f = d.value, f > e ? -1 : e > f ? 1 : 0
                    }
                    return -1
                },
                unify: function() {
                    return this.convertTo({
                        length: "px",
                        duration: "s",
                        angle: "rad"
                    })
                },
                convertTo: function(b) {
                    var c, d, e, f, g, h = this.value,
                        i = this.unit.clone(),
                        j = {};
                    if ("string" == typeof b) {
                        for (c in a.UnitConversions) a.UnitConversions[c].hasOwnProperty(b) && (j = {}, j[c] = b);
                        b = j
                    }
                    g = function(a, b) {
                        return e.hasOwnProperty(a) ? (b ? h /= e[a] / e[f] : h *= e[a] / e[f], f) : a
                    };
                    for (d in b) b.hasOwnProperty(d) && (f = b[d], e = a.UnitConversions[d], i.map(g));
                    return i.cancel(), new a.Dimension(h, i)
                }
            }, a.UnitConversions = {
                length: {
                    m: 1,
                    cm: .01,
                    mm: .001,
                    "in": .0254,
                    px: .0254 / 96,
                    pt: .0254 / 72,
                    pc: .0254 / 72 * 12
                },
                duration: {
                    s: 1,
                    ms: .001
                },
                angle: {
                    rad: 1 / (2 * Math.PI),
                    deg: 1 / 360,
                    grad: .0025,
                    turn: 1
                }
            }, a.Unit = function(a, b, c) {
                this.numerator = a ? a.slice(0).sort() : [], this.denominator = b ? b.slice(0).sort() : [], this.backupUnit = c
            }, a.Unit.prototype = {
                type: "Unit",
                clone: function() {
                    return new a.Unit(this.numerator.slice(0), this.denominator.slice(0), this.backupUnit)
                },
                genCSS: function(a, b) {
                    this.numerator.length >= 1 ? b.add(this.numerator[0]) : this.denominator.length >= 1 ? b.add(this.denominator[0]) : a && a.strictUnits || !this.backupUnit || b.add(this.backupUnit)
                },
                toCSS: a.toCSS,
                toString: function() {
                    var a, b = this.numerator.join("*");
                    for (a = 0; a < this.denominator.length; a++) b += "/" + this.denominator[a];
                    return b
                },
                compare: function(a) {
                    return this.is(a.toString()) ? 0 : -1
                },
                is: function(a) {
                    return this.toString() === a
                },
                isLength: function() {
                    return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))
                },
                isEmpty: function() {
                    return 0 === this.numerator.length && 0 === this.denominator.length
                },
                isSingular: function() {
                    return this.numerator.length <= 1 && 0 === this.denominator.length
                },
                map: function(a) {
                    var b;
                    for (b = 0; b < this.numerator.length; b++) this.numerator[b] = a(this.numerator[b], !1);
                    for (b = 0; b < this.denominator.length; b++) this.denominator[b] = a(this.denominator[b], !0)
                },
                usedUnits: function() {
                    var b, c, d = {};
                    c = function(a) {
                        return b.hasOwnProperty(a) && !d[e] && (d[e] = a), a
                    };
                    for (var e in a.UnitConversions) a.UnitConversions.hasOwnProperty(e) && (b = a.UnitConversions[e], this.map(c));
                    return d
                },
                cancel: function() {
                    var a, b, c, d = {};
                    for (b = 0; b < this.numerator.length; b++) a = this.numerator[b], c || (c = a), d[a] = (d[a] || 0) + 1;
                    for (b = 0; b < this.denominator.length; b++) a = this.denominator[b], c || (c = a), d[a] = (d[a] || 0) - 1;
                    this.numerator = [], this.denominator = [];
                    for (a in d) if (d.hasOwnProperty(a)) {
                        var e = d[a];
                        if (e > 0) for (b = 0; e > b; b++) this.numerator.push(a);
                        else if (0 > e) for (b = 0; - e > b; b++) this.denominator.push(a)
                    }
                    0 === this.numerator.length && 0 === this.denominator.length && c && (this.backupUnit = c), this.numerator.sort(), this.denominator.sort()
                }
            }
        }(c("../tree")), function(a) {
            a.Directive = function(a, b, c, d, e, f) {
                this.name = a, this.value = b, c && (this.rules = c, this.rules.allowImports = !0), this.index = d, this.currentFileInfo = e, this.debugInfo = f
            }, a.Directive.prototype = {
                type: "Directive",
                accept: function(a) {
                    var b = this.value,
                        c = this.rules;
                    c && (c = a.visit(c)), b && (b = a.visit(b))
                },
                genCSS: function(b, c) {
                    var d = this.value,
                        e = this.rules;
                    c.add(this.name, this.currentFileInfo, this.index), d && (c.add(" "), d.genCSS(b, c)), e ? a.outputRuleset(b, c, [e]) : c.add(";")
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    var c = this.value,
                        d = this.rules;
                    return c && (c = c.eval(b)), d && (d = d.eval(b), d.root = !0), new a.Directive(this.name, c, d, this.index, this.currentFileInfo, this.debugInfo)
                },
                variable: function(b) {
                    return this.rules ? a.Ruleset.prototype.variable.call(this.rules, b) : void 0
                },
                find: function() {
                    return this.rules ? a.Ruleset.prototype.find.apply(this.rules, arguments) : void 0
                },
                rulesets: function() {
                    return this.rules ? a.Ruleset.prototype.rulesets.apply(this.rules) : void 0
                },
                markReferenced: function() {
                    var a, b;
                    if (this.isReferenced = !0, this.rules) for (b = this.rules.rules, a = 0; a < b.length; a++) b[a].markReferenced && b[a].markReferenced()
                }
            }
        }(c("../tree")), function(a) {
            a.Element = function(b, c, d, e) {
                this.combinator = b instanceof a.Combinator ? b : new a.Combinator(b), this.value = "string" == typeof c ? c.trim() : c ? c : "", this.index = d, this.currentFileInfo = e
            }, a.Element.prototype = {
                type: "Element",
                accept: function(a) {
                    var b = this.value;
                    this.combinator = a.visit(this.combinator), "object" == typeof b && (this.value = a.visit(b))
                },
                eval: function(b) {
                    return new a.Element(this.combinator, this.value.eval ? this.value.eval(b) : this.value, this.index, this.currentFileInfo)
                },
                genCSS: function(a, b) {
                    b.add(this.toCSS(a), this.currentFileInfo, this.index)
                },
                toCSS: function(a) {
                    var b = this.value.toCSS ? this.value.toCSS(a) : this.value;
                    return "" === b && "&" === this.combinator.value.charAt(0) ? "" : this.combinator.toCSS(a || {}) + b
                }
            }, a.Attribute = function(a, b, c) {
                this.key = a, this.op = b, this.value = c
            }, a.Attribute.prototype = {
                type: "Attribute",
                eval: function(b) {
                    return new a.Attribute(this.key.eval ? this.key.eval(b) : this.key, this.op, this.value && this.value.eval ? this.value.eval(b) : this.value)
                },
                genCSS: function(a, b) {
                    b.add(this.toCSS(a))
                },
                toCSS: function(a) {
                    var b = this.key.toCSS ? this.key.toCSS(a) : this.key;
                    return this.op && (b += this.op, b += this.value.toCSS ? this.value.toCSS(a) : this.value), "[" + b + "]"
                }
            }, a.Combinator = function(a) {
                this.value = " " === a ? " " : a ? a.trim() : ""
            }, a.Combinator.prototype = {
                type: "Combinator",
                _outputMap: {
                    "": "",
                    " ": " ",
                    ":": " :",
                    "+": " + ",
                    "~": " ~ ",
                    ">": " > ",
                    "|": "|",
                    "^": " ^ ",
                    "^^": " ^^ "
                },
                _outputMapCompressed: {
                    "": "",
                    " ": " ",
                    ":": " :",
                    "+": "+",
                    "~": "~",
                    ">": ">",
                    "|": "|",
                    "^": "^",
                    "^^": "^^"
                },
                genCSS: function(a, b) {
                    b.add((a.compress ? this._outputMapCompressed : this._outputMap)[this.value])
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            a.Expression = function(a) {
                this.value = a
            }, a.Expression.prototype = {
                type: "Expression",
                accept: function(a) {
                    this.value && (this.value = a.visitArray(this.value))
                },
                eval: function(b) {
                    var c, d = this.parens && !this.parensInOp,
                        e = !1;
                    return d && b.inParenthesis(), this.value.length > 1 ? c = new a.Expression(this.value.map(function(a) {
                        return a.eval(b)
                    })) : 1 === this.value.length ? (this.value[0].parens && !this.value[0].parensInOp && (e = !0), c = this.value[0].eval(b)) : c = this, d && b.outOfParenthesis(), this.parens && this.parensInOp && !b.isMathOn() && !e && (c = new a.Paren(c)), c
                },
                genCSS: function(a, b) {
                    for (var c = 0; c < this.value.length; c++) this.value[c].genCSS(a, b), c + 1 < this.value.length && b.add(" ")
                },
                toCSS: a.toCSS,
                throwAwayComments: function() {
                    this.value = this.value.filter(function(b) {
                        return !(b instanceof a.Comment)
                    })
                }
            }
        }(c("../tree")), function(a) {
            a.Extend = function(b, c, d) {
                switch (this.selector = b, this.option = c, this.index = d, this.object_id = a.Extend.next_id++, this.parent_ids = [this.object_id], c) {
                    case "all":
                        this.allowBefore = !0, this.allowAfter = !0;
                        break;
                    default:
                        this.allowBefore = !1, this.allowAfter = !1
                }
            }, a.Extend.next_id = 0, a.Extend.prototype = {
                type: "Extend",
                accept: function(a) {
                    this.selector = a.visit(this.selector)
                },
                eval: function(b) {
                    return new a.Extend(this.selector.eval(b), this.option, this.index)
                },
                clone: function() {
                    return new a.Extend(this.selector, this.option, this.index)
                },
                findSelfSelectors: function(a) {
                    var b, c, d = [];
                    for (b = 0; b < a.length; b++) c = a[b].elements, b > 0 && c.length && "" === c[0].combinator.value && (c[0].combinator.value = " "), d = d.concat(a[b].elements);
                    this.selfSelectors = [{
                        elements: d
                    }]
                }
            }
        }(c("../tree")), function(a) {
            a.Import = function(a, c, d, e, f) {
                if (this.options = d, this.index = e, this.path = a, this.features = c, this.currentFileInfo = f, this.options.less !== b || this.options.inline) this.css = !this.options.less || this.options.inline;
                else {
                    var g = this.getPath();
                    g && /css([\?;].*)?$/.test(g) && (this.css = !0)
                }
            }, a.Import.prototype = {
                type: "Import",
                accept: function(a) {
                    this.features && (this.features = a.visit(this.features)), this.path = a.visit(this.path), !this.options.inline && this.root && (this.root = a.visit(this.root))
                },
                genCSS: function(a, b) {
                    this.css && (b.add("@import ", this.currentFileInfo, this.index), this.path.genCSS(a, b), this.features && (b.add(" "), this.features.genCSS(a, b)), b.add(";"))
                },
                toCSS: a.toCSS,
                getPath: function() {
                    if (this.path instanceof a.Quoted) {
                        var c = this.path.value;
                        return this.css !== b || /(\.[a-z]*$)|([\?;].*)$/.test(c) ? c : c + ".less"
                    }
                    return this.path instanceof a.URL ? this.path.value.value : null
                },
                evalForImport: function(b) {
                    return new a.Import(this.path.eval(b), this.features, this.options, this.index, this.currentFileInfo)
                },
                evalPath: function(b) {
                    var c = this.path.eval(b),
                        d = this.currentFileInfo && this.currentFileInfo.rootpath;
                    if (!(c instanceof a.URL)) {
                        if (d) {
                            var e = c.value;
                            e && b.isPathRelative(e) && (c.value = d + e)
                        }
                        c.value = b.normalizePath(c.value)
                    }
                    return c
                },
                eval: function(b) {
                    var c, d = this.features && this.features.eval(b);
                    if (this.skip && ("function" == typeof this.skip && (this.skip = this.skip()), this.skip)) return [];
                    if (this.options.inline) {
                        var e = new a.Anonymous(this.root, 0, {
                            filename: this.importedFilename
                        }, !0);
                        return this.features ? new a.Media([e], this.features.value) : [e]
                    }
                    if (this.css) {
                        var f = new a.Import(this.evalPath(b), d, this.options, this.index);
                        if (!f.css && this.error) throw this.error;
                        return f
                    }
                    return c = new a.Ruleset(null, this.root.rules.slice(0)), c.evalImports(b), this.features ? new a.Media(c.rules, this.features.value) : c.rules
                }
            }
        }(c("../tree")), function(a) {
            a.JavaScript = function(a, b, c) {
                this.escaped = c, this.expression = a, this.index = b
            }, a.JavaScript.prototype = {
                type: "JavaScript",
                eval: function(b) {
                    var c, d = this,
                        e = {},
                        f = this.expression.replace(/@\{([\w-]+)\}/g, function(c, e) {
                            return a.jsify(new a.Variable("@" + e, d.index).eval(b))
                        });
                    try {
                        f = new Function("return (" + f + ")")
                    } catch (g) {
                        throw {
                            message: "JavaScript evaluation error: " + g.message + " from `" + f + "`",
                            index: this.index
                        }
                    }
                    var h = b.frames[0].variables();
                    for (var i in h) h.hasOwnProperty(i) && (e[i.slice(1)] = {
                        value: h[i].value,
                        toJS: function() {
                            return this.value.eval(b).toCSS()
                        }
                    });
                    try {
                        c = f.call(e)
                    } catch (g) {
                        throw {
                            message: "JavaScript evaluation error: '" + g.name + ": " + g.message.replace(/["]/g, "'") + "'",
                            index: this.index
                        }
                    }
                    return "number" == typeof c ? new a.Dimension(c) : "string" == typeof c ? new a.Quoted('"' + c + '"', c, this.escaped, this.index) : new a.Anonymous(Array.isArray(c) ? c.join(", ") : c)
                }
            }
        }(c("../tree")), function(a) {
            a.Keyword = function(a) {
                this.value = a
            }, a.Keyword.prototype = {
                type: "Keyword",
                eval: function() {
                    return this
                },
                genCSS: function(a, b) {
                    if ("%" === this.value) throw {
                        type: "Syntax",
                        message: "Invalid % without number"
                    };
                    b.add(this.value)
                },
                toCSS: a.toCSS,
                compare: function(b) {
                    return b instanceof a.Keyword ? b.value === this.value ? 0 : 1 : -1
                }
            }, a.True = new a.Keyword("true"), a.False = new a.Keyword("false")
        }(c("../tree")), function(a) {
            a.Media = function(b, c, d, e) {
                this.index = d, this.currentFileInfo = e;
                var f = this.emptySelectors();
                this.features = new a.Value(c), this.rules = [new a.Ruleset(f, b)], this.rules[0].allowImports = !0
            }, a.Media.prototype = {
                type: "Media",
                accept: function(a) {
                    this.features && (this.features = a.visit(this.features)), this.rules && (this.rules = a.visitArray(this.rules))
                },
                genCSS: function(b, c) {
                    c.add("@media ", this.currentFileInfo, this.index), this.features.genCSS(b, c), a.outputRuleset(b, c, this.rules)
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    b.mediaBlocks || (b.mediaBlocks = [], b.mediaPath = []);
                    var c = new a.Media(null, [], this.index, this.currentFileInfo);
                    this.debugInfo && (this.rules[0].debugInfo = this.debugInfo, c.debugInfo = this.debugInfo);
                    var d = !1;
                    b.strictMath || (d = !0, b.strictMath = !0);
                    try {
                        c.features = this.features.eval(b)
                    } finally {
                        d && (b.strictMath = !1)
                    }
                    return b.mediaPath.push(c), b.mediaBlocks.push(c), b.frames.unshift(this.rules[0]), c.rules = [this.rules[0].eval(b)], b.frames.shift(), b.mediaPath.pop(), 0 === b.mediaPath.length ? c.evalTop(b) : c.evalNested(b)
                },
                variable: function(b) {
                    return a.Ruleset.prototype.variable.call(this.rules[0], b)
                },
                find: function() {
                    return a.Ruleset.prototype.find.apply(this.rules[0], arguments)
                },
                rulesets: function() {
                    return a.Ruleset.prototype.rulesets.apply(this.rules[0])
                },
                emptySelectors: function() {
                    var b = new a.Element("", "&", this.index, this.currentFileInfo),
                        c = [new a.Selector([b], null, null, this.index, this.currentFileInfo)];
                    return c[0].mediaEmpty = !0, c
                },
                markReferenced: function() {
                    var a, b = this.rules[0].rules;
                    for (this.rules[0].markReferenced(), this.isReferenced = !0, a = 0; a < b.length; a++) b[a].markReferenced && b[a].markReferenced()
                },
                evalTop: function(b) {
                    var c = this;
                    if (b.mediaBlocks.length > 1) {
                        var d = this.emptySelectors();
                        c = new a.Ruleset(d, b.mediaBlocks), c.multiMedia = !0
                    }
                    return delete b.mediaBlocks, delete b.mediaPath, c
                },
                evalNested: function(b) {
                    var c, d, e = b.mediaPath.concat([this]);
                    for (c = 0; c < e.length; c++) d = e[c].features instanceof a.Value ? e[c].features.value : e[c].features, e[c] = Array.isArray(d) ? d : [d];
                    return this.features = new a.Value(this.permute(e).map(function(b) {
                        for (b = b.map(function(b) {
                            return b.toCSS ? b : new a.Anonymous(b)
                        }), c = b.length - 1; c > 0; c--) b.splice(c, 0, new a.Anonymous("and"));
                        return new a.Expression(b)
                    })), new a.Ruleset([], [])
                },
                permute: function(a) {
                    if (0 === a.length) return [];
                    if (1 === a.length) return a[0];
                    for (var b = [], c = this.permute(a.slice(1)), d = 0; d < c.length; d++) for (var e = 0; e < a[0].length; e++) b.push([a[0][e]].concat(c[d]));
                    return b
                },
                bubbleSelectors: function(b) {
                    b && (this.rules = [new a.Ruleset(b.slice(0), [this.rules[0]])])
                }
            }
        }(c("../tree")), function(a) {
            a.mixin = {}, a.mixin.Call = function(b, c, d, e, f) {
                this.selector = new a.Selector(b), this.arguments = c && c.length ? c : null, this.index = d, this.currentFileInfo = e, this.important = f
            }, a.mixin.Call.prototype = {
                type: "MixinCall",
                accept: function(a) {
                    this.selector && (this.selector = a.visit(this.selector)), this.arguments && (this.arguments = a.visitArray(this.arguments))
                },
                eval: function(b) {
                    var c, d, e, f, g, h, i, j, k, l, m, n, o = [],
                        p = !1,
                        q = [],
                        r = [],
                        s = a.defaultFunc,
                        t = 0,
                        u = 1,
                        v = 2;
                    for (e = this.arguments && this.arguments.map(function(a) {
                            return {
                                name: a.name,
                                value: a.value.eval(b)
                            }
                        }), f = 0; f < b.frames.length; f++) if ((c = b.frames[f].find(this.selector)).length > 0) {
                        for (j = !0, g = 0; g < c.length; g++) {
                            for (d = c[g], i = !1, h = 0; h < b.frames.length; h++) if (!(d instanceof a.mixin.Definition) && d === (b.frames[h].originalRuleset || b.frames[h])) {
                                i = !0;
                                break
                            }
                            if (!i && d.matchArgs(e, b)) {
                                if (l = {
                                        mixin: d,
                                        group: t
                                    }, d.matchCondition) {
                                    for (h = 0; 2 > h; h++) s.value(h), r[h] = d.matchCondition(e, b);
                                    (r[0] || r[1]) && (r[0] != r[1] && (l.group = r[1] ? u : v), q.push(l))
                                } else q.push(l);
                                p = !0
                            }
                        }
                        for (s.reset(), n = [0, 0, 0], g = 0; g < q.length; g++) n[q[g].group]++;
                        if (n[t] > 0) m = v;
                        else if (m = u, n[u] + n[v] > 1) throw {
                            type: "Runtime",
                            message: "Ambiguous use of `default()` found when matching for `" + this.format(e) + "`",
                            index: this.index,
                            filename: this.currentFileInfo.filename
                        };
                        for (g = 0; g < q.length; g++) if (l = q[g].group, l === t || l === m) try {
                            d = q[g].mixin, d instanceof a.mixin.Definition || (d = new a.mixin.Definition("", [], d.rules, null, !1), d.originalRuleset = c[g].originalRuleset || c[g]), Array.prototype.push.apply(o, d.evalCall(b, e, this.important).rules)
                        } catch (w) {
                            throw {
                                message: w.message,
                                index: this.index,
                                filename: this.currentFileInfo.filename,
                                stack: w.stack
                            }
                        }
                        if (p) {
                            if (!this.currentFileInfo || !this.currentFileInfo.reference) for (f = 0; f < o.length; f++) k = o[f], k.markReferenced && k.markReferenced();
                            return o
                        }
                    }
                    throw j ? {
                        type: "Runtime",
                        message: "No matching definition was found for `" + this.format(e) + "`",
                        index: this.index,
                        filename: this.currentFileInfo.filename
                    } : {
                        type: "Name",
                        message: this.selector.toCSS().trim() + " is undefined",
                        index: this.index,
                        filename: this.currentFileInfo.filename
                    }
                },
                format: function(a) {
                    return this.selector.toCSS().trim() + "(" + (a ? a.map(function(a) {
                            var b = "";
                            return a.name && (b += a.name + ":"), b += a.value.toCSS ? a.value.toCSS() : "???"
                        }).join(", ") : "") + ")"
                }
            }, a.mixin.Definition = function(b, c, d, e, f, g) {
                this.name = b, this.selectors = [new a.Selector([new a.Element(null, b, this.index, this.currentFileInfo)])], this.params = c, this.condition = e, this.variadic = f, this.arity = c.length, this.rules = d, this._lookups = {}, this.required = c.reduce(function(a, b) {
                    return !b.name || b.name && !b.value ? a + 1 : a
                }, 0), this.parent = a.Ruleset.prototype, this.frames = g
            }, a.mixin.Definition.prototype = {
                type: "MixinDefinition",
                accept: function(a) {
                    this.params && this.params.length && (this.params = a.visitArray(this.params)), this.rules = a.visitArray(this.rules), this.condition && (this.condition = a.visit(this.condition))
                },
                variable: function(a) {
                    return this.parent.variable.call(this, a)
                },
                variables: function() {
                    return this.parent.variables.call(this)
                },
                find: function() {
                    return this.parent.find.apply(this, arguments)
                },
                rulesets: function() {
                    return this.parent.rulesets.apply(this)
                },
                evalParams: function(b, c, d, e) {
                    var f, g, h, i, j, k, l, m, n = new a.Ruleset(null, null),
                        o = this.params.slice(0),
                        p = 0;
                    if (c = new a.evalEnv(c, [n].concat(c.frames)), d) for (d = d.slice(0), p = d.length, h = 0; p > h; h++) if (g = d[h], k = g && g.name) {
                        for (l = !1, i = 0; i < o.length; i++) if (!e[i] && k === o[i].name) {
                            e[i] = g.value.eval(b), n.prependRule(new a.Rule(k, g.value.eval(b))), l = !0;
                            break
                        }
                        if (l) {
                            d.splice(h, 1), h--;
                            continue
                        }
                        throw {
                            type: "Runtime",
                            message: "Named argument for " + this.name + " " + d[h].name + " not found"
                        }
                    }
                    for (m = 0, h = 0; h < o.length; h++) if (!e[h]) {
                        if (g = d && d[m], k = o[h].name) if (o[h].variadic) {
                            for (f = [], i = m; p > i; i++) f.push(d[i].value.eval(b));
                            n.prependRule(new a.Rule(k, new a.Expression(f).eval(b)))
                        } else {
                            if (j = g && g.value) j = j.eval(b);
                            else {
                                if (!o[h].value) throw {
                                    type: "Runtime",
                                    message: "wrong number of arguments for " + this.name + " (" + p + " for " + this.arity + ")"
                                };
                                j = o[h].value.eval(c), n.resetCache()
                            }
                            n.prependRule(new a.Rule(k, j)), e[h] = j
                        }
                        if (o[h].variadic && d) for (i = m; p > i; i++) e[i] = d[i].value.eval(b);
                        m++
                    }
                    return n
                },
                eval: function(b) {
                    return new a.mixin.Definition(this.name, this.params, this.rules, this.condition, this.variadic, this.frames || b.frames.slice(0))
                },
                evalCall: function(b, c, d) {
                    var e, f, g = [],
                        h = this.frames ? this.frames.concat(b.frames) : b.frames,
                        i = this.evalParams(b, new a.evalEnv(b, h), c, g);
                    return i.prependRule(new a.Rule("@arguments", new a.Expression(g).eval(b))), e = this.rules.slice(0), f = new a.Ruleset(null, e), f.originalRuleset = this, f = f.eval(new a.evalEnv(b, [this, i].concat(h))), d && (f = this.parent.makeImportant.apply(f)), f
                },
                matchCondition: function(b, c) {
                    return this.condition && !this.condition.eval(new a.evalEnv(c, [this.evalParams(c, new a.evalEnv(c, this.frames.concat(c.frames)), b, [])].concat(this.frames).concat(c.frames))) ? !1 : !0
                },
                matchArgs: function(a, b) {
                    var c, d = a && a.length || 0;
                    if (this.variadic) {
                        if (d < this.required - 1) return !1
                    } else {
                        if (d < this.required) return !1;
                        if (d > this.params.length) return !1
                    }
                    c = Math.min(d, this.arity);
                    for (var e = 0; c > e; e++) if (!this.params[e].name && !this.params[e].variadic && a[e].value.eval(b).toCSS() != this.params[e].value.eval(b).toCSS()) return !1;
                    return !0
                }
            }
        }(c("../tree")), function(a) {
            a.Negative = function(a) {
                this.value = a
            }, a.Negative.prototype = {
                type: "Negative",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                genCSS: function(a, b) {
                    b.add("-"), this.value.genCSS(a, b)
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    return b.isMathOn() ? new a.Operation("*", [new a.Dimension(-1), this.value]).eval(b) : new a.Negative(this.value.eval(b))
                }
            }
        }(c("../tree")), function(a) {
            a.Operation = function(a, b, c) {
                this.op = a.trim(), this.operands = b, this.isSpaced = c
            }, a.Operation.prototype = {
                type: "Operation",
                accept: function(a) {
                    this.operands = a.visit(this.operands)
                },
                eval: function(b) {
                    var c = this.operands[0].eval(b),
                        d = this.operands[1].eval(b);
                    if (b.isMathOn()) {
                        if (c instanceof a.Dimension && d instanceof a.Color && (c = c.toColor()), d instanceof a.Dimension && c instanceof a.Color && (d = d.toColor()), !c.operate) throw {
                            type: "Operation",
                            message: "Operation on an invalid type"
                        };
                        return c.operate(b, this.op, d)
                    }
                    return new a.Operation(this.op, [c, d], this.isSpaced)
                },
                genCSS: function(a, b) {
                    this.operands[0].genCSS(a, b), this.isSpaced && b.add(" "), b.add(this.op), this.isSpaced && b.add(" "), this.operands[1].genCSS(a, b)
                },
                toCSS: a.toCSS
            }, a.operate = function(a, b, c, d) {
                switch (b) {
                    case "+":
                        return c + d;
                    case "-":
                        return c - d;
                    case "*":
                        return c * d;
                    case "/":
                        return c / d
                }
            }
        }(c("../tree")), function(a) {
            a.Paren = function(a) {
                this.value = a
            }, a.Paren.prototype = {
                type: "Paren",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                genCSS: function(a, b) {
                    b.add("("), this.value.genCSS(a, b), b.add(")")
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    return new a.Paren(this.value.eval(b))
                }
            }
        }(c("../tree")), function(a) {
            a.Quoted = function(a, b, c, d, e) {
                this.escaped = c, this.value = b || "", this.quote = a.charAt(0), this.index = d, this.currentFileInfo = e
            }, a.Quoted.prototype = {
                type: "Quoted",
                genCSS: function(a, b) {
                    this.escaped || b.add(this.quote, this.currentFileInfo, this.index), b.add(this.value), this.escaped || b.add(this.quote)
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    var c = this,
                        d = this.value.replace(/`([^`]+)`/g, function(d, e) {
                            return new a.JavaScript(e, c.index, !0).eval(b).value
                        }).replace(/@\{([\w-]+)\}/g, function(d, e) {
                            var f = new a.Variable("@" + e, c.index, c.currentFileInfo).eval(b, !0);
                            return f instanceof a.Quoted ? f.value : f.toCSS()
                        });
                    return new a.Quoted(this.quote + d + this.quote, d, this.escaped, this.index, this.currentFileInfo)
                },
                compare: function(a) {
                    if (!a.toCSS) return -1;
                    var b = this.toCSS(),
                        c = a.toCSS();
                    return b === c ? 0 : c > b ? -1 : 1
                }
            }
        }(c("../tree")), function(a) {
            function b(a, b) {
                var c, d = "",
                    e = b.length,
                    f = {
                        add: function(a) {
                            d += a
                        }
                    };
                for (c = 0; e > c; c++) b[c].eval(a).genCSS(a, f);
                return d
            }
            a.Rule = function(b, c, d, e, f, g, h) {
                this.name = b, this.value = c instanceof a.Value || c instanceof a.Ruleset ? c : new a.Value([c]), this.important = d ? " " + d.trim() : "", this.merge = e, this.index = f, this.currentFileInfo = g, this.inline = h || !1, this.variable = b.charAt && "@" === b.charAt(0)
            }, a.Rule.prototype = {
                type: "Rule",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                genCSS: function(a, b) {
                    b.add(this.name + (a.compress ? ":" : ": "), this.currentFileInfo, this.index);
                    try {
                        this.value.genCSS(a, b)
                    } catch (c) {
                        throw c.index = this.index, c.filename = this.currentFileInfo.filename, c
                    }
                    b.add(this.important + (this.inline || a.lastRule && a.compress ? "" : ";"), this.currentFileInfo, this.index)
                },
                toCSS: a.toCSS,
                eval: function(c) {
                    var d, e = !1,
                        f = this.name;
                    "string" != typeof f && (f = 1 === f.length && f[0] instanceof a.Keyword ? f[0].value : b(c, f)), "font" !== f || c.strictMath || (e = !0, c.strictMath = !0);
                    try {
                        if (d = this.value.eval(c), !this.variable && "DetachedRuleset" === d.type) throw {
                            message: "Rulesets cannot be evaluated on a property.",
                            index: this.index,
                            filename: this.currentFileInfo.filename
                        };
                        return new a.Rule(f, d, this.important, this.merge, this.index, this.currentFileInfo, this.inline)
                    } catch (g) {
                        throw "number" != typeof g.index && (g.index = this.index, g.filename = this.currentFileInfo.filename), g
                    } finally {
                        e && (c.strictMath = !1)
                    }
                },
                makeImportant: function() {
                    return new a.Rule(this.name, this.value, "!important", this.merge, this.index, this.currentFileInfo, this.inline)
                }
            }
        }(c("../tree")), function(a) {
            a.RulesetCall = function(a) {
                this.variable = a
            }, a.RulesetCall.prototype = {
                type: "RulesetCall",
                accept: function() {},
                eval: function(b) {
                    var c = new a.Variable(this.variable).eval(b);
                    return c.callEval(b)
                }
            }
        }(c("../tree")), function(a) {
            a.Ruleset = function(a, b, c) {
                this.selectors = a, this.rules = b, this._lookups = {}, this.strictImports = c
            }, a.Ruleset.prototype = {
                type: "Ruleset",
                accept: function(a) {
                    this.paths ? a.visitArray(this.paths, !0) : this.selectors && (this.selectors = a.visitArray(this.selectors)), this.rules && this.rules.length && (this.rules = a.visitArray(this.rules))
                },
                eval: function(b) {
                    var c, d, e, f, g = this.selectors,
                        h = a.defaultFunc,
                        i = !1;
                    if (g && (d = g.length)) {
                        for (c = [], h.error({
                            type: "Syntax",
                            message: "it is currently only allowed in parametric mixin guards,"
                        }), f = 0; d > f; f++) e = g[f].eval(b), c.push(e), e.evaldCondition && (i = !0);
                        h.reset()
                    } else i = !0;
                    var j, k, l = this.rules ? this.rules.slice(0) : null,
                        m = new a.Ruleset(c, l, this.strictImports);
                    m.originalRuleset = this, m.root = this.root, m.firstRoot = this.firstRoot, m.allowImports = this.allowImports, this.debugInfo && (m.debugInfo = this.debugInfo), i || (l.length = 0);
                    var n = b.frames;
                    n.unshift(m);
                    var o = b.selectors;
                    o || (b.selectors = o = []), o.unshift(this.selectors), (m.root || m.allowImports || !m.strictImports) && m.evalImports(b);
                    var p = m.rules,
                        q = p ? p.length : 0;
                    for (f = 0; q > f; f++)(p[f] instanceof a.mixin.Definition || p[f] instanceof a.DetachedRuleset) && (p[f] = p[f].eval(b));
                    var r = b.mediaBlocks && b.mediaBlocks.length || 0;
                    for (f = 0; q > f; f++) p[f] instanceof a.mixin.Call ? (l = p[f].eval(b).filter(function(b) {
                        return b instanceof a.Rule && b.variable ? !m.variable(b.name) : !0
                    }), p.splice.apply(p, [f, 1].concat(l)), q += l.length - 1, f += l.length - 1, m.resetCache()) : p[f] instanceof a.RulesetCall && (l = p[f].eval(b).rules.filter(function(b) {
                        return b instanceof a.Rule && b.variable ? !1 : !0
                    }), p.splice.apply(p, [f, 1].concat(l)), q += l.length - 1, f += l.length - 1, m.resetCache());
                    for (f = 0; f < p.length; f++) j = p[f], j instanceof a.mixin.Definition || j instanceof a.DetachedRuleset || (p[f] = j = j.eval ? j.eval(b) : j);
                    for (f = 0; f < p.length; f++) if (j = p[f], j instanceof a.Ruleset && j.selectors && 1 === j.selectors.length && j.selectors[0].isJustParentSelector()) {
                        p.splice(f--, 1);
                        for (var s = 0; s < j.rules.length; s++) k = j.rules[s], k instanceof a.Rule && k.variable || p.splice(++f, 0, k)
                    }
                    if (n.shift(), o.shift(), b.mediaBlocks) for (f = r; f < b.mediaBlocks.length; f++) b.mediaBlocks[f].bubbleSelectors(c);
                    return m
                },
                evalImports: function(b) {
                    var c, d, e = this.rules;
                    if (e) for (c = 0; c < e.length; c++) e[c] instanceof a.Import && (d = e[c].eval(b), d && d.length ? (e.splice.apply(e, [c, 1].concat(d)), c += d.length - 1) : e.splice(c, 1, d), this.resetCache())
                },
                makeImportant: function() {
                    return new a.Ruleset(this.selectors, this.rules.map(function(a) {
                        return a.makeImportant ? a.makeImportant() : a
                    }), this.strictImports)
                },
                matchArgs: function(a) {
                    return !a || 0 === a.length
                },
                matchCondition: function(b, c) {
                    var d = this.selectors[this.selectors.length - 1];
                    return d.evaldCondition ? d.condition && !d.condition.eval(new a.evalEnv(c, c.frames)) ? !1 : !0 : !1
                },
                resetCache: function() {
                    this._rulesets = null, this._variables = null, this._lookups = {}
                },
                variables: function() {
                    return this._variables || (this._variables = this.rules ? this.rules.reduce(function(b, c) {
                        return c instanceof a.Rule && c.variable === !0 && (b[c.name] = c), b
                    }, {}) : {}), this._variables
                },
                variable: function(a) {
                    return this.variables()[a]
                },
                rulesets: function() {
                    if (!this.rules) return null;
                    var b, c, d = a.Ruleset,
                        e = a.mixin.Definition,
                        f = [],
                        g = this.rules,
                        h = g.length;
                    for (b = 0; h > b; b++) c = g[b], (c instanceof d || c instanceof e) && f.push(c);
                    return f
                },
                prependRule: function(a) {
                    var b = this.rules;
                    b ? b.unshift(a) : this.rules = [a]
                },
                find: function(b, c) {
                    c = c || this;
                    var d, e = [],
                        f = b.toCSS();
                    return f in this._lookups ? this._lookups[f] : (this.rulesets().forEach(function(f) {
                        if (f !== c) for (var g = 0; g < f.selectors.length; g++) if (d = b.match(f.selectors[g])) {
                            b.elements.length > d ? Array.prototype.push.apply(e, f.find(new a.Selector(b.elements.slice(d)), c)) : e.push(f);
                            break
                        }
                    }), this._lookups[f] = e, e)
                },
                genCSS: function(b, c) {
                    var d, e, f, g, h, i, j = [],
                        k = [];
                    b.tabLevel = b.tabLevel || 0, this.root || b.tabLevel++;
                    var l, m = b.compress ? "" : Array(b.tabLevel + 1).join("  "),
                        n = b.compress ? "" : Array(b.tabLevel).join("  ");
                    for (d = 0; d < this.rules.length; d++) h = this.rules[d], h.rules || h instanceof a.Media || h instanceof a.Directive || this.root && h instanceof a.Comment ? k.push(h) : j.push(h);
                    if (!this.root) {
                        g = a.debugInfo(b, this, n), g && (c.add(g), c.add(n));
                        var o, p = this.paths,
                            q = p.length;
                        for (l = b.compress ? "," : ",\n" + n, d = 0; q > d; d++) if (i = p[d], o = i.length) for (d > 0 && c.add(l), b.firstSelector = !0, i[0].genCSS(b, c), b.firstSelector = !1, e = 1; o > e; e++) i[e].genCSS(b, c);
                        c.add((b.compress ? "{" : " {\n") + m)
                    }
                    for (d = 0; d < j.length; d++) h = j[d], d + 1 !== j.length || this.root && 0 !== k.length && !this.firstRoot || (b.lastRule = !0), h.genCSS ? h.genCSS(b, c) : h.value && c.add(h.value.toString()), b.lastRule ? b.lastRule = !1 : c.add(b.compress ? "" : "\n" + m);
                    if (this.root || (c.add(b.compress ? "}" : "\n" + n + "}"), b.tabLevel--), l = (b.compress ? "" : "\n") + (this.root ? m : n), f = k.length) for (j.length && l && c.add(l), k[0].genCSS(b, c), d = 1; f > d; d++) l && c.add(l), k[d].genCSS(b, c);
                    c.isEmpty() || b.compress || !this.firstRoot || c.add("\n")
                },
                toCSS: a.toCSS,
                markReferenced: function() {
                    if (this.selectors) for (var a = 0; a < this.selectors.length; a++) this.selectors[a].markReferenced()
                },
                joinSelectors: function(a, b, c) {
                    for (var d = 0; d < c.length; d++) this.joinSelector(a, b, c[d])
                },
                joinSelector: function(b, c, d) {
                    var e, f, g, h, i, j, k, l, m, n, o, p, q, r, s;
                    for (e = 0; e < d.elements.length; e++) j = d.elements[e], "&" === j.value && (h = !0);
                    if (h) {
                        for (r = [], i = [
                            []
                        ], e = 0; e < d.elements.length; e++) if (j = d.elements[e], "&" !== j.value) r.push(j);
                        else {
                            for (s = [], r.length > 0 && this.mergeElementsOnToSelectors(r, i), f = 0; f < i.length; f++) if (k = i[f], 0 === c.length) k.length > 0 && (k[0].elements = k[0].elements.slice(0), k[0].elements.push(new a.Element(j.combinator, "", j.index, j.currentFileInfo))), s.push(k);
                            else for (g = 0; g < c.length; g++) l = c[g], m = [], n = [], p = !0, k.length > 0 ? (m = k.slice(0), q = m.pop(), o = d.createDerived(q.elements.slice(0)), p = !1) : o = d.createDerived([]), l.length > 1 && (n = n.concat(l.slice(1))), l.length > 0 && (p = !1, o.elements.push(new a.Element(j.combinator, l[0].elements[0].value, j.index, j.currentFileInfo)), o.elements = o.elements.concat(l[0].elements.slice(1))), p || m.push(o), m = m.concat(n), s.push(m);
                            i = s, r = []
                        }
                        for (r.length > 0 && this.mergeElementsOnToSelectors(r, i), e = 0; e < i.length; e++) i[e].length > 0 && b.push(i[e])
                    } else if (c.length > 0) for (e = 0; e < c.length; e++) b.push(c[e].concat(d));
                    else b.push([d])
                },
                mergeElementsOnToSelectors: function(b, c) {
                    var d, e;
                    if (0 === c.length) return void c.push([new a.Selector(b)]);
                    for (d = 0; d < c.length; d++) e = c[d], e.length > 0 ? e[e.length - 1] = e[e.length - 1].createDerived(e[e.length - 1].elements.concat(b)) : e.push(new a.Selector(b))
                }
            }
        }(c("../tree")), function(a) {
            a.Selector = function(a, b, c, d, e, f) {
                this.elements = a, this.extendList = b, this.condition = c, this.currentFileInfo = e || {}, this.isReferenced = f, c || (this.evaldCondition = !0)
            }, a.Selector.prototype = {
                type: "Selector",
                accept: function(a) {
                    this.elements && (this.elements = a.visitArray(this.elements)), this.extendList && (this.extendList = a.visitArray(this.extendList)), this.condition && (this.condition = a.visit(this.condition))
                },
                createDerived: function(b, c, d) {
                    d = null != d ? d : this.evaldCondition;
                    var e = new a.Selector(b, c || this.extendList, null, this.index, this.currentFileInfo, this.isReferenced);
                    return e.evaldCondition = d, e.mediaEmpty = this.mediaEmpty, e
                },
                match: function(a) {
                    var b, c, d = this.elements,
                        e = d.length;
                    if (a.CacheElements(), b = a._elements.length, 0 === b || b > e) return 0;
                    for (c = 0; b > c; c++) if (d[c].value !== a._elements[c]) return 0;
                    return b
                },
                CacheElements: function() {
                    var a, b, c, d = "";
                    if (!this._elements) {
                        for (a = this.elements.length, c = 0; a > c; c++) if (b = this.elements[c], d += b.combinator.value, b.value.value) {
                            if ("string" != typeof b.value.value) {
                                d = "";
                                break
                            }
                            d += b.value.value
                        } else d += b.value;
                        this._elements = d.match(/[,&#\.\w-]([\w-]|(\\.))*/g), this._elements ? "&" === this._elements[0] && this._elements.shift() : this._elements = []
                    }
                },
                isJustParentSelector: function() {
                    return !this.mediaEmpty && 1 === this.elements.length && "&" === this.elements[0].value && (" " === this.elements[0].combinator.value || "" === this.elements[0].combinator.value)
                },
                eval: function(a) {
                    var b = this.condition && this.condition.eval(a),
                        c = this.elements,
                        d = this.extendList;
                    return c = c && c.map(function(b) {
                            return b.eval(a)
                        }), d = d && d.map(function(b) {
                            return b.eval(a)
                        }), this.createDerived(c, d, b)
                },
                genCSS: function(a, b) {
                    var c, d;
                    if (a && a.firstSelector || "" !== this.elements[0].combinator.value || b.add(" ", this.currentFileInfo, this.index), !this._css) for (c = 0; c < this.elements.length; c++) d = this.elements[c], d.genCSS(a, b)
                },
                toCSS: a.toCSS,
                markReferenced: function() {
                    this.isReferenced = !0
                },
                getIsReferenced: function() {
                    return !this.currentFileInfo.reference || this.isReferenced
                },
                getIsOutput: function() {
                    return this.evaldCondition
                }
            }
        }(c("../tree")), function(a) {
            a.UnicodeDescriptor = function(a) {
                this.value = a
            }, a.UnicodeDescriptor.prototype = {
                type: "UnicodeDescriptor",
                genCSS: function(a, b) {
                    b.add(this.value)
                },
                toCSS: a.toCSS,
                eval: function() {
                    return this
                }
            }
        }(c("../tree")), function(a) {
            a.URL = function(a, b, c) {
                this.value = a, this.currentFileInfo = b, this.isEvald = c
            }, a.URL.prototype = {
                type: "Url",
                accept: function(a) {
                    this.value = a.visit(this.value)
                },
                genCSS: function(a, b) {
                    b.add("url("), this.value.genCSS(a, b), b.add(")")
                },
                toCSS: a.toCSS,
                eval: function(b) {
                    var c, d = this.value.eval(b);
                    if (!this.isEvald && (c = this.currentFileInfo && this.currentFileInfo.rootpath, c && "string" == typeof d.value && b.isPathRelative(d.value) && (d.quote || (c = c.replace(/[\(\)'"\s]/g, function(a) {
                            return "\\" + a
                        })), d.value = c + d.value), d.value = b.normalizePath(d.value), b.urlArgs && !d.value.match(/^\s*data:/))) {
                        var e = -1 === d.value.indexOf("?") ? "?" : "&",
                            f = e + b.urlArgs; - 1 !== d.value.indexOf("#") ? d.value = d.value.replace("#", f + "#") : d.value += f
                    }
                    return new a.URL(d, this.currentFileInfo, !0)
                }
            }
        }(c("../tree")), function(a) {
            a.Value = function(a) {
                this.value = a
            }, a.Value.prototype = {
                type: "Value",
                accept: function(a) {
                    this.value && (this.value = a.visitArray(this.value))
                },
                eval: function(b) {
                    return 1 === this.value.length ? this.value[0].eval(b) : new a.Value(this.value.map(function(a) {
                        return a.eval(b)
                    }))
                },
                genCSS: function(a, b) {
                    var c;
                    for (c = 0; c < this.value.length; c++) this.value[c].genCSS(a, b), c + 1 < this.value.length && b.add(a && a.compress ? "," : ", ")
                },
                toCSS: a.toCSS
            }
        }(c("../tree")), function(a) {
            a.Variable = function(a, b, c) {
                this.name = a, this.index = b, this.currentFileInfo = c || {}
            }, a.Variable.prototype = {
                type: "Variable",
                eval: function(b) {
                    var c, d = this.name;
                    if (0 === d.indexOf("@@") && (d = "@" + new a.Variable(d.slice(1)).eval(b).value), this.evaluating) throw {
                        type: "Name",
                        message: "Recursive variable definition for " + d,
                        filename: this.currentFileInfo.file,
                        index: this.index
                    };
                    if (this.evaluating = !0, c = a.find(b.frames, function(a) {
                            var c = a.variable(d);
                            return c ? c.value.eval(b) : void 0
                        })) return this.evaluating = !1, c;
                    throw {
                        type: "Name",
                        message: "variable " + d + " is undefined",
                        filename: this.currentFileInfo.filename,
                        index: this.index
                    }
                }
            }
        }(c("../tree")), function(a) {
            var b = ["paths", "optimization", "files", "contents", "contentsIgnoredChars", "relativeUrls", "rootpath", "strictImports", "insecure", "dumpLineNumbers", "compress", "processImports", "syncImport", "javascriptEnabled", "mime", "useFileCache", "currentFileInfo"];
            a.parseEnv = function(a) {
                if (d(a, this, b), this.contents || (this.contents = {}), this.contentsIgnoredChars || (this.contentsIgnoredChars = {}), this.files || (this.files = {}), !this.currentFileInfo) {
                    var c = a && a.filename || "input",
                        e = c.replace(/[^\/\\]*$/, "");
                    a && (a.filename = null), this.currentFileInfo = {
                        filename: c,
                        relativeUrls: this.relativeUrls,
                        rootpath: a && a.rootpath || "",
                        currentDirectory: e,
                        entryPath: e,
                        rootFilename: c
                    }
                }
            };
            var c = ["silent", "verbose", "compress", "yuicompress", "ieCompat", "strictMath", "strictUnits", "cleancss", "sourceMap", "importMultiple", "urlArgs"];
            a.evalEnv = function(a, b) {
                d(a, this, c), this.frames = b || []
            }, a.evalEnv.prototype.inParenthesis = function() {
                this.parensStack || (this.parensStack = []), this.parensStack.push(!0)
            }, a.evalEnv.prototype.outOfParenthesis = function() {
                this.parensStack.pop()
            }, a.evalEnv.prototype.isMathOn = function() {
                return this.strictMath ? this.parensStack && this.parensStack.length : !0
            }, a.evalEnv.prototype.isPathRelative = function(a) {
                return !/^(?:[a-z-]+:|\/)/.test(a)
            }, a.evalEnv.prototype.normalizePath = function(a) {
                var b, c = a.split("/").reverse();
                for (a = []; 0 !== c.length;) switch (b = c.pop()) {
                    case ".":
                        break;
                    case "..":
                        0 === a.length || ".." === a[a.length - 1] ? a.push(b) : a.pop();
                        break;
                    default:
                        a.push(b)
                }
                return a.join("/")
            };
            var d = function(a, b, c) {
                if (a) for (var d = 0; d < c.length; d++) a.hasOwnProperty(c[d]) && (b[c[d]] = a[c[d]])
            }
        }(c("./tree")), function(a) {
            function b(a) {
                return a
            }
            function c(a, b) {
                var d, e;
                for (d in a) if (a.hasOwnProperty(d)) switch (e = a[d], typeof e) {
                    case "function":
                        e.prototype && e.prototype.type && (e.prototype.typeIndex = b++);
                        break;
                    case "object":
                        b = c(e, b)
                }
                return b
            }
            var d = {
                    visitDeeper: !0
                },
                e = !1;
            a.visitor = function(b) {
                this._implementation = b, this._visitFnCache = [], e || (c(a, 1), e = !0)
            }, a.visitor.prototype = {
                visit: function(a) {
                    if (!a) return a;
                    var c = a.typeIndex;
                    if (!c) return a;
                    var e, f = this._visitFnCache,
                        g = this._implementation,
                        h = c << 1,
                        i = 1 | h,
                        j = f[h],
                        k = f[i],
                        l = d;
                    if (l.visitDeeper = !0, j || (e = "visit" + a.type, j = g[e] || b, k = g[e + "Out"] || b, f[h] = j, f[i] = k), j !== b) {
                        var m = j.call(g, a, l);
                        g.isReplacing && (a = m)
                    }
                    return l.visitDeeper && a && a.accept && a.accept(this), k != b && k.call(g, a), a
                },
                visitArray: function(a, b) {
                    if (!a) return a;
                    var c, d = a.length;
                    if (b || !this._implementation.isReplacing) {
                        for (c = 0; d > c; c++) this.visit(a[c]);
                        return a
                    }
                    var e = [];
                    for (c = 0; d > c; c++) {
                        var f = this.visit(a[c]);
                        f.splice ? f.length && this.flatten(f, e) : e.push(f)
                    }
                    return e
                },
                flatten: function(a, b) {
                    b || (b = []);
                    var c, d, e, f, g, h;
                    for (d = 0, c = a.length; c > d; d++) if (e = a[d], e.splice) for (g = 0, f = e.length; f > g; g++) h = e[g], h.splice ? h.length && this.flatten(h, b) : b.push(h);
                    else b.push(e);
                    return b
                }
            }
        }(c("./tree")), function(a) {
            a.importVisitor = function(b, c, d, e, f) {
                if (this._visitor = new a.visitor(this), this._importer = b, this._finish = c, this.env = d || new a.evalEnv, this.importCount = 0, this.onceFileDetectionMap = e || {}, this.recursionDetector = {}, f) for (var g in f) f.hasOwnProperty(g) && (this.recursionDetector[g] = !0)
            }, a.importVisitor.prototype = {
                isReplacing: !0,
                run: function(a) {
                    var b;
                    try {
                        this._visitor.visit(a)
                    } catch (c) {
                        b = c
                    }
                    this.isFinished = !0, 0 === this.importCount && this._finish(b)
                },
                visitImport: function(b, c) {
                    var d, e = this,
                        f = b.options.inline;
                    if (!b.css || f) {
                        try {
                            d = b.evalForImport(this.env)
                        } catch (g) {
                            g.filename || (g.index = b.index, g.filename = b.currentFileInfo.filename), b.css = !0, b.error = g
                        }
                        if (d && (!d.css || f)) {
                            b = d, this.importCount++;
                            var h = new a.evalEnv(this.env, this.env.frames.slice(0));
                            b.options.multiple && (h.importMultiple = !0), this._importer.push(b.getPath(), b.currentFileInfo, b.options, function(c, d, g, i) {
                                c && !c.filename && (c.index = b.index, c.filename = b.currentFileInfo.filename), h.importMultiple || (b.skip = g ? !0 : function() {
                                    return i in e.onceFileDetectionMap ? !0 : (e.onceFileDetectionMap[i] = !0, !1)
                                });
                                var j = function(a) {
                                    e.importCount--, 0 === e.importCount && e.isFinished && e._finish(a)
                                };
                                if (d) {
                                    b.root = d, b.importedFilename = i;
                                    var k = g || i in e.recursionDetector;
                                    if (!f && (h.importMultiple || !k)) return e.recursionDetector[i] = !0, void new a.importVisitor(e._importer, j, h, e.onceFileDetectionMap, e.recursionDetector).run(d)
                                }
                                j()
                            })
                        }
                    }
                    return c.visitDeeper = !1, b
                },
                visitRule: function(a, b) {
                    return b.visitDeeper = !1, a
                },
                visitDirective: function(a) {
                    return this.env.frames.unshift(a), a
                },
                visitDirectiveOut: function() {
                    this.env.frames.shift()
                },
                visitMixinDefinition: function(a) {
                    return this.env.frames.unshift(a), a
                },
                visitMixinDefinitionOut: function() {
                    this.env.frames.shift()
                },
                visitRuleset: function(a) {
                    return this.env.frames.unshift(a), a
                },
                visitRulesetOut: function() {
                    this.env.frames.shift()
                },
                visitMedia: function(a) {
                    return this.env.frames.unshift(a.ruleset), a
                },
                visitMediaOut: function() {
                    this.env.frames.shift()
                }
            }
        }(c("./tree")), function(a) {
            a.joinSelectorVisitor = function() {
                this.contexts = [
                    []
                ], this._visitor = new a.visitor(this)
            }, a.joinSelectorVisitor.prototype = {
                run: function(a) {
                    return this._visitor.visit(a)
                },
                visitRule: function(a, b) {
                    b.visitDeeper = !1
                },
                visitMixinDefinition: function(a, b) {
                    b.visitDeeper = !1
                },
                visitRuleset: function(a) {
                    var b, c = this.contexts[this.contexts.length - 1],
                        d = [];
                    this.contexts.push(d), a.root || (b = a.selectors, b && (b = b.filter(function(a) {
                        return a.getIsOutput()
                    }), a.selectors = b.length ? b : b = null, b && a.joinSelectors(d, c, b)), b || (a.rules = null), a.paths = d)
                },
                visitRulesetOut: function() {
                    this.contexts.length = this.contexts.length - 1
                },
                visitMedia: function(a) {
                    var b = this.contexts[this.contexts.length - 1];
                    a.rules[0].root = 0 === b.length || b[0].multiMedia
                }
            }
        }(c("./tree")), function(a) {
            a.toCSSVisitor = function(b) {
                this._visitor = new a.visitor(this), this._env = b
            }, a.toCSSVisitor.prototype = {
                isReplacing: !0,
                run: function(a) {
                    return this._visitor.visit(a)
                },
                visitRule: function(a) {
                    return a.variable ? [] : a
                },
                visitMixinDefinition: function(a) {
                    return a.frames = [], []
                },
                visitExtend: function() {
                    return []
                },
                visitComment: function(a) {
                    return a.isSilent(this._env) ? [] : a
                },
                visitMedia: function(a, b) {
                    return a.accept(this._visitor), b.visitDeeper = !1, a.rules.length ? a : []
                },
                visitDirective: function(b) {
                    if (b.currentFileInfo.reference && !b.isReferenced) return [];
                    if ("@charset" === b.name) {
                        if (this.charset) {
                            if (b.debugInfo) {
                                var c = new a.Comment("/* " + b.toCSS(this._env).replace(/\n/g, "") + " */\n");
                                return c.debugInfo = b.debugInfo, this._visitor.visit(c)
                            }
                            return []
                        }
                        this.charset = !0
                    }
                    return b
                },
                checkPropertiesInRoot: function(b) {
                    for (var c, d = 0; d < b.length; d++) if (c = b[d], c instanceof a.Rule && !c.variable) throw {
                        message: "properties must be inside selector blocks, they cannot be in the root.",
                        index: c.index,
                        filename: c.currentFileInfo ? c.currentFileInfo.filename : null
                    }
                },
                visitRuleset: function(b, c) {
                    var d, e = [];
                    if (b.firstRoot && this.checkPropertiesInRoot(b.rules), b.root) b.accept(this._visitor), c.visitDeeper = !1, (b.firstRoot || b.rules && b.rules.length > 0) && e.splice(0, 0, b);
                    else {
                        b.paths && (b.paths = b.paths.filter(function(b) {
                            var c;
                            for (" " === b[0].elements[0].combinator.value && (b[0].elements[0].combinator = new a.Combinator("")), c = 0; c < b.length; c++) if (b[c].getIsReferenced() && b[c].getIsOutput()) return !0;
                            return !1
                        }));
                        for (var f = b.rules, g = f ? f.length : 0, h = 0; g > h;) d = f[h], d && d.rules ? (e.push(this._visitor.visit(d)), f.splice(h, 1), g--) : h++;
                        g > 0 ? b.accept(this._visitor) : b.rules = null, c.visitDeeper = !1, f = b.rules, f && (this._mergeRules(f), f = b.rules), f && (this._removeDuplicateRules(f), f = b.rules), f && f.length > 0 && b.paths.length > 0 && e.splice(0, 0, b)
                    }
                    return 1 === e.length ? e[0] : e
                },
                _removeDuplicateRules: function(b) {
                    if (b) {
                        var c, d, e, f = {};
                        for (e = b.length - 1; e >= 0; e--) if (d = b[e], d instanceof a.Rule) if (f[d.name]) {
                            c = f[d.name], c instanceof a.Rule && (c = f[d.name] = [f[d.name].toCSS(this._env)]);
                            var g = d.toCSS(this._env); - 1 !== c.indexOf(g) ? b.splice(e, 1) : c.push(g)
                        } else f[d.name] = d
                    }
                },
                _mergeRules: function(b) {
                    if (b) {
                        for (var c, d, e, f = {}, g = 0; g < b.length; g++) d = b[g], d instanceof a.Rule && d.merge && (e = [d.name, d.important ? "!" : ""].join(","), f[e] ? b.splice(g--, 1) : f[e] = [], f[e].push(d));
                        Object.keys(f).map(function(b) {
                            function e(b) {
                                return new a.Expression(b.map(function(a) {
                                    return a.value
                                }))
                            }
                            function g(b) {
                                return new a.Value(b.map(function(a) {
                                    return a
                                }))
                            }
                            if (c = f[b], c.length > 1) {
                                d = c[0];
                                var h = [],
                                    i = [];
                                c.map(function(a) {
                                    "+" === a.merge && (i.length > 0 && h.push(e(i)), i = []), i.push(a)
                                }), h.push(e(i)), d.value = g(h)
                            }
                        })
                    }
                }
            }
        }(c("./tree")), function(a) {
            a.extendFinderVisitor = function() {
                this._visitor = new a.visitor(this), this.contexts = [], this.allExtendsStack = [
                    []
                ]
            }, a.extendFinderVisitor.prototype = {
                run: function(a) {
                    return a = this._visitor.visit(a), a.allExtends = this.allExtendsStack[0], a
                },
                visitRule: function(a, b) {
                    b.visitDeeper = !1
                },
                visitMixinDefinition: function(a, b) {
                    b.visitDeeper = !1
                },
                visitRuleset: function(b) {
                    if (!b.root) {
                        var c, d, e, f, g = [],
                            h = b.rules,
                            i = h ? h.length : 0;
                        for (c = 0; i > c; c++) b.rules[c] instanceof a.Extend && (g.push(h[c]), b.extendOnEveryPath = !0);
                        var j = b.paths;
                        for (c = 0; c < j.length; c++) {
                            var k = j[c],
                                l = k[k.length - 1],
                                m = l.extendList;
                            for (f = m ? m.slice(0).concat(g) : g, f && (f = f.map(function(a) {
                                return a.clone()
                            })), d = 0; d < f.length; d++) this.foundExtends = !0, e = f[d], e.findSelfSelectors(k), e.ruleset = b, 0 === d && (e.firstExtendOnThisSelectorPath = !0), this.allExtendsStack[this.allExtendsStack.length - 1].push(e)
                        }
                        this.contexts.push(b.selectors)
                    }
                },
                visitRulesetOut: function(a) {
                    a.root || (this.contexts.length = this.contexts.length - 1)
                },
                visitMedia: function(a) {
                    a.allExtends = [], this.allExtendsStack.push(a.allExtends)
                },
                visitMediaOut: function() {
                    this.allExtendsStack.length = this.allExtendsStack.length - 1
                },
                visitDirective: function(a) {
                    a.allExtends = [], this.allExtendsStack.push(a.allExtends)
                },
                visitDirectiveOut: function() {
                    this.allExtendsStack.length = this.allExtendsStack.length - 1
                }
            }, a.processExtendsVisitor = function() {
                this._visitor = new a.visitor(this)
            }, a.processExtendsVisitor.prototype = {
                run: function(b) {
                    var c = new a.extendFinderVisitor;
                    return c.run(b), c.foundExtends ? (b.allExtends = b.allExtends.concat(this.doExtendChaining(b.allExtends, b.allExtends)), this.allExtendsStack = [b.allExtends], this._visitor.visit(b)) : b
                },
                doExtendChaining: function(b, c, d) {
                    var e, f, g, h, i, j, k, l, m = [],
                        n = this;
                    for (d = d || 0, e = 0; e < b.length; e++) for (f = 0; f < c.length; f++) j = b[e], k = c[f], j.parent_ids.indexOf(k.object_id) >= 0 || (i = [k.selfSelectors[0]], g = n.findMatch(j, i), g.length && j.selfSelectors.forEach(function(b) {
                        h = n.extendSelector(g, i, b), l = new a.Extend(k.selector, k.option, 0), l.selfSelectors = h, h[h.length - 1].extendList = [l], m.push(l), l.ruleset = k.ruleset, l.parent_ids = l.parent_ids.concat(k.parent_ids, j.parent_ids), k.firstExtendOnThisSelectorPath && (l.firstExtendOnThisSelectorPath = !0, k.ruleset.paths.push(h))
                    }));
                    if (m.length) {
                        if (this.extendChainCount++, d > 100) {
                            var o = "{unable to calculate}",
                                p = "{unable to calculate}";
                            try {
                                o = m[0].selfSelectors[0].toCSS(), p = m[0].selector.toCSS()
                            } catch (q) {}
                            throw {
                                message: "extend circular reference detected. One of the circular extends is currently:" + o + ":extend(" + p + ")"
                            }
                        }
                        return m.concat(n.doExtendChaining(m, c, d + 1))
                    }
                    return m
                },
                visitRule: function(a, b) {
                    b.visitDeeper = !1
                },
                visitMixinDefinition: function(a, b) {
                    b.visitDeeper = !1
                },
                visitSelector: function(a, b) {
                    b.visitDeeper = !1
                },
                visitRuleset: function(a) {
                    if (!a.root) {
                        var b, c, d, e, f = this.allExtendsStack[this.allExtendsStack.length - 1],
                            g = [],
                            h = this;
                        for (d = 0; d < f.length; d++) for (c = 0; c < a.paths.length; c++) if (e = a.paths[c], !a.extendOnEveryPath) {
                            var i = e[e.length - 1].extendList;
                            i && i.length || (b = this.findMatch(f[d], e), b.length && f[d].selfSelectors.forEach(function(a) {
                                g.push(h.extendSelector(b, e, a))
                            }))
                        }
                        a.paths = a.paths.concat(g)
                    }
                },
                findMatch: function(a, b) {
                    var c, d, e, f, g, h, i, j = this,
                        k = a.selector.elements,
                        l = [],
                        m = [];
                    for (c = 0; c < b.length; c++) for (d = b[c], e = 0; e < d.elements.length; e++) for (f = d.elements[e], (a.allowBefore || 0 === c && 0 === e) && l.push({
                        pathIndex: c,
                        index: e,
                        matched: 0,
                        initialCombinator: f.combinator
                    }), h = 0; h < l.length; h++) i = l[h], g = f.combinator.value, "" === g && 0 === e && (g = " "), !j.isElementValuesEqual(k[i.matched].value, f.value) || i.matched > 0 && k[i.matched].combinator.value !== g ? i = null : i.matched++, i && (i.finished = i.matched === k.length, i.finished && !a.allowAfter && (e + 1 < d.elements.length || c + 1 < b.length) && (i = null)), i ? i.finished && (i.length = k.length, i.endPathIndex = c, i.endPathElementIndex = e + 1, l.length = 0, m.push(i)) : (l.splice(h, 1), h--);
                    return m
                },
                isElementValuesEqual: function(b, c) {
                    if ("string" == typeof b || "string" == typeof c) return b === c;
                    if (b instanceof a.Attribute) return b.op !== c.op || b.key !== c.key ? !1 : b.value && c.value ? (b = b.value.value || b.value, c = c.value.value || c.value, b === c) : b.value || c.value ? !1 : !0;
                    if (b = b.value, c = c.value, b instanceof a.Selector) {
                        if (!(c instanceof a.Selector) || b.elements.length !== c.elements.length) return !1;
                        for (var d = 0; d < b.elements.length; d++) {
                            if (b.elements[d].combinator.value !== c.elements[d].combinator.value && (0 !== d || (b.elements[d].combinator.value || " ") !== (c.elements[d].combinator.value || " "))) return !1;
                            if (!this.isElementValuesEqual(b.elements[d].value, c.elements[d].value)) return !1
                        }
                        return !0
                    }
                    return !1
                },
                extendSelector: function(b, c, d) {
                    var e, f, g, h, i, j = 0,
                        k = 0,
                        l = [];
                    for (e = 0; e < b.length; e++) h = b[e], f = c[h.pathIndex], g = new a.Element(h.initialCombinator, d.elements[0].value, d.elements[0].index, d.elements[0].currentFileInfo), h.pathIndex > j && k > 0 && (l[l.length - 1].elements = l[l.length - 1].elements.concat(c[j].elements.slice(k)), k = 0, j++), i = f.elements.slice(k, h.index).concat([g]).concat(d.elements.slice(1)), j === h.pathIndex && e > 0 ? l[l.length - 1].elements = l[l.length - 1].elements.concat(i) : (l = l.concat(c.slice(j, h.pathIndex)), l.push(new a.Selector(i))), j = h.endPathIndex, k = h.endPathElementIndex, k >= c[j].elements.length && (k = 0, j++);
                    return j < c.length && k > 0 && (l[l.length - 1].elements = l[l.length - 1].elements.concat(c[j].elements.slice(k)), j++), l = l.concat(c.slice(j, c.length))
                },
                visitRulesetOut: function() {},
                visitMedia: function(a) {
                    var b = a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length - 1]);
                    b = b.concat(this.doExtendChaining(b, a.allExtends)), this.allExtendsStack.push(b)
                },
                visitMediaOut: function() {
                    this.allExtendsStack.length = this.allExtendsStack.length - 1
                },
                visitDirective: function(a) {
                    var b = a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length - 1]);
                    b = b.concat(this.doExtendChaining(b, a.allExtends)), this.allExtendsStack.push(b)
                },
                visitDirectiveOut: function() {
                    this.allExtendsStack.length = this.allExtendsStack.length - 1
                }
            }
        }(c("./tree")), function(a) {
            a.sourceMapOutput = function(a) {
                this._css = [], this._rootNode = a.rootNode, this._writeSourceMap = a.writeSourceMap, this._contentsMap = a.contentsMap, this._contentsIgnoredCharsMap = a.contentsIgnoredCharsMap, this._sourceMapFilename = a.sourceMapFilename, this._outputFilename = a.outputFilename, this._sourceMapURL = a.sourceMapURL, a.sourceMapBasepath && (this._sourceMapBasepath = a.sourceMapBasepath.replace(/\\/g, "/")), this._sourceMapRootpath = a.sourceMapRootpath, this._outputSourceFiles = a.outputSourceFiles, this._sourceMapGeneratorConstructor = a.sourceMapGenerator || c("source-map").SourceMapGenerator, this._sourceMapRootpath && "/" !== this._sourceMapRootpath.charAt(this._sourceMapRootpath.length - 1) && (this._sourceMapRootpath += "/"), this._lineNumber = 0, this._column = 0
            }, a.sourceMapOutput.prototype.normalizeFilename = function(a) {
                return a = a.replace(/\\/g, "/"), this._sourceMapBasepath && 0 === a.indexOf(this._sourceMapBasepath) && (a = a.substring(this._sourceMapBasepath.length), ("\\" === a.charAt(0) || "/" === a.charAt(0)) && (a = a.substring(1))), (this._sourceMapRootpath || "") + a
            }, a.sourceMapOutput.prototype.add = function(a, b, c, d) {
                if (a) {
                    var e, f, g, h, i;
                    if (b) {
                        var j = this._contentsMap[b.filename];
                        this._contentsIgnoredCharsMap[b.filename] && (c -= this._contentsIgnoredCharsMap[b.filename], 0 > c && (c = 0), j = j.slice(this._contentsIgnoredCharsMap[b.filename])), j = j.substring(0, c), f = j.split("\n"), h = f[f.length - 1]
                    }
                    if (e = a.split("\n"), g = e[e.length - 1], b) if (d) for (i = 0; i < e.length; i++) this._sourceMapGenerator.addMapping({
                        generated: {
                            line: this._lineNumber + i + 1,
                            column: 0 === i ? this._column : 0
                        },
                        original: {
                            line: f.length + i,
                            column: 0 === i ? h.length : 0
                        },
                        source: this.normalizeFilename(b.filename)
                    });
                    else this._sourceMapGenerator.addMapping({
                            generated: {
                                line: this._lineNumber + 1,
                                column: this._column
                            },
                            original: {
                                line: f.length,
                                column: h.length
                            },
                            source: this.normalizeFilename(b.filename)
                        });
                    1 === e.length ? this._column += g.length : (this._lineNumber += e.length - 1, this._column = g.length), this._css.push(a)
                }
            }, a.sourceMapOutput.prototype.isEmpty = function() {
                return 0 === this._css.length
            }, a.sourceMapOutput.prototype.toCSS = function(a) {
                if (this._sourceMapGenerator = new this._sourceMapGeneratorConstructor({
                        file: this._outputFilename,
                        sourceRoot: null
                    }), this._outputSourceFiles) for (var b in this._contentsMap) if (this._contentsMap.hasOwnProperty(b)) {
                    var c = this._contentsMap[b];
                    this._contentsIgnoredCharsMap[b] && (c = c.slice(this._contentsIgnoredCharsMap[b])), this._sourceMapGenerator.setSourceContent(this.normalizeFilename(b), c)
                }
                if (this._rootNode.genCSS(a, this), this._css.length > 0) {
                    var d, e = JSON.stringify(this._sourceMapGenerator.toJSON());
                    this._sourceMapURL ? d = this._sourceMapURL : this._sourceMapFilename && (d = this.normalizeFilename(this._sourceMapFilename)), this._writeSourceMap ? this._writeSourceMap(e) : d = "data:application/json," + encodeURIComponent(e), d && this._css.push("/*# sourceMappingURL=" + d + " */")
                }
                return this._css.join("")
            }
        }(c("./tree"));
        var y = /^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);
        w.env = w.env || ("127.0.0.1" == location.hostname || "0.0.0.0" == location.hostname || "localhost" == location.hostname || location.port && location.port.length > 0 || y ? "development" : "production");
        var z = {
            debug: 3,
            info: 2,
            errors: 1,
            none: 0
        };
        if (w.logLevel = "undefined" != typeof w.logLevel ? w.logLevel : "development" === w.env ? z.debug : z.errors, w.async = w.async || !1, w.fileAsync = w.fileAsync || !1, w.poll = w.poll || (y ? 1e3 : 1500), w.functions) for (var A in w.functions) w.functions.hasOwnProperty(A) && (w.tree.functions[A] = w.functions[A]);
        var B = /!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);
        B && (w.dumpLineNumbers = B[1]);
        var C = /^text\/(x-)?less$/,
            D = null,
            E = {};
        if (w.watch = function() {
                return w.watchMode || (w.env = "development", v()), this.watchMode = !0, !0
            }, w.unwatch = function() {
                return clearInterval(w.watchTimer), this.watchMode = !1, !1
            }, /!watch/.test(location.hash) && w.watch(), "development" != w.env) try {
            D = "undefined" == typeof a.localStorage ? null : a.localStorage
        } catch (F) {}
        var G = document.getElementsByTagName("link");
        w.sheets = [];
        for (var H = 0; H < G.length; H++)("stylesheet/less" === G[H].rel || G[H].rel.match(/stylesheet/) && G[H].type.match(C)) && w.sheets.push(G[H]);
        w.modifyVars = function(a) {
            w.refresh(!1, a)
        }, w.refresh = function(a, b) {
            var c, e;
            c = e = new Date, u(function(a, b, f, i, k) {
                if (a) return j(a, i.href);
                if (k.local) d("loading " + i.href + " from cache.", z.info);
                else {
                    d("parsed " + i.href + " successfully.", z.debug);
                    var l = b.toCSS(w);
                    l = h(l), g(l, i, k.lastModified)
                }
                d("css for " + i.href + " generated in " + (new Date - e) + "ms", z.info), 0 === k.remaining && d("less has finished. css generated in " + (new Date - c) + "ms", z.info), e = new Date
            }, a, b), n(b)
        }, w.refreshStyles = n, w.Parser.fileLoader = s, w.refresh("development" === w.env), "function" == typeof define && define.amd && define(function() {
            return w
        })
    }(window);;

var random_color_step = 1;
var custom_style_set = false;
var current_edit_img = null;
var allow_upload_img = null;
var current_edit_msg_id = '';
var current_editor;
var replace_full_color = false;
var replace_clear_interval = null;

function strip_stack_span(html) {
    var docObj = $('<div>' + html + '</div>');
    docObj.find('li,colgroup,a').each(function() {
        if ($.trim($(this).text()) == "" && $(this).find('img').size() == 0) {
            $(this).remove();
        }
    });
    var has_secspan = false;
    do {
        has_secspan = false;
        docObj.find('span:has(span)').each(function(i) {
            var innerobj = $(this).find('> span');
            if (innerobj.size() > 1) {
                $(this).find('span').each(function() {
                    if ($.trim($(this).text()) == "") {
                        $(this).replaceWith($(this).html());
                    }
                })
                return;
            } else if (innerobj.size() == 0) {
                return;
            }
            if ($.trim($(this).text()) == $.trim(innerobj.text())) {
                has_secspan = true;
                var style = $(this).attr('style');
                var innserstyle = innerobj.attr('style');
                var newStyle = '';
                if (style && style != "") {
                    newStyle += ';' + style;
                }
                if (innserstyle && innserstyle != "") {
                    newStyle += ';' + innserstyle;
                }
                var new_html = '';
                $(this).find('> *').each(function() {
                    if (this.tagName == "SPAN") {
                        new_html += $(innerobj).html();
                    } else {
                        new_html += $(this).prop('outerHTML');
                    }
                });
                $(this).attr('style', newStyle).html(new_html);
            }
        });
    } while (has_secspan);
    return docObj.html();
}

function strip_tags(input, allowed) {
    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');
    var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
        commentsAndPhpTags = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
    return input.replace(commentsAndPhpTags, '').replace(tags, function($0, $1) {
        return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
    });
}

function htmlspecialchars_decode(string, quote_style) {
    var optTemp = 0,
        i = 0,
        noquotes = false;
    if (typeof quote_style === 'undefined') {
        quote_style = 2;
    }
    string = string.toString().replace(/&lt;/g, '<').replace(/&gt;/g, '>');
    var OPTS = {
        'ENT_NOQUOTES': 0,
        'ENT_HTML_QUOTE_SINGLE': 1,
        'ENT_HTML_QUOTE_DOUBLE': 2,
        'ENT_COMPAT': 2,
        'ENT_QUOTES': 3,
        'ENT_IGNORE': 4
    };
    if (quote_style === 0) {
        noquotes = true;
    }
    if (typeof quote_style !== 'number') {
        quote_style = [].concat(quote_style);
        for (i = 0; i < quote_style.length; i++) {
            if (OPTS[quote_style[i]] === 0) {
                noquotes = true;
            } else if (OPTS[quote_style[i]]) {
                optTemp = optTemp | OPTS[quote_style[i]];
            }
        }
        quote_style = optTemp;
    }
    if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {
        string = string.replace(/&#0*39;/g, "'");
    }
    if (!noquotes) {
        string = string.replace(/&quot;/g, '"');
    }
    string = string.replace(/&amp;/g, '&');
    return string;
}

function str_replace(search, replace, subject, count) {
    var i = 0,
        j = 0,
        temp = '',
        repl = '',
        sl = 0,
        fl = 0,
        f = [].concat(search),
        r = [].concat(replace),
        s = subject,
        ra = Object.prototype.toString.call(r) === '[object Array]',
        sa = Object.prototype.toString.call(s) === '[object Array]';
    s = [].concat(s);
    if (count) {
        this.window[count] = 0;
    }
    for (i = 0, sl = s.length; i < sl; i++) {
        if (s[i] === '') {
            continue;
        }
        for (j = 0, fl = f.length; j < fl; j++) {
            temp = s[i] + '';
            repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];
            s[i] = (temp).split(f[j]).join(repl);
            if (count && s[i] !== temp) {
                this.window[count] += (temp.length - s[i].length) / f[j].length;
            }
        }
    }
    return sa ? s : s[0];
}

function getSelectionHtml() {
    var range = current_editor.selection.getRange();
    range.select();
    var selectionObj = current_editor.selection.getNative();
    var rangeObj = selectionObj.getRangeAt(0);
    var docFragment = rangeObj.cloneContents();
    var testDiv = document.createElement("div");
    testDiv.appendChild(docFragment);
    var selectHtml = testDiv.innerHTML;
    if (selectHtml == "") {
        return "";
    } else {
        return parse135EditorHtml(selectHtml);
    }
}

function getDealingHtml() {
    var html = getSelectionHtml();
    if (html == "") {
        if (current_editor.currentActive135Item()) {
            return $(current_editor.currentActive135Item()).html();
        } else {
            return getEditorHtml();
        }
    } else {
        return html;
    }
}

function setDealingHtml(newHtml) {
    newHtml = $.trim(newHtml);
    var html = getSelectionHtml();
    if (html != "") {
        insertHtml(newHtml);
        custom_style_set = true;
        current_editor.undoManger.save();
        return;
    } else if (current_editor.currentActive135Item()) {
        $(current_editor.currentActive135Item()).html(newHtml);
        current_editor.undoManger.save();
        return;
    } else {
        current_editor.setContent(newHtml);
        current_editor.undoManger.save();
        return;
    }
}

function parse135EditorHtml(html, outer_falg) {
    html = parseMmbizUrl(html);
    var htmlObj = $('<div>' + html + ' </div>');
    var htmlTable = htmlObj.find('table');
    htmlObj.find('h1,h2,h3,h4,h5,h6,h7').css('font-weight', 'bold');
    htmlObj.find('h1').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '32px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '36px';
        }
    });
    htmlObj.find('h2').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '27px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '29px';
        }
    });
    htmlObj.find('h3').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '19px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '23px';
        }
    });
    htmlObj.find('h4').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '16px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '19px';
        }
    });
    htmlObj.find('h5').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '14px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '18px';
        }
    });
    htmlObj.find('h6').each(function() {
        if (!this.style.fontSize) {
            this.style.fontSize = '12px';
        }
        if (!this.style.lineHeight) {
            this.style.lineHeight = '14px';
        }
    });
    htmlObj.find('.135editor').each(function() {
        $(this).css({
            'border': '0 none',
            'padding': 0
        });
    });
    htmlObj.find('.135article').each(function() {
        $(this).removeAttr('style');
        $(this).removeAttr('class');
    });
    htmlObj.find('p').css('white-space', 'normal');
    htmlObj.find('*').each(function() {
        if ($(this).hasClass('article135')) {
            return;
        } else if (this.tagName == "IMG" || this.tagName == "BR" || this.tagName == "H1" || this.tagName == "H2" || this.tagName == "H3" || this.tagName == "H4" || this.tagName == "H5" || this.tagName == "H6") {
            return;
        } else if (this.tagName == "P" || this.tagName == "STRONG" || this.tagName == "SPAN" || this.tagName == "B" || this.tagName == "EM" || this.tagName == "I") {
            return;
        } else if (this.tagName == "OL" || this.tagName == "UL" || this.tagName == "DL") {
            this.style.margin = '0px';
            this.style.padding = '0 0 0 30px';
            return;
        }
        this.style.boxSizing = 'border-box';
        if (this.style.padding == "" && this.style.paddingLeft == "" && this.style.paddingRight == "" && this.style.paddingTop == "" && this.style.paddingBottom == "") {
            this.style.padding = '0px';
        }
        if (this.style.margin == "" && this.style.marginLeft == "" && this.style.marginRight == "" && this.style.marginTop == "" && this.style.marginBottom == "") {
            this.style.margin = '0px';
        }
    });
    htmlObj.find('*').each(function() {
        if (this.style.transform) {
            setElementTransform(this, this.style.transform);
        }
    });
    var html = htmlObj.html();
    if ($.trim(html) == "") {
        return "";
    }
    if (htmlObj.find('.article135').size() > 0) {
        var childs = htmlObj.find('> *');
        if (childs.size() == 1 && childs.eq(0).hasClass('article135')) {
            return htmlObj.html();
        } else {
            htmlObj.find('.article135').each(function() {
                var inner_style = $(this).attr('style');
                if (typeof(inner_style) == 'undefined' || inner_style == '') {
                    $(this).replaceWith($(this).html());
                }
            });
        }
    }
    html = htmlObj.prop("innerHTML");
    html = html.replace('transform:', 'transform: ');
    return html;
}

function getEditorHtml() {
    $(current_editor.selection.document).find('p').each(function() {
        if ($.trim($(this).html()) == "&nbsp;") {
            $(this).html('<br/>');
        }
        if ($.trim($(this).text()) == "") {
            if ($(this).find('img').size() > 0) {
                return;
            }
            if ($(this).find('br').size() > 0) {
                $(this).html('<br/>');
            } else {
                if (this.style.clear != "both") {
                    $(this).remove();
                }
            }
        }
    });
    var html = parse135EditorHtml(current_editor.getContent());
    return '<section class="article135" label="powered by 135editor.com" style="font-family:微软雅黑;font-size:16px;">' + html + '</section>';
}

function setElementTransform(dom, transform) {
    if (transform == "none") return;
    dom.style.position = 'static';
    var sty = $(dom).attr('style');
    sty = sty.replace(/\s*[^\-]transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim, '');
    sty = sty.replace(/\s*-[a-z]+-transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim, '');
    sty = sty + ';transform: ' + transform + ';-webkit-transform: ' + transform + ';-moz-transform: ' + transform + ';-ms-transform: ' + transform + ';-o-transform: ' + transform + '; box-sizing: border-box;';
    sty = sty.replace(';;', ';');
    $(dom).attr('style', sty);
    $(dom).parent().css({
        'box-sizing': 'border-box',
        'display': 'block',
        'position': 'static'
    });
}

function parseMmbizUrl(html) {
    html = html.replace(/https:\/mmbiz./g, 'https://mmbiz.');
    html = html.replace(/http:\/\/mmbiz.qpic.cn/g, 'https://mmbiz.qlogo.cn');
    html = html.replace(/https:\/\/mmbiz.qpic.cn/g, 'https://mmbiz.qlogo.cn');
    html = html.replace(/http:\/\/mmbiz.qlogo.cn/g, 'https://mmbiz.qlogo.cn');
    return html;
}

function setEditorHtml(newHtml) {
    newHtml = strip_stack_span(newHtml);
    newHtml = parseMmbizUrl(newHtml);
    current_editor.undoManger.save();
    current_editor.setContent(newHtml);
    current_editor.undoManger.save();
}

function insertHtml(html) {
    html = parseMmbizUrl(html);
    var select_html = getSelectionHtml();
    if (select_html != "") {
        select_html = strip_tags(select_html, '<br><p><h1><h2><h3><h4><h5><h6><img>');
        var select_obj = $('<div>' + select_html + '</div>');
        select_obj.find('*').each(function() {
            $(this).removeAttr('style');
            $(this).removeAttr('class');
            $(this).removeAttr('placeholder');
        });
        var obj = $('<div>' + html + '</div>');
        obj.find('> .135editor').siblings('p').each(function(i) {
            if ($(this).html() == "" || $(this).html() == "&nbsp;" || $(this).html() == "<br>" || $(this).html() == "<br/>") {
                if (typeof $(this).attr('style') == 'undefined') {
                    $(this).remove();
                }
            }
        });
        select_obj.find('h1,h2,h3,h4,h5,h6').each(function(i) {
            var title = obj.find('.135title').eq(i);
            if (title && title.size() > 0) {
                title.html($.trim($(this).text()));
                $(this).remove();
            } else {
                $(this).replaceWith('<p>' + $(this).text() + '</p>');
            }
        });
        var bgimg_size = obj.find('.135bg').size();
        select_obj.find('img').each(function(i) {
            var bgimg = obj.find('.135bg').eq(i);
            if (bgimg && bgimg.size() > 0) {
                bgimg.css('background-image', 'url(' + $(this).attr('src') + ')');
                $(this).remove();
            }
        });
        select_obj.find('img').each(function(i) {
            var img = obj.find('img').eq(i);
            if (img && img.size() > 0) {
                img.attr('src', $(this).attr('src'));
                $(this).remove();
            }
        });
        var brushs = obj.find('.135brush');
        var total = brushs.size();
        if (total > 0) {
            if (total == 1) {
                var brush_item = obj.find('.135brush:first');
                if (brush_item.data('brushtype') == 'text') {
                    brush_item.html($.trim(select_obj.text()));
                } else {
                    select_obj.contents().each(function(i) {
                        var $this = this;
                        if (this.tagName == "IMG") {
                            return;
                        };
                        if ($.trim($($this).text()) == "" || this.tagName == 'BR' || $(this).html() == "" || $(this).html() == "&nbsp;" || $(this).html() == "<br>" || $(this).html() == "<br/>") {
                            $(this).remove();
                        }
                    });
                    var style = brush_item.data('style');
                    if (style) {
                        select_obj.find('*').each(function() {
                            $(this).attr('style', style);
                        });
                    }
                    var html = select_obj.html();
                    if (html != "") {
                        brush_item.html(html);
                    }
                }
            } else {
                select_obj.contents().each(function(i) {
                    var $this = this;
                    if ($this.nodeType == 3) {
                        $this = $('<p>' + $(this).text() + '</p>').get(0);
                    }
                    if (i < total) {
                        var brush_item = brushs.eq(i);
                        if (brush_item.data('brushtype') == 'text') {
                            brush_item.html($.trim($($this).text()));
                        } else {
                            var style = brush_item.data('style');
                            if (style) {
                                $($this).attr('style', style);
                            }
                            brush_item.empty().append($($this));
                        }
                    } else {
                        var brush_item = brushs.eq(total - 1);
                        if (brush_item.data('brushtype') == 'text') {
                            brush_item.append($($this).text());
                        } else {
                            var style = brush_item.data('style');
                            if (style) {
                                $($this).attr('style', style);
                            }
                            brush_item.append($($this));
                        }
                    }
                });
            }
        }
        html = obj.html();
        current_editor.execCommand('insertHtml', html);
        current_editor.undoManger.save();
        return true;
    } else {}
    current_editor.execCommand('insertHtml', html);
    current_editor.undoManger.save();
    return true;
}

function resetMapUrl() {
    $(current_editor.selection.document).find('img').each(function() {
        var $img = $(this);
        var mapurl = $(this).attr('mapurl');
        if (mapurl) {
            var usemap = $(this).attr('usemap');
            if (usemap) {
                $(usemap).each(function() {
                    $(this).remove();
                })
            }
            usemap = randomString(10);
            $img.attr('usemap', usemap);
            $img.after('<map name="' + usemap + '" id="' + usemap + '" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="' + mapurl + '" shape="default" target="_blank"/></map>' + '<section>' + '<map name="' + usemap + '" id="' + usemap + '" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="' + mapurl + '" shape="default" target="_blank"/></map>' + '</section>');
        }
    });
}

function setBackgroundColor(bgcolor, color, history) {
    if (isGreyColor(bgcolor)) {
        return false;
    }
    if (history) {
        current_editor.undoManger.save();
    }
    var active_item = current_editor.currentActive135Item();
    if (!replace_full_color && active_item) {
        parseObject(active_item, bgcolor, color);
        active_item.attr('data-color', bgcolor);
        active_item.attr('data-custom', bgcolor);
        current_editor.undoManger.save();
        return;
    } else {
        if (!replace_full_color) {
            return;
        }
        clean_135helper();
        parseObject($(current_editor.selection.document), bgcolor, color);
        $(current_editor.selection.document).find('.135editor').each(function() {
            $(this).attr('data-color', bgcolor);
        });
    }
    if (history) {
        current_editor.undoManger.save();
    }
    return;
}

function parseObject(obj, bgcolor, color) {
    if (isGreyColor(bgcolor)) {
        return false;
    }
    obj.find("*").each(function() {
        if (!this.nodeName || this.nodeName == "HTML" || this.nodeName == "HEAD" || this.nodeName == "STYLE" || this.nodeName == "LINK" || this.nodeName == "BODY") {
            return;
        }
        if (this.nodeName == "HR" || this.nodeName == "hr") {
            var style = $(this).attr('style');
            $(this).attr('style', style + ';border-color:' + bgcolor + ';');
            return;
        }
        if (this.nodeName == "" || $(this).attr('style') == "") {
            return;
        }
        if (0) {
            if ($(this).hasClass('135editor') && $(this).attr('data-custom')) {
                return;
            }
            if (replace_full_color) {
                var p135items = $(this).parents('.135editor');
                for (var i = 0; i < p135items.size(); i++) {
                    if (p135items.eq(i).attr('data-custom')) {
                        return;
                    }
                }
            }
        }
        if ($(this).attr('data-ct') == 'fix') {
            return;
        }
        var oldColor = $(this).parents('.135editor:first').attr('data-color');
        var style = $(this).attr('style');
        if (oldColor == bgcolor) {
            return;
        }
        if (oldColor && style && style.indexOf('text-shadow') >= 0) {
            var newstyle = str_replace(rgb2hex(oldColor), bgcolor, style);
            newstyle = str_replace(hex2rgb(oldColor), bgcolor, newstyle);
            $(this).attr('style', newstyle);
        }
        var persent = $(this).attr('data-clessp') ? $(this).attr('data-clessp') : '50%';
        var hasSetBgColor = false;
        var txt_color;
        var bgC = $(this).get(0).style.backgroundColor;
        if (!bgC || bgC === 'initial' || bgC === 'transparent' || bgC === "") {
            var fc = $(this).get(0).style.color;
            if (fc && fc != "" && fc != 'inherit' && !isGreyColor(fc)) {
                if ($(this).attr('data-txtless')) {
                    var txtpersent = $(this).attr('data-txtlessp') ? $(this).attr('data-txtlessp') : '30%';
                    txt_color = getColor(rgb2hex(bgcolor), $(this).attr('data-txtless'), txtpersent);
                    $(this).css('color', txt_color);
                } else if (isLightenColor(bgcolor)) {
                    txt_color = getColor(rgb2hex(bgcolor), 'darken', persent);
                    $(this).css('color', txt_color);
                } else {
                    var parentBgColor = getPrarentBgColor($(this));
                    if (parentBgColor == bgcolor) {
                        txt_color = getColor(rgb2hex(bgcolor), 'lighten', persent);
                        $(this).css('color', txt_color);
                    } else {
                        $(this).css('color', bgcolor);
                    }
                }
            }
        } else {
            if ($(this).attr('data-bgless')) {
                var bgpersent = $(this).attr('data-bglessp') ? $(this).attr('data-bglessp') : '30%';
                var bg_color;
                if ($(this).attr('data-bgless') == "true" || $(this).attr('data-bgless') == true) {
                    if (isLightenColor(bgcolor)) {
                        bg_color = getColor(rgb2hex(bgcolor), 'darken', bgpersent);
                        bg_color = getColor(rgb2hex(bg_color), 'saturate', '20%');
                    } else {
                        bg_color = getColor(rgb2hex(bgcolor), 'lighten', bgpersent);
                    }
                } else {
                    bg_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bgless'), bgpersent);
                }
                if ($(this).attr('data-bgopacity')) {
                    bg_color = getColor(rgb2hex(bg_color), 'fadeout', $(this).attr('data-bgopacity'));
                }
                hasSetBgColor = true;
                $(this).css('backgroundColor', bg_color);
                if (isLightenColor(bg_color)) {
                    txt_color = getColor(rgb2hex(bg_color), 'darken', persent);
                    txt_color = getColor(rgb2hex(txt_color), 'saturate', '20%');
                } else {
                    txt_color = color;
                }
                $(this).css('color', txt_color);
            } else if ($(this).attr('data-bgopacity')) {
                var bg_color;
                bg_color = getColor(rgb2hex(bgcolor), 'fadeout', $(this).attr('data-bgopacity'));
                if (isLightenColor(bg_color)) {
                    txt_color = getColor(rgb2hex(bg_color), 'darken', persent)
                } else {
                    txt_color = color;
                }
                $(this).css('backgroundColor', bg_color);
                $(this).css('color', txt_color);
            } else if (!isGreyColor(bgC)) {
                hasSetBgColor = true;
                $(this).css('backgroundColor', bgcolor);
                var fc = $(this).get(0).style.color;
                if (fc != 'inherit') {
                    if (isLightenColor(bgcolor)) {
                        txt_color = getColor(rgb2hex(bgcolor), 'darken', persent)
                    } else {
                        txt_color = color;
                    }
                    $(this).css('color', txt_color);
                }
            } else {
                var fc = $(this).get(0).style.color;
                if (fc && fc != "" && fc != 'inherit' && !isGreyColor(fc)) {
                    if ($(this).css('backgroundColor') != bgcolor) {
                        $(this).css('color', bgcolor);
                    }
                }
            }
        }
        if ($(this).attr('data-bcless')) {
            var bc_color = bgcolor;
            if (isLightenColor(bgcolor)) {
                var persent = $(this).attr('data-bclessp') ? $(this).attr('data-bclessp') : '20%';
                if ($(this).attr('data-bcless') == 'darken') {
                    bc_color = getColor(rgb2hex(bgcolor), 'darken', persent);
                    bc_color = getColor(rgb2hex(bc_color), 'saturate', '30%');
                } else {
                    bc_color = getColor(rgb2hex(bgcolor), 'darken', persent);
                    if ($(this).attr('data-bcless') && $(this).attr('data-bcless') != 'auto' && $(this).attr('data-bcless') != 'true') {
                        bc_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bcless'), persent);
                    }
                }
            } else {
                var persent = $(this).attr('data-bclessp') ? $(this).attr('data-bclessp') : '20%';
                if ($(this).attr('data-bcless') == 'lighten' || $(this).attr('data-bcless') == 'auto' || $(this).attr('data-bcless') == 'true') {
                    bc_color = getColor(rgb2hex(bgcolor), 'lighten', persent);
                    bc_color = getColor(rgb2hex(bc_color), 'desaturate', '20%');
                    bc_color = getColor(rgb2hex(bc_color), 'fadein', '20%');
                } else {
                    if ($(this).attr('data-bcless') && $(this).attr('data-bcless') != 'auto' && $(this).attr('data-bcless') != 'true') {
                        bc_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bcless'), persent);
                    }
                }
            }
            if ($(this).attr('data-bdopacity')) {
                bc_color = getColor(rgb2hex(bc_color), 'fadeout', $(this).attr('data-bdopacity'));
            }
            if (this.style.borderBottomColor || this.style.borderTopColor || this.style.borderLeftColor || this.style.borderRightColor) {
                if (this.style.borderBottomColor != 'transparent' && this.style.borderBottomColor != 'initial') {
                    this.style.borderBottomColor = bc_color;
                }
                if (this.style.borderTopColor != 'transparent' && this.style.borderTopColor != 'initial') {
                    this.style.borderTopColor = bc_color;
                }
                if (this.style.borderLeftColor != 'transparent' && this.style.borderLeftColor != 'initial') {
                    this.style.borderLeftColor = bc_color;
                }
                if (this.style.borderRightColor != 'transparent' && this.style.borderRightColor != 'initial') {
                    this.style.borderRightColor = bc_color;
                }
            } else {
                if (this.style.borderColor !== 'transparent' && this.style.borderColor !== 'initial') {
                    this.style.borderColor = bc_color;
                }
            }
        } else {
            var bc_color = bgcolor;
            if ($(this).attr('data-bdopacity')) {
                bc_color = getColor(rgb2hex(bgcolor), 'fadeout', $(this).attr('data-bdopacity'));
            }
            if (this.style.borderBottomColor || this.style.borderTopColor || this.style.borderLeftColor || this.style.borderRightColor) {
                if (this.style.borderBottomColor != 'transparent' && this.style.borderBottomColor != 'initial') {
                    setColor(this, 'borderBottomColor', bc_color);
                }
                if (this.style.borderTopColor != 'transparent' && this.style.borderTopColor != 'initial') {
                    setColor(this, 'borderTopColor', bc_color);
                }
                if (this.style.borderLeftColor != 'transparent' && this.style.borderLeftColor != 'initial') {
                    setColor(this, 'borderLeftColor', bc_color);
                }
                if (this.style.borderRightColor != 'transparent' && this.style.borderRightColor != 'initial') {
                    setColor(this, 'borderRightColor', bc_color);
                }
            } else {
                var c = this.style.borderColor;
                if (c !== 'transparent' && c !== 'initial' && !isGreyColor(c)) {
                    this.style.borderColor = bc_color;
                }
            }
        }
        var bgimg = $(this).css('backgroundImage');
        if (bgimg.substring(0, 24) == '-webkit-linear-gradient(') {
            var colors;
            var type;
            if (bgimg.substring(0, 30) == '-webkit-linear-gradient(left, ') {
                type = 'left';
                colors = bgimg.substring(30, (bgimg.length - 1));
            } else if (bgimg.substring(0, 29) == '-webkit-linear-gradient(top, ') {
                type = 'top';
                colors = bgimg.substring(29, (bgimg.length - 1));
            } else if (bgimg.substring(0, 31) == '-webkit-linear-gradient(right, ') {
                type = 'right';
                colors = bgimg.substring(31, (bgimg.length - 1));
            } else if (bgimg.substring(0, 32) == '-webkit-linear-gradient(bottom, ') {
                type = 'bottom';
                colors = bgimg.substring(32, (bgimg.length - 1));
            }
            if (colors) {
                var color_arr = colors.split('),');
                var txt_color, gradient_color, main_color;
                if ($(this).attr('data-bgless')) {
                    var bgpersent = $(this).attr('data-bglessp') ? $(this).attr('data-bglessp') : '30%';
                    main_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bgless'), bgpersent);
                } else if (isLightenColor(bgcolor)) {
                    main_color = getColor(rgb2hex(bgcolor), 'saturate', '20%');
                } else {
                    main_color = getColor(rgb2hex(bgcolor), 'lighten', '5%');
                    main_color = getColor(rgb2hex(main_color), 'desaturate', '10%');
                    main_color = getColor(rgb2hex(main_color), 'fadein', '20%');
                }
                if (isLightenColor(main_color)) {
                    txt_color = getColor(rgb2hex(main_color), 'darken', '50%');
                    txt_color = getColor(rgb2hex(txt_color), 'saturate', '30%');
                } else {
                    txt_color = getColor(rgb2hex(main_color), 'lighten', '50%');
                }
                if ($(this).attr('data-gradient')) {
                    gradient_color = $(this).attr('data-gradient');
                } else {
                    gradient_color = getColor(rgb2hex(main_color), 'lighten', '30%');
                }
                if (color_arr.length == 3) {
                    $(this).css('backgroundImage', '-webkit-linear-gradient(' + type + ', ' + main_color + ', ' + gradient_color + ', ' + main_color + ')');
                    $(this).css('color', txt_color);
                } else if (color_arr.length == 2) {
                    $(this).css('backgroundImage', '-webkit-linear-gradient(' + type + ', ' + main_color + ', ' + gradient_color + ')');
                    $(this).css('color', txt_color);
                }
            }
        }
    });
    return obj;
}

function parseHtml(html, bgcolor, color) {
    var obj = $('<div id="editor-content">' + html + "</div>");
    obj = parseObject(obj, bgcolor, color);
    var result = obj.html();
    obj = null;
    return result;
}

function style_click(id) {
    var url = 'http://www.135editor.com/editor_styles/click_num';
    ajaxAction(url, {
        id: id
    });
    return false;
}

function setFavorColor(colors, callback) {
    var url = 'http://www.135editor.com/editor_styles/setFavorColor';
    ajaxAction(url, {
        colors: colors
    }, null, callback);
}

function setColor(obj, colorType, color) {
    var c = $(obj).css(colorType);
    if (c === 'transparent' || c === 'initial') {
        return;
    } else {
        if (!isGreyColor(c)) {
            $(obj).css(colorType, color);
        }
    }
}

function getPrarentBgColor($obj) {
    if (!$obj.parent().get(0)) {
        return "";
    }
    if ($obj.parent().get(0).tagName && $obj.parent().get(0).tagName == 'BODY') {
        if ($obj.parent().get(0).style) {
            var bgC = $obj.parent().get(0).style.backgroundColor;
            return bgC;
        } else {
            return "";
        }
    }
    if ($obj.parent().get(0).style) {
        var bgC = $obj.parent().get(0).style.backgroundColor;
        if (!bgC || bgC === 'initial' || bgC === 'transparent' || bgC === "") {
            return getPrarentBgColor($obj.parent());
        } else {
            return bgC;
        }
    } else {
        return "";
    }
}

function rgb2hex(color) {
    rgb = color.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
    return (rgb && rgb.length === 4) ? "#" + ("0" + parseInt(rgb[1], 10).toString(16)).slice(-2) + ("0" + parseInt(rgb[2], 10).toString(16)).slice(-2) + ("0" + parseInt(rgb[3], 10).toString(16)).slice(-2) : color;
}

function hex2rgb(color) {
    var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
    var sColor = color.toLowerCase();
    if (sColor && reg.test(sColor)) {
        if (sColor.length === 4) {
            var sColorNew = "#";
            for (var i = 1; i < 4; i += 1) {
                sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
            }
            sColor = sColorNew;
        }
        var sColorChange = [];
        for (var i = 1; i < 7; i += 2) {
            sColorChange.push(parseInt("0x" + sColor.slice(i, i + 2)));
        }
        return "RGB(" + sColorChange.join(",") + ")";
    } else {
        return sColor;
    }
};

function isLightenColor(color) {
    var c = rgb2hex(color);
    var r = ("" + c.substring(1, 3));
    var g = ("" + c.substring(3, 5));
    var b = ("" + c.substring(5, 7));
    if (r > 'C0' && g > 'C0' && b > 'C0') {
        return true;
    } else {
        return false;
    }
}

function isGreyColor(color) {
    var c = rgb2hex(color);
    var r = "" + c.substring(1, 3);
    var g = "" + c.substring(3, 5);
    var b = "" + c.substring(5, 7);
    if (r == g && g == b) {
        return true;
    } else {
        return false;
    }
}
var less_parser = new less.Parser;

function getColor(color, type, num) {
    var str = '';
    less_parser.parse('*{color:' + type + '(' + color + ',' + num + ')}', function(err, tree) {
        str = tree.toCSS();
        str = str.replace(/\n/g, '').replace(/ /g, '').replace('*{color:', '').replace(';}', '');
    });
    return str;
}

function openTplModal() {
    $('#templateModal').modal('show');
    $('#template-modal-body').html('正在加载').load(BASEURL + '/editor_styles/myTemplates #my-templates', function() {
        $('#my-templates .nav-tabs a:first').tab('show')
    })
}

function set_style(styles) {
    ckeditors['WxMsgContent'].execCommand('removeFormat');
    var element = ckeditors['WxMsgContent'].getSelection().getStartElement();
    if (element.getName() == 'img') {
        element.setStyles(styles);
    } else {
        var style = new CKEDITOR.style({
            element: element.getName(),
            styles: styles
        });
        ckeditors['WxMsgContent'].applyStyle(style);
    }
}

function getPreferences(idx) {
    var cookieOpt = current_editor.getPreferences('editor135');
    if (cookieOpt && cookieOpt[idx]) {
        return cookieOpt[idx];
    }
    return null;
}

function setPreferences(key, value) {
    var cookieOpt = current_editor.getPreferences('editor135');
    var obj = {};
    if (typeof(key) == "string") {
        obj[key] = value;
    } else {
        obj = key;
    }
    if (!cookieOpt) cookieOpt = {};
    $.extend(cookieOpt, obj);
    current_editor.setPreferences('editor135', cookieOpt);
}

function applyParagraph(type) {
    var object;
    if (type == 'all') {
        var editor_document = current_editor.selection.document;
        object = $(editor_document);
    } else {
        if (!current_editor.currentActive135Item()) return;
        object = current_editor.currentActive135Item();
    }
    $(object).find('p').each(function() {
        $(this).css('lineHeight', $('#paragraph-lineHeight').val());
        $(this).css('fontFamily', $('#paragraph-fontFamily').val());
        $(this).css('fontSize', $('#paragraph-fontSize').val());
        $(this).css('textIndent', $('#paragraph-textIndent').val());
        $(this).css('paddingTop', $('#paragraph-paddingTop').val());
        $(this).css('paddingBottom', $('#paragraph-paddingBottom').val());
    })
}

function clean_135helper() {
    var editor_document = current_editor.selection.document;
    $(editor_document).find('.135editor').each(function() {
        $(this).css({
            'border': '0 none',
            'padding': 0
        });
    });
    current_editor.sync();
}

function showColorPlan(clientY) {
    if (current_editor) {
        var $container = $(current_editor.container);
        var offset = $container.offset();
        var width = $container.width();
        var height = $container.height();
        if (offset.left + width + $('#color-plan').width() < $(window).width()) {
            $('#color-plan').css('left', offset.left + width - 5);
        } else {
            $('#color-plan').css('left', offset.left - $('#color-plan').width());
        }
        if (clientY) {
            if (clientY - $(window).scrollTop() > $('#color-plan').height() / 2) {
                var top = clientY - $(window).scrollTop() - ($('#color-plan').height() / 2);
                if ($(window).height() - top > $('#color-plan').height()) {
                    $('#color-plan').css('bottom', 'auto');
                    if (top < offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop()) {
                        $('#color-plan').css('top', offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop());
                    } else if (top + $('#color-plan').height() > offset.top + $container.height() - $(window).scrollTop()) {
                        $('#color-plan').css('top', offset.top + $container.height() - $(window).scrollTop() - $('#color-plan').height() + 20);
                    } else {
                        $('#color-plan').css('top', top);
                    }
                } else {
                    $('#color-plan').css('top', 'auto');
                    $('#color-plan').css('bottom', 0);
                }
            } else {
                if ($(window).scrollTop() < offset.top + $container.find('.edui-editor-toolbarbox').height()) {
                    $('#color-plan').css('top', offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop());
                    $('#color-plan').css('bottom', 'auto');
                } else {
                    $('#color-plan').css('top', 0);
                    $('#color-plan').css('bottom', 'auto');
                }
            }
        } else {
            $('#color-plan').css('top', offset.top + height / 2 - 120 - $(window).scrollTop());
        }
        $('#color-plan').show();
    } else {
        $('#color-plan').show();
    }
}

function hideColorPlan() {
    $('#color-plan').hide();
}

function meitu_upload() {
    if (sso.check_userlogin()) {
        publishController.open_html_dialog('meitu-full');
        setTimeout(function() {
            $('#meitu-full').find('.modal-body .alert').remove();
        }, 6000);
        xiuxiu.setLaunchVars("titleVisible", 0);
        xiuxiu.setLaunchVars("maxFinalWidth", 600);
        xiuxiu.setLaunchVars("customMenu", ["decorate", "facialMenu", "puzzle"]);
        xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "meitu_full");
        xiuxiu.embedSWF("MeituFullContent", 3, 940, 600, "meitu_full");
        xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
        xiuxiu.setUploadType(2);
        xiuxiu.setUploadDataFieldName("upload");
        xiuxiu.onBeforeUpload = function(data, id) {
            var size = data.size;
            if (size > 2 * 1024 * 1024) {
                alert("图片不能超过2M");
                return false;
            }
            xiuxiu.setUploadArgs({
                'return': "xiuxiu",
                'remote_type': 'wechatUploadimg',
                'no_thumb': 1,
                'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
            }, id);
            return true;
        };
        xiuxiu.onUploadResponse = function(data, id) {
            try {
                var json = eval('(' + data + ')');
            } catch (e) {
                alert(data);
                return;
            }
            if (json.ret == -1) {
                showErrorMessage(json.error);
            } else {
                insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
                publishController.close_dialog();
            }
        };
        xiuxiu.onClose = function(id) {
            publishController.close_dialog();
        }
    } else {
        showErrorMessage('图片拼图属于付费功能。请付费购买图片使用功能后使用');
    }
}

function pingtu_upload() {
    if (sso.check_userlogin()) {
        publishController.open_html_dialog('meitu-pingtu');
        xiuxiu.setLaunchVars("titleVisible", 0);
        xiuxiu.setLaunchVars("maxFinalWidth", 600);
        xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "meitu_pingtu");
        xiuxiu.embedSWF("MeituPingTuContent", 2, 700, 500, "meitu_pingtu");
        xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
        xiuxiu.setUploadType(2);
        xiuxiu.setUploadDataFieldName("upload");
        xiuxiu.onBeforeUpload = function(data, id) {
            var size = data.size;
            if (size > 2 * 1024 * 1024) {
                alert("图片不能超过2M");
                return false;
            }
            xiuxiu.setUploadArgs({
                'return': "xiuxiu",
                'remote_type': 'wechatUploadimg',
                'no_thumb': 1,
                'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
            }, id);
            return true;
        };
        xiuxiu.onUploadResponse = function(data, id) {
            try {
                var json = eval('(' + data + ')');
            } catch (e) {
                alert(data);
                return;
            }
            if (json.ret == -1) {
                showErrorMessage(json.error);
            } else {
                insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
                publishController.close_dialog();
            }
        };
        xiuxiu.onClose = function(id) {
            publishController.close_dialog();
        }
    } else {
        showErrorMessage('图片拼图属于付费功能。请付费购买图片使用功能后使用');
    }
}

function edit_image(url) {
    if (sso.check_userlogin()) {
        publishController.open_html_dialog('meitu-beautify');
        xiuxiu.setLaunchVars("titleVisible", 0);
        xiuxiu.setLaunchVars("maxFinalWidth", 600);
        xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "beautify");
        xiuxiu.embedSWF("MeituContent", 1, 700, 500, "beautify");
        xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
        xiuxiu.setUploadType(2);
        xiuxiu.setUploadDataFieldName("upload");
        xiuxiu.onBeforeUpload = function(data, id) {
            var size = data.size;
            if (size > 2 * 1024 * 1024) {
                alert("图片不能超过2M");
                return false;
            }
            xiuxiu.setUploadArgs({
                'return': "xiuxiu",
                'url': url,
                'remote_type': 'wechatUploadimg',
                'no_thumb': 1,
                'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
            }, id);
            return true;
        };
        xiuxiu.onInit = function() {
            if (url) {
                if (url.indexOf('http://image.135editor.com') == -1 && url.indexOf('http://img.wx135.com') == -1) {
                    url = BASEURL + '/downloads/fetch_url?fu=' + url;
                }
                xiuxiu.loadPhoto(url);
            }
            publishController.focus_close();
        };
        xiuxiu.onUploadResponse = function(data, id) {
            try {
                var json = eval('(' + data + ')');
            } catch (e) {
                alert(data);
                return;
            }
            if (json.ret == -1) {
                showErrorMessage(json.error);
            } else {
                if (url && current_edit_img) {
                    var new_url = json.url;
                    current_edit_img.src = new_url;
                    current_edit_img.setAttribute("_src", new_url);
                } else {
                    insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
                }
                publishController.close_dialog();
            }
        };
        xiuxiu.onClose = function(id) {
            publishController.close_dialog();
        }
    } else {
        showErrorMessage('编辑图片属于付费功能。更换图片请直接双击图片');
    }
};
!
    function(a) {
        var b = function() {
            return !1 === a.support.boxModel && a.support.objectAll && a.support.leadingWhitespace
        }();
        a.jGrowl = function(b, c) {
            0 === a("#jGrowl").size() && a('<div id="jGrowl"></div>').addClass(c && c.position ? c.position : a.jGrowl.defaults.position).appendTo("body"), a("#jGrowl").jGrowl(b, c)
        }, a.fn.jGrowl = function(b, c) {
            if (a.isFunction(this.each)) {
                var d = arguments;
                return this.each(function() {
                    void 0 === a(this).data("jGrowl.instance") && (a(this).data("jGrowl.instance", a.extend(new a.fn.jGrowl, {
                        notifications: [],
                        element: null,
                        interval: null
                    })), a(this).data("jGrowl.instance").startup(this)), a.isFunction(a(this).data("jGrowl.instance")[b]) ? a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"), a.makeArray(d).slice(1)) : a(this).data("jGrowl.instance").create(b, c)
                })
            }
        }, a.extend(a.fn.jGrowl.prototype, {
            defaults: {
                pool: 0,
                header: "",
                group: "",
                sticky: !1,
                position: "top-right",
                glue: "after",
                theme: "default",
                themeState: "highlight",
                corners: "10px",
                check: 250,
                life: 3e3,
                closeDuration: "normal",
                openDuration: "normal",
                easing: "swing",
                closer: false,
                closeTemplate: "&times;",
                closerTemplate: "<div>[ close all ]</div>",
                log: function() {},
                beforeOpen: function() {},
                afterOpen: function() {},
                open: function() {},
                beforeClose: function() {},
                close: function() {},
                animateOpen: {
                    opacity: "show"
                },
                animateClose: {
                    opacity: "hide"
                }
            },
            notifications: [],
            element: null,
            interval: null,
            create: function(b, c) {
                var d = a.extend({}, this.defaults, c);
                "undefined" != typeof d.speed && (d.openDuration = d.speed, d.closeDuration = d.speed), this.notifications.push({
                    message: b,
                    options: d
                }), d.log.apply(this.element, [this.element, b, d])
            },
            render: function(b) {
                var c = this,
                    d = b.message,
                    e = b.options;
                e.themeState = "" === e.themeState ? "" : "ui-state-" + e.themeState;
                var f = a("<div/>").addClass("jGrowl-notification " + e.themeState + " ui-corner-all" + (void 0 !== e.group && "" !== e.group ? " " + e.group : "")).append(a("<div/>").addClass("jGrowl-close").html(e.closeTemplate)).append(a("<div/>").addClass("jGrowl-header").html(e.header)).append(a("<div/>").addClass("jGrowl-message").html(d)).data("jGrowl", e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl", function() {
                    a(this).parent().trigger("jGrowl.beforeClose")
                }).parent();
                a(f).bind("mouseover.jGrowl", function() {
                    a("div.jGrowl-notification", c.element).data("jGrowl.pause", !0)
                }).bind("mouseout.jGrowl", function() {
                    a("div.jGrowl-notification", c.element).data("jGrowl.pause", !1)
                }).bind("jGrowl.beforeOpen", function() {
                    e.beforeOpen.apply(f, [f, d, e, c.element]) !== !1 && a(this).trigger("jGrowl.open")
                }).bind("jGrowl.open", function() {
                    e.open.apply(f, [f, d, e, c.element]) !== !1 && ("after" == e.glue ? a("div.jGrowl-notification:last", c.element).after(f) : a("div.jGrowl-notification:first", c.element).before(f), a(this).animate(e.animateOpen, e.openDuration, e.easing, function() {
                        a.support.opacity === !1 && this.style.removeAttribute("filter"), null !== a(this).data("jGrowl") && (a(this).data("jGrowl").created = new Date), a(this).trigger("jGrowl.afterOpen")
                    }))
                }).bind("jGrowl.afterOpen", function() {
                    e.afterOpen.apply(f, [f, d, e, c.element])
                }).bind("jGrowl.beforeClose", function() {
                    e.beforeClose.apply(f, [f, d, e, c.element]) !== !1 && a(this).trigger("jGrowl.close")
                }).bind("jGrowl.close", function() {
                    a(this).data("jGrowl.pause", !0), a(this).animate(e.animateClose, e.closeDuration, e.easing, function() {
                        a.isFunction(e.close) ? e.close.apply(f, [f, d, e, c.element]) !== !1 && a(this).remove() : a(this).remove()
                    })
                }).trigger("jGrowl.beforeOpen"), "" !== e.corners && void 0 !== a.fn.corner && a(f).corner(e.corners), a("div.jGrowl-notification:parent", c.element).size() > 1 && 0 === a("div.jGrowl-closer", c.element).size() && this.defaults.closer !== !1 && a(this.defaults.closerTemplate).addClass("jGrowl-closer " + this.defaults.themeState + " ui-corner-all").addClass(this.defaults.theme).appendTo(c.element).animate(this.defaults.animateOpen, this.defaults.speed, this.defaults.easing).bind("click.jGrowl", function() {
                    a(this).siblings().trigger("jGrowl.beforeClose"), a.isFunction(c.defaults.closer) && c.defaults.closer.apply(a(this).parent()[0], [a(this).parent()[0]])
                })
            },
            update: function() {
                a(this.element).find("div.jGrowl-notification:parent").each(function() {
                    void 0 !== a(this).data("jGrowl") && void 0 !== a(this).data("jGrowl").created && a(this).data("jGrowl").created.getTime() + parseInt(a(this).data("jGrowl").life, 10) < (new Date).getTime() && a(this).data("jGrowl").sticky !== !0 && (void 0 === a(this).data("jGrowl.pause") || a(this).data("jGrowl.pause") !== !0) && a(this).trigger("jGrowl.beforeClose")
                }), this.notifications.length > 0 && (0 === this.defaults.pool || a(this.element).find("div.jGrowl-notification:parent").size() < this.defaults.pool) && this.render(this.notifications.shift()), a(this.element).find("div.jGrowl-notification:parent").size() < 2 && a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose, this.defaults.speed, this.defaults.easing, function() {
                    a(this).remove()
                })
            },
            startup: function(c) {
                this.element = a(c).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'), this.interval = setInterval(function() {
                    a(c).data("jGrowl.instance").update()
                }, parseInt(this.defaults.check, 10)), b && a(this.element).addClass("ie6")
            },
            shutdown: function() {
                a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(), clearInterval(this.interval)
            },
            close: function() {
                a(this.element).find("div.jGrowl-notification").each(function() {
                    a(this).trigger("jGrowl.beforeClose")
                })
            }
        }), a.jGrowl.defaults = a.fn.jGrowl.prototype.defaults
    }(jQuery);;

(function($) {
    var pluginName = 'slider',
        initAllSelector = '[data-role=slider], .slider',
        paramKeys = ['InitValue', 'Accuracy'];
    $[pluginName] = function(element, options) {
        if (!element) {
            return $()[pluginName]({
                initAll: true
            });
        }
        var defaults = {
            initValue: 0,
            accuracy: 1
        };
        var plugin = this;
        plugin.settings = {};
        var $element = $(element);
        var complete, marker, currentValuePerc, sliderLength, sliderOffset, sliderStart, sliderEnd, percentPerPixel, markerSize, vertical = false;
        plugin.init = function() {
            plugin.settings = $.extend({}, defaults, options);
            complete = $('<div class="complete"></div>');
            marker = $('<div class="marker"></div>');
            complete.appendTo($element);
            marker.appendTo($element);
            vertical = $element.hasClass('vertical');
            initGeometry();
            currentValuePerc = correctValuePerc(plugin.settings.initValue);
            placeMarkerByPerc(currentValuePerc);
            marker.on('mousedown', function(e) {
                e.preventDefault();
                startMoveMarker(e);
            });
            $element.on('mousedown', function(e) {
                e.preventDefault();
                startMoveMarker(e);
            });
            $element.trigger('inited', [currentValuePerc]);
        };
        var correctValuePerc = function(value) {
            var accuracy = plugin.settings.accuracy;
            if (accuracy === 0) {
                return value;
            }
            if (value === 100) {
                return 100;
            }
            value = Math.floor(value / accuracy) * accuracy + Math.round(value % accuracy / accuracy) * accuracy;
            if (value > 100) {
                return 100;
            }
            return value;
        };
        var pixToPerc = function(valuePix) {
            var valuePerc;
            valuePerc = valuePix * percentPerPixel;
            return correctValuePerc(valuePerc);
        };
        var percToPix = function(value) {
            if (percentPerPixel === 0) {
                return 0;
            }
            return value / percentPerPixel;
        };
        var placeMarkerByPerc = function(valuePerc) {
            var size, size2;
            if (vertical) {
                size = percToPix(valuePerc) + markerSize;
                size2 = sliderLength - size;
                marker.css('top', size2);
                complete.css('height', size);
            } else {
                size = percToPix(valuePerc);
                marker.css('left', size);
                complete.css('width', size);
            }
        };
        var startMoveMarker = function(e) {
            $(document).on('mousemove.sliderMarker', function(event) {
                movingMarker(event);
            });
            $(document).on('mouseup.sliderMarker', function() {
                $(document).off('mousemove.sliderMarker');
                $(document).off('mouseup.sliderMarker');
                $element.data('value', currentValuePerc);
                $element.trigger('changed', [currentValuePerc]);
            });
            initGeometry();
            movingMarker(e)
        };
        var initGeometry = function() {
            if (vertical) {
                sliderLength = $element.height();
                sliderOffset = $element.offset().top;
                markerSize = marker.height();
            } else {
                sliderLength = $element.width();
                sliderOffset = $element.offset().left;
                markerSize = marker.width();
            }
            percentPerPixel = 100 / (sliderLength - markerSize);
            sliderStart = markerSize / 2;
            sliderEnd = sliderLength - markerSize / 2;
        };
        var movingMarker = function(event) {
            var cursorPos, percents, valuePix;
            if (vertical) {
                cursorPos = event.pageY - sliderOffset;
            } else {
                cursorPos = event.pageX - sliderOffset;
            }
            if (cursorPos < sliderStart) {
                cursorPos = sliderStart;
            } else if (cursorPos > sliderEnd) {
                cursorPos = sliderEnd;
            }
            if (vertical) {
                valuePix = sliderLength - cursorPos - markerSize / 2;
            } else {
                valuePix = cursorPos - markerSize / 2;
            }
            percents = pixToPerc(valuePix);
            placeMarkerByPerc(percents);
            currentValuePerc = percents;
            $element.trigger('change', [currentValuePerc]);
        };
        plugin.val = function(value) {
            if (typeof value !== 'undefined') {
                currentValuePerc = correctValuePerc(value);
                placeMarkerByPerc(currentValuePerc);
                return currentValuePerc;
            } else {
                return currentValuePerc;
            }
        };
        plugin.init();
    };
    $.fn[pluginName] = function(options) {
        var elements = options.initAll ? $(initAllSelector) : this;
        return elements.each(function() {
            var that = $(this),
                params = {},
                plugin;
            if (undefined == that.data(pluginName)) {
                $.each(paramKeys, function(index, key) {
                    params[key[0].toLowerCase() + key.slice(1)] = that.data('param' + key);
                });
                plugin = new $[pluginName](this, params);
                that.data(pluginName, plugin);
            }
        });
    };
    $(function() {
        $()[pluginName]({
            initAll: true
        });
    });
})(jQuery);;

var swfu_array = [];
var ckeditors = {};
var swfu_array = [];
var last_open_dialog = null;
var jqgrid_scrollOffset = null;
var form_submit_flag_for_swfupload = false;
var form_submit_obj_for_swfupload = null;

function singleSubmitDigg(model, data_id, question_id, option_id, callback) {
    var postdata = {
        model: model,
        data_id: data_id
    };
    postdata['options[' + question_id + '][' + option_id + ']'] = 1;
    $.ajax({
        type: 'post',
        url: BASEURL + '/appraiseresults/singlesubmit',
        data: postdata,
        success: function(data) {
            if (data.error) {
                alert(data.error);
                return false;
            }
            if (typeof(callback) == 'function') {
                var obj = callback(data);
            }
        },
        dataType: 'json'
    });
    return false;
}

function setDiggNum(data, total) {
    var id = '#Digg-' + data.model + '-' + data.data_id + '-' + data.question_id + '-' + data.option_id;
    $(id).html('(' + data.value + ')');
    if (total) {
        var bar = '#Diggbar-' + data.model + '-' + data.data_id + '-' + data.question_id + '-' + data.option_id;
        var p = data.value / total * 100;
        $(bar).attr("width", p);
    } else {
        var bar = '#Diggbar-' + data.model + '-' + data.data_id + '-' + data.question_id + '-' + data.option_id;
        if ($(bar).size() > 0) {
            var total = 0;
            $("[id^='Digg-" + data.model + "-" + data.data_id + "-']").each(function() {
                var num = $(this).html();
                num = num.replace(/\(|\)/g, '');
                total += parseInt(num);
            });
            $("[id^='Diggbar-" + data.model + "-" + data.data_id + "-']").each(function() {
                var numid = this.id.replace(/Diggbar-/, 'Digg-');
                var num = $('#' + numid).html();
                num = num.replace(/\(|\)/g, '');
                var height = parseInt(num);
                var p = height / total * 100;
                $('span', this).css("width", p);
                $(this).next().html(p.toFixed(2) + '%');
            });
        }
    }
}

function keep_session() {
    var url = BASEURL + '/users/keep_session';
    ajaxActionHtml(url, null, function(html) {});
}
var rs_callbacks = {
    loginSuccess: function(request) {
        if (request.success) {
            publishController.close_dialog();
            $('#login_errorinfo').hide();
            if (sso.form) {
                $(sso.form).trigger("submit");
                sso.form = null;
            }
            if (sso.callback) {
                sso.callback.apply(sso.callback, sso.callback_args);
            }
            $('#login-menus').removeClass('hidden');
            $('#login-links').remove();
            $('#login-user-name').html(request.userinfo.username);
            if (request.userinfo && request.userinfo.session_flash) {
                request.success += request.userinfo.session_flash;
            }
            keep_session();
        } else {}
    },
    addtoCart: function(request) {
        $('#shopping-cart-num').html(request.total);
    },
    deleteFromCart: function(request) {},
    deleteGridRow: function(request, obj) {
        $(obj).closest('tr.jqgrow').remove();
    },
    reloadGrid: function(request, obj) {
        var grid = $(obj).closest('table.jqgrid-list').remove();
        var page = grid.jqGrid("getGridParam", "page");
        grid.jqGrid("setGridParam", {
            page: page
        }).trigger("reloadGrid");
    }
};

function ajaxAction(url, postdata, form, callback_func_name, moreags) {
    if (url.search(/\?/) != -1) {
        url += '&inajax=1';
    } else {
        url += '?inajax=1';
    }
    if (form) {
        $(':submit', form).each(function() {
            var html = $(this).html();
            $(this).data('html', html).html('<img src="' + BASEURL + '/img/ajax/circle_ball.gif"> ' + html).attr('disabled', 'disabled');
        });
    }
    $.ajax({
        type: 'post',
        url: url,
        data: postdata,
        complete: function(XMLHttpRequest, textStatus) {
            if (form) {
                $(':submit', form).each(function() {
                    var html = $(this).data('html');
                    $(this).html(html).removeAttr('disabled');
                })
            }
        },
        success: function(request) {
            if (request.success) {
                showSuccessMessage(request.success);
                publishController.close_dialog();
            } else if (request.error && !request.tasks) {
                showErrorMessage(request.error);
                var errorinfo = '';
                for (var i in request) {
                    errorinfo += "<span class='ui-state-error ui-corner-all'><span class='ui-icon ui-icon-alert'></span>" + request[i] + "</span>";
                }
            }
            if (form) {
                $(':submit', form).each(function() {
                    var html = $(this).data('html');
                    $(this).html(html).removeAttr('disabled');
                })
            }
            if (typeof(callback_func_name) == 'function') {
                callback_func_name(request);
            } else if (callback_func_name && rs_callbacks[callback_func_name]) {
                var func = rs_callbacks[callback_func_name];
                if (moreags) {
                    func(request, moreags);
                } else {
                    func(request);
                }
            }
            if (request.tasks) {
                $(request.tasks).each(function(i) {
                    var task = request.tasks[i];
                    if (task.dotype == "html") {
                        if ($(task.selector, form).size()) {
                            $(task.selector, form).html(task.content).show();
                        } else {
                            $(task.selector).html(task.content).show();
                        }
                    } else if (task.dotype == "value") {
                        if ($(task.selector, form).size()) {
                            $(task.selector, form).val(task.content);
                        } else {
                            $(task.selector).val(task.content);
                        }
                    } else if (task.dotype == "append") {
                        $(task.content).appendTo(task.selector);
                    } else if (task.dotype == "msg_dialog") {
                        publishController.open_msg_dialog(task.id, task.title, task.content);
                    } else if (task.dotype == "location") {
                        window.location.href = task.url;
                    } else if (task.dotype == "reload") {
                        window.location.reload();
                    } else if (task.dotype == "jquery") {
                        if (task.args) {
                            $(task.selector)[task.func](task.args);
                        } else {
                            $(task.selector)[task.func]();
                        }
                    } else if (task.dotype == "callback") {
                        var callback = null,
                            thisArg = null;
                        eval("callback= " + task.callback + ";");
                        eval("thisArg= " + task.thisArg + ";");
                        var args = [];
                        for (var i in task.callback_args) {
                            args[args.length] = task.callback_args[i];
                        }
                        if (callback) {
                            callback.apply(thisArg, args);
                        }
                    }
                });
            }
        },
        dataType: "json"
    });
    return false;
}

function ajaxActionHtml(url, selector, callback) {
    $.ajax({
        async: true,
        type: 'get',
        url: url,
        success: function(data) {
            if (selector) {
                $(selector).html(data);
            }
            if (typeof(callback) == 'function') {
                callback(data);
            } else if (callback) {
                eval(callback);
            }
        },
        dataType: "html"
    });
}

function setCKEditorVal(form) {
    if (typeof(CKEDITOR) != 'undefined') {
        if (form) {
            $(form).find('textarea').each(function(i) {
                if (this.id && this.id != "") {
                    var oEditor = CKEDITOR.instances[this.id];
                    if (typeof(oEditor) != 'undefined') {
                        var content = oEditor.getData();
                        $(this).val(content);
                    }
                }
            });
        } else {
            $('form .wygiswys').find('textarea').each(function() {
                var oEditor = CKEDITOR.instances[this.id];
                if (typeof(oEditor) != 'undefined') {
                    var content = oEditor.getData();
                    $(this).val(content);
                }
            });
        }
    }
}

function ajaxSubmitForm(form, callback_func_name) {
    setCKEditorVal(form);
    $(form).find('.help-block').html('');
    ajaxAction(form.action, $(form).serialize(), form, callback_func_name);
    return false;
}
var sso = {
    usercookie: $.cookie('MIAOCMS[Auth][User]'),
    form: null,
    callback: null,
    callback_args: null,
    check_userlogin: function(params) {
        this.usercookie = $.cookie('MIAOCMS[Auth][User]');
        if (this.usercookie == null || this.usercookie == "" || typeof(this.usercookie) == 'undefined') {
            if (params && params.callback) {
                this.callback = params.callback;
            } else {
                this.callback = '';
            }
            if (params && params.form) {
                this.form = params.form;
            } else {
                this.form = null;
            }
            if (params && params.callback_args) {
                this.callback_args = params.callback_args;
            } else {
                this.callback_args = '';
            }
            publishController.open_dialog(BASEURL + '/users/login', {
                'title': $.jslanguage.needlogin,
                selector: '#login-form',
                width: 550
            });
            return false;
        }
        return true;
    },
    is_login: function() {
        this.usercookie = $.cookie('MIAOCMS[Auth][User]');
        if (this.usercookie == null || this.usercookie == "" || typeof(this.usercookie) == 'undefined') {
            return false;
        }
        return true;
    }
};

function checkLogin() {
    if (!sso.check_userlogin()) {
        return false;
    } else {
        showSuccessMessage('已登录，请刷新页面查看');
        return false;
    }
}
var publishController = {
    _crontroller: 'questions',
    dialogid: null,
    overlays: {},
    loading_html: '<img src="/img/ajax/wheel_throbber.gif"> 正在加载...',
    open_dialog: function(url, options, postdata) {
        var $dialog = this;
        $dialog.loading_html = '<img src="' + BASEURL + '/img/ajax/wheel_throbber.gif"> 正在加载...';
        var lastid = $dialog.dialogid;
        if (options.id) {
            $dialog.dialogid = options.id;
        } else {
            $dialog.dialogid = url.replace(/\/|\.|:|,| |\{|\}|\]|\[|\"|\'|\?|=|&/g, '_') + '-ajax—action';
        }

        function dialog_loaded() {
            $('.nav-tabs a', '#' + $dialog.dialogid).click(function(e) {
                e.preventDefault();
                $(this).blur();
                $(this).tab('show');
            });
            $('.nav-tabs a:first', '#' + $dialog.dialogid).tab('show');
            $('.dropdown-toggle', '#' + $dialog.dialogid).dropdown();
            $('button', '#' + $dialog.dialogid).addClass('btn');
            if (typeof(options.callback) == 'function') {
                options.callback($('#' + $dialog.dialogid));
            }
            $('#' + $dialog.dialogid).find('form').each(function() {
                if (typeof($(this).attr('target')) != 'undefined') {
                    return true;
                }
                if (typeof($(this).attr('onsubmit')) == "undefined") {
                    if ($.fn.validate) {
                        validateForm(this);
                    } else {
                        $(this).on('submit', function() {
                            ajaxSubmitForm(this, function(request) {
                                if (request.success) {
                                    $('#' + $dialog.dialogid).modal('hide');
                                }
                            });
                            return false;
                        })
                    }
                }
            })
        }

        function load_url() {
            dialog_loaded();
            page_loaded();
            $('#' + $dialog.dialogid).find('a').click(function() {
                var url = $(this).attr('href');
                var re = /^#/;
                if (typeof($(this).attr('onclick')) != "undefined" || $(this).attr('target') == '_blank' || re.test(url) || url.substr(0, 10).toLowerCase() == 'javascript') {
                    return true;
                }
                $('#' + $dialog.dialogid).find('.modal-body').load(url, function() {
                    load_url();
                });
                return false;
            });
        }
        if ($('#' + $dialog.dialogid).size() < 1) {
            $('<div  class="modal" id="' + $dialog.dialogid + '"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel">' + options.title + '</h3></div><div class="modal-body">' + $dialog.loading_html + '</div></div></div></div>').appendTo('body');
        } else {
            $('#' + $dialog.dialogid).find('.modal-body').html($dialog.loading_html);
        }
        $('#' + $dialog.dialogid).find('.modal-body').css('max-height', $(window).height() - 80).css('overflow-y', 'auto');
        if (postdata != null) {
            $.ajax({
                type: 'post',
                url: url,
                data: postdata,
                complete: function(XMLHttpRequest, textStatus) {},
                success: function(html) {
                    if (options.selector && $(html).find(options.selector).size() > 0) {
                        $('#' + $dialog.dialogid).find('.modal-body').html($(html).find(options.selector).html());
                    } else {
                        $('#' + $dialog.dialogid).find('.modal-body').html(html);
                    }
                    load_url();
                },
                dataType: "html"
            });
        } else {
            if (options.selector) {
                var obj = $('#' + $dialog.dialogid).find('.modal-body').load(url + ' ' + options.selector, {}, function() {
                    load_url();
                });
            } else {
                var obj = $('#' + $dialog.dialogid).find('.modal-body').load(url, {}, function() {
                    load_url();
                });
            }
        }
        if (options.nobackdrop) {
            $('#' + $dialog.dialogid).modal({
                backdrop: false
            });
        } else {
            $('#' + $dialog.dialogid).modal();
        }
        if (options.width) {
            $('#' + $dialog.dialogid + ' .modal-dialog').width(options.width);
        }
        if (options.zIndex) {
            $('#' + $dialog.dialogid).css('z-index', options.zIndex);
        }
        return false;
    },
    load_url: function(url, selector) {
        var $dialog = this;
        var re = /^#/;
        if (re.test(url) || url.substr(0, 10).toLowerCase() == 'javascript') {
            return false;
        }
        if (selector) {
            url += ' ' + selector;
        }
        $('#' + $dialog.dialogid).load(url, function() {
            $('#' + $dialog.dialogid).find('a').click(function() {
                $dialog.load_url($(this).attr('href'), {});
                return false;
            });
            page_loaded();
        });
    },
    focus_close: function() {
        if (this.dialogid) {
            $('#' + this.dialogid).find('.modal-header .close').focus();
        }
    },
    remove: function() {
        if (this.dialogid) {
            $('.modal-backdrop').remove();
            $('#' + this.dialogid).remove();
        }
    },
    close_dialog: function() {
        if (this.dialogid) {
            $('#' + this.dialogid).modal('hide');
            $('.modal-backdrop').remove();
        }
    },
    open_msg_dialog: function(dialogid, title, content) {
        $('<div  class="modal fade" id="' + dialogid + '"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">' + title + '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body">' + content + '</div></div></div></div>').appendTo('body');
        $('#' + dialogid).modal('show');
        $('#' + dialogid).on('hidden.bs.modal', function(e) {
            $('#' + dialogid).remove();
        });
    },
    open_html_dialog: function(dialogid, title) {
        this.dialogid = dialogid;
        if ($('#' + this.dialogid).size() < 1) {
            $('<div  class="modal fade" id="' + this.dialogid + '"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">' + title + '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 id="myModalLabel"></h3></div><div class="modal-body"></div></div></div></div>').appendTo('body');
        }
        $('#' + dialogid).modal('show');
    },
    invite_tabs: {}
};

function inner_open(container_selector, result_selector) {
    $(container_selector).find('a').click(function() {
        var url = $(this).attr('href');
        if (result_selector) {
            url = url + ' ' + result_selector;
        }
        var re = /^#/;
        if (typeof($(this).attr('onclick')) != "undefined" || $(this).attr('target') == '_blank' || re.test(url) || url.substr(0, 10).toLowerCase() == 'javascript') {
            return true;
        }
        $(container_selector).scrollTop(0).prepend('<div style="margin:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载内容...</div>').load(url, function() {
            page_loaded();
            inner_open(container_selector, result_selector);
        });
        return false;
    });
}

function follow_wx(id) {
    var url = BASEURL + '/user_follows/follow/' + id;
    if (!sso.check_userlogin({
            "callback": follow_wx,
            "callback_args": arguments
        })) return false;
    publishController.open_dialog(url, {
        'title': 'Follow',
        width: 400
    });
    return false;
}

function addtofavor(model, id, obj, callback) {
    var url = BASEURL + '/favorites/add/';
    var postdata = {
        'data[Favorite][model]': model,
        'data[Favorite][data_id]': id
    };
    if (!sso.check_userlogin({
            "callback": addtofavor,
            "callback_args": arguments
        })) return false;
    var evt = window.event || arguments.callee.caller.arguments[0];
    evt.stopPropagation();
    if (typeof(callback) == 'function') {
        ajaxAction(url, postdata, null, callback);
    } else {
        ajaxAction(url, postdata, null, function(request) {
            if (request.success) {
                if (obj) {
                    $(obj).attr('disabled', 'disabled').removeClass('text-primary').addClass('text-success');
                    if ($(obj).find('.fa-heart-o').size() > 0) {
                        $(obj).find('.fa-heart-o').removeClass('fa-heart-o').addClass('fa-heart');
                    }
                }
                var num_selector = '#Stats-' + request.data.model + '-' + request.data.data_id + '-favor_nums';
                if ($(num_selector).size() > 0) {
                    var num = $(num_selector).html();
                    num = num.replace(/\(|\)/g, '');
                    if (num == '') num = 0;
                    num = parseInt(num);
                    num++;
                    $(num_selector).html(num);
                }
            }
        });
    }
    return false;
}

function unfavorite(obj, callback) {
    var evt = window.event || arguments.callee.caller.arguments[0];
    evt.stopPropagation();
    if (!confirm($.jslanguage.cancel_fav_confirm)) {
        return false;
    }
    var url = $(obj).data('url');
    if (!sso.check_userlogin({
            "callback": unfavorite,
            "callback_args": arguments
        })) return false;
    ajaxAction(url, null, null, function(request) {
        if (request.success) {
            if (typeof(callback) == 'function') {
                callback(request);
            }
            $(obj).attr('disabled', 'disabled');
            if ($(obj).find('.fa-heart').size() > 0) {
                $(obj).find('.fa-heart').removeClass('fa-heart').addClass('fa-heart-o');
            } else {
                $(obj).parents('li:first').remove();
            }
        }
    });
    return false;
}

function refreshfavorite(obj) {
    var evt = window.event || arguments.callee.caller.arguments[0];
    evt.stopPropagation();
    var url = $(obj).data('url');
    if (!sso.check_userlogin({
            "callback": refreshfavorite,
            "callback_args": arguments
        })) return false;
    ajaxAction(url, null, null, function(request) {
        if (request.ret == 0) {
            $(obj).parents('li:first').prependTo($(obj).parents('ul:first'));
        }
    });
    return false;
}

function addtoCart(id, num, model) {
    if (!model) {
        model = 'product';
    }
    var url = BASEURL + '/carts/add';
    var postdata = {
        'data[Cart][num]': num,
        'data[Cart][product_id]': id,
        'data[Cart][product_model]': model
    };
    if (!sso.check_userlogin({
            "callback": addtoCart,
            "callback_args": arguments
        })) return false;
    ajaxAction(url, postdata, null, 'addtoCart');
    return false;
}

function directBuy(id, num, model) {
    if (!model) {
        model = 'product';
    }
    var url = BASEURL + '/carts/add?redirect=/orders/info&ck_ids=' + id;
    var postdata = {
        'data[Cart][num]': num,
        'data[Cart][product_id]': id,
        'data[Cart][product_model]': model
    };
    if (!sso.check_userlogin({
            "callback": directBuy,
            "callback_args": arguments
        })) return false;
    ajaxAction(url, postdata, null, function() {
        location.href = BASEURL + '/orders/info';
    });
    return false;
}

function loadDiggData() {
    var models = [];
    var ids = {};
    $('.ui-dig-num').each(function(i) {
        var info = this.id.split('-');
        if ($.inArray(info[1], models) < 0) {
            models[models.length] = info[1];
        }
        if (!ids[info[1]]) {
            ids[info[1]] = [];
        }
        if ($.inArray(info[2], ids[info[1]]) < 0) {
            var id_length = ids[info[1]].length;
            ids[info[1]][id_length] = info[2];
        }
    });
    for (var i in models) {
        var model = models[i];
        var data_id = ids[models];
        loadModelDataDigg(model, data_id);
    }
}

function loadModelDataDigg(model, data_id) {
    $.ajax({
        type: 'get',
        url: BASEURL + '/appraiseresults/getdigdata',
        data: {
            'model': model,
            'data_id': data_id
        },
        success: function(data) {
            for (var i in data) {
                setDiggNum(data[i]['Appraiseresult']);
            }
        },
        dataType: 'json'
    });
}

function loadStatsData() {
    var models = [];
    var ids = {};
    $('.ui-stats-num').each(function(i) {
        var s = this.id;
        var info = s.split('-');
        if ($.inArray(info[1], models) < 0) {
            models[models.length] = info[1];
        }
        if (!ids[info[1]]) {
            ids[info[1]] = [];
        }
        if ($.inArray(info[2], ids[info[1]]) < 0) {
            var id_length = ids[info[1]].length;
            ids[info[1]][id_length] = info[2];
        }
    });
    for (var i in models) {
        var model = models[i];
        var data_id = ids[model];
        if (model && model != "") {
            loadModelDataStats(model, data_id);
        }
    }
}

function loadModelDataStats(model, data_id) {
    $.ajax({
        type: 'get',
        url: BASEURL + '/stats_days/getdata',
        data: {
            'model': model,
            'data_id': data_id
        },
        success: function(data) {
            for (var i in data) {
                setStatsNum(data[i]['StatsDay']);
            }
        },
        dataType: 'json'
    });
}

function setStatsNum(data) {
    if (parseInt(data.favor_nums) > 0) {
        var id = '#Stats-' + data.model + '-' + data.data_id + '-favor_nums';
        setQuoteNum(id, data.favor_nums);
    }
    if (parseInt(data.comment_nums) > 0) {
        var id = '#Stats-' + data.model + '-' + data.data_id + '-comment_nums';
        setQuoteNum(id, data.comment_nums);
    }
    if (parseInt(data.view_nums) > 0) {
        var id = '#Stats-' + data.model + '-' + data.data_id + '-view_nums';
        setQuoteNum(id, data.view_nums);
    }
}

function setQuoteNum(select, value) {
    if ($(select).size() > 0) {
        var num = $(select).eq(0).html();
        num = num.replace(/&nbsp;| /g, '');
        num = num.replace(/\(|\)/g, '');
        if (num == '') num = 0;
        num = parseInt(num);
        num = num + parseInt(value);
        $(select).html(num);
    }
}

function loadModelDataMood(model, data_id) {
    $.ajax({
        type: 'get',
        url: BASEURL + '/appraiseresults/getdigdata',
        data: {
            'model': model,
            'data_id': data_id
        },
        success: function(data) {
            var total = 0;
            for (var i in data) {
                if (data[i]['Appraiseresult'].question_id == 3) {
                    total += parseInt(data[i]['Appraiseresult'].value);
                }
            }
            for (var i in data) {
                setDiggNum(data[i]['Appraiseresult'], total);
            }
        },
        dataType: 'json'
    });
}

function loadComments(model, id) {
    $.get(BASEURL + '/comments/get_comments_data/' + model + '/' + id, {}, function(comments) {
        var current = null;
        var commentstarget = '.comments-' + model + '-' + id;
        $(commentstarget).html('');
        for (var i = 0; i < comments.length; i++) {
            current = comments[i].Comment;
            var comment_html = '<li><span class="t">' + current.name + '  ' + current.created + '</span><p>' + current.body + '</p><li>';
            $(commentstarget).append(comment_html);
        }
    }, "json");
}

function loadMoodDigg(model, id) {
    $.get(BASEURL + '/appraises/load/3/' + id + '/' + model + '?inajax=1', {}, function(MoodData) {
        $('#mood-' + model + '-' + id).html(MoodData);
    }, "html");
}
var page_hash = {
    storedHash: '',
    currentTabHash: '',
    cache: '',
    interval: null,
    listen: true,
    startListening: function() {
        setTimeout(function() {
            page_hash.listen = true;
        }, 600);
    },
    stopListening: function() {
        page_hash.listen = false;
    },
    checkHashChange: function() {
        var locStr = page_hash.currHash();
        if (page_hash.storedHash != locStr) {
            if (page_hash.listen == true) page_hash.refreshToHash();
            page_hash.storedHash = locStr;
        }
        if (!page_hash.interval) page_hash.interval = setInterval(page_hash.checkHashChange, 500);
    },
    refreshToHash: function(locStr) {
        if (locStr) var newHash = true;
        locStr = locStr || page_hash.currHash();
        var hash_array = locStr.split('&');
        for (var i in hash_array) {
            var pageinfo = hash_array[i].split('=');
            if (pageinfo[0] && pageinfo[1] && pageinfo[0].substr(0, 5) == 'page_') {
                var portletid = pageinfo[0].replace('page_', '');
                var page = pageinfo[1];
                $('.page_' + page, '#' + portletid).trigger('click');
            }
        }
        if (newHash) {
            page_hash.updateHash(locStr, true);
        }
    },
    updateHash: function(locStr, ignore) {
        if (ignore == true) {
            page_hash.stopListening();
        }
        window.location.hash = locStr;
        if (ignore == true) {
            page_hash.storedHash = locStr;
            page_hash.startListening();
        }
    },
    clean: function(locStr) {
        return locStr.replace(/%23/g, "").replace(/[\?#]+/g, "");
    },
    currHash: function() {
        return page_hash.clean(window.location.hash);
    },
    currSearch: function() {
        return page_hash.clean(window.location.search);
    },
    init: function() {
        page_hash.storedHash = '';
        page_hash.checkHashChange();
    }
};

function Html5Uploadfile(file_id) {
    this.file_input = null;
    var uploading_id = file_id + randomString(10);
    this.upload = function(file_input, options) {
        this.file_input = file_input;
        var file = file_input.files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > 1024 * 1024) fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            else fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
            var fd = new FormData();
            fd.append("file_post_name", options.file_post_name);
            fd.append("file_model_name", options.file_model_name);
            fd.append("no_db", options.no_db);
            fd.append("data_id", options.data_id);
            fd.append("item_css", options.item_css);
            fd.append("save_folder", options.save_folder);
            fd.append("return_type", options.return_type);
            fd.append(options.file_post_name, file);
            this.uploading_files[options.file_post_name] = {};
            this.uploading_files[options.file_post_name][file.name] = true;
            var append_html = '<div id="' + uploading_id + '-status" class="uploading-item clearfix"><span class="filename">' + file.name + '</span> <div class="progress pull-left" style="width:200px;">' + '<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:0%">' + '<span class="sr-only">0%</span>' + '</div></div> </div>';
            $(file_input).after(append_html);
            var xhr = new XMLHttpRequest();
            xhr.upload.addEventListener("progress", this.uploadProgress, false);
            xhr.addEventListener("load", this.uploadComplete, false);
            xhr.addEventListener("error", this.uploadFailed, false);
            xhr.addEventListener("abort", this.uploadCanceled, false);
            xhr.open("POST", options.upload_url);
            xhr.send(fd);
        }
    }, this.uploading_files = {}, this.check_upload = function() {
        return false;
    }, this.uploadProgress = function(evt) {
        if (evt.lengthComputable) {
            var percentComplete = Math.round(evt.loaded * 100 / evt.total);
            $('#' + uploading_id + '-status').find('.progress-bar').css('width', percentComplete.toString() + '%');
        } else {
            alert('Unable to compute.Please retry.');
        }
    }, this.uploadComplete = function(evt) {
        var data = eval('(' + evt.target.responseText + ')');
        $('#fileuploadinfo_' + data.fieldname).append(data.message);
        $('#' + uploading_id + '-status').fadeOut("slow").remove();
    }, this.uploadFailed = function(evt) {
        alert("There was an error attempting to upload the file.");
    }, this.uploadCanceled = function(evt) {
        alert("The upload has been canceled by the user or the browser dropped the connection.");
    };
}

function debug_object(obj) {
    var str = '';
    for (var i in obj) {
        str += i + '=' + obj[i] + ";\t";
    }
    $('body').append('<hr/>' + str);
}

function getAvatarUrl(uid) {
    return BASEURL + '/files/avatar/' + parseInt(uid / 1000 % 1000) + '/' + parseInt(uid % 1000) + '/' + uid + '_0.jpg';
}
$(function() {
    $('.nav .dropdown,.navbar-nav .dropdown,header .dropdown').hover(function(e) {
        $(this).addClass('open');
    }, function() {
        $(this).removeClass('open');
    }).click(function(e) {
        e.stopPropagation();
    });
    if ($.fn.validate) {
        jQuery.validator.addMethod("biggerThen", function(value, element) {
            var biggerThan = $(element).attr('biggerThen');
            var type = $(element).data('type');
            if (type == 'string') {
                return value > $(biggerThan).val();
            } else {
                return parseInt(value) > parseInt($(biggerThan).val());
            }
        }, "Please check the value is in the right range");
        $('form').each(function() {
            validateForm(this);
        })
    }
    if ($('#ajaxestatus').size() > 0) {
        $(document).ajaxStart(function() {
            $('#ajaxestatus').show();
        }).ajaxStop(function() {
            $('#ajaxestatus').hide();
        });
    }
    $(document).on('click.bs.collapse.data-api', '.collapse-itemmenu > a', function(e) {
        var $this = $(this);
        e.preventDefault();
        $this.parents('.collapse-itemmenu:first').toggleClass('open');
        if ($this.find('.glyphicon-plus').size() > 0) {
            $this.find('.glyphicon-plus').addClass('glyphicon-minus').removeClass('glyphicon-plus');
        } else {
            $this.find('.glyphicon-minus').addClass('glyphicon-plus').removeClass('glyphicon-minus');
        }
    });
    $('.collapse-menu > li.open').each(function() {
        $(this).find('a:first>.glyphicon-plus').addClass('glyphicon-minus').removeClass('glyphicon-plus');
    });
    $(document).on('click', '.upload-fileitem .remove', function() {
        if (!confirm('Are you sure to delete this file.')) {
            return false;
        }
        var $this = $(this);
        var data_id = $(this).data('id');
        $.ajax({
            type: 'post',
            url: BASEURL + '/uploadfiles/delete',
            data: {
                id: data_id
            },
            success: function(data) {
                if (data.error) {
                    alert(data.error);
                    return false;
                } else {
                    $this.parents('.upload-fileitem:first').remove();
                }
            },
            dataType: 'json'
        });
    });
    loadStatsData();
});

function getUnreadMsgNum() {
    $.ajax({
        type: 'get',
        url: BASEURL + '/shortmessages/unreadnum/',
        success: function(data) {
            var num = parseInt(data);
            if (num > 0) {
                $('.user-unread-msgnum').html(data).show();
            }
        },
        dataType: 'html'
    });
}
var stack_custom = {
    "dir1": "right",
    "dir2": "down"
};

function validateForm(form) {
    if (typeof($(form).attr('onsubmit')) != 'undefined' || typeof($(form).data('noajax')) != 'undefined' || typeof($(form).attr('target')) != 'undefined' || $(form).attr('method') == 'get' || $(form).attr('method') == 'GET') {
        return true;
    }
    var validator = $(form).validate({
        errorElement: 'span',
        errorClass: 'help-block',
        focusInvalid: true,
        highlight: function(element) {
            $(element).closest('.form-group').addClass('has-error');
        },
        success: function(label) {
            label.closest('.form-group').removeClass('has-error');
            label.remove();
        },
        errorPlacement: function(error, element) {
            element.parent('div').append(error);
        },
        submitHandler: function(form) {
            if ($(form).validate().form()) {
                if (typeof($(form).data('noajax')) != 'undefined' || typeof($(form).attr('target')) != 'undefined' || $(form).attr('method') == 'get' || $(form).attr('method') == 'GET') {
                    return true;
                } else {
                    ajaxSubmitForm(form);
                }
            }
        }
    });
    return validator;
}

function randomString(len) {
    len = len || 8;
    var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';
    var maxPos = $chars.length;
    var pwd = '';
    for (i = 0; i < len; i++) {
        pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
    }
    return pwd;
}

function strtolower(str) {
    return (str + '').toLowerCase();
}

function substr(str, start, len) {
    var i = 0,
        allBMP = true,
        es = 0,
        el = 0,
        se = 0,
        ret = '';
    str += '';
    var end = str.length;
    this.php_js = this.php_js || {};
    this.php_js.ini = this.php_js.ini || {};
    switch ((this.php_js.ini['unicode.semantics'] && this.php_js.ini['unicode.semantics'].local_value.toLowerCase())) {
        case 'on':
            for (i = 0; i < str.length; i++) {
                if (/[\uD800-\uDBFF]/.test(str.charAt(i)) && /[\uDC00-\uDFFF]/.test(str.charAt(i + 1))) {
                    allBMP = false;
                    break;
                }
            }
            if (!allBMP) {
                if (start < 0) {
                    for (i = end - 1, es = (start += end); i >= es; i--) {
                        if (/[\uDC00-\uDFFF]/.test(str.charAt(i)) && /[\uD800-\uDBFF]/.test(str.charAt(i - 1))) {
                            start--;
                            es--;
                        }
                    }
                } else {
                    var surrogatePairs = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g;
                    while ((surrogatePairs.exec(str)) != null) {
                        var li = surrogatePairs.lastIndex;
                        if (li - 2 < start) {
                            start++;
                        } else {
                            break;
                        }
                    }
                }
                if (start >= end || start < 0) {
                    return false;
                }
                if (len < 0) {
                    for (i = end - 1, el = (end += len); i >= el; i--) {
                        if (/[\uDC00-\uDFFF]/.test(str.charAt(i)) && /[\uD800-\uDBFF]/.test(str.charAt(i - 1))) {
                            end--;
                            el--;
                        }
                    }
                    if (start > end) {
                        return false;
                    }
                    return str.slice(start, end);
                } else {
                    se = start + len;
                    for (i = start; i < se; i++) {
                        ret += str.charAt(i);
                        if (/[\uD800-\uDBFF]/.test(str.charAt(i)) && /[\uDC00-\uDFFF]/.test(str.charAt(i + 1))) {
                            se++;
                        }
                    }
                    return ret;
                }
                break;
            }
        case 'off':
        default:
            if (start < 0) {
                start += end;
            }
            end = typeof len === 'undefined' ? end : (len < 0 ? len + end : len + start);
            return start >= str.length || start < 0 || start > end ? !1 : str.slice(start, end);
    }
    return undefined;
};;

var setAmount = {
    min: 1,
    max: 9999,
    reg: function(x) {
        return new RegExp("^[1-9]\\d*$").test(x);
    },
    amount: function(obj, mode) {
        var x = $(obj).val();
        if (this.reg(x)) {
            if (mode) {
                x++;
            } else {
                x--;
            }
        } else {
            alert("请输入正确的数量！");
            $(obj).val(this.min);
            $(obj).focus();
        }
        return x;
    },
    reduce: function(obj) {
        var x = this.amount(obj, false);
        if (x >= this.min) {
            $(obj).val(x);
        } else {
            alert("商品数量最少为" + this.min);
            $(obj).val(this.min);
            $(obj).focus();
        }
    },
    add: function(obj) {
        var x = this.amount(obj, true);
        if (x <= this.max) {
            $(obj).val(x);
        } else {
            alert("商品数量最多为" + this.max);
            $(obj).val(this.max);
            $(obj).focus();
        }
    },
    modify: function(obj) {
        var x = $(obj).val();
        if (x < this.min || x > this.max || !this.reg(x)) {
            alert("请输入正确的数量！");
            $(obj).val(this.min);
            $(obj).focus();
        }
    }
};

function showSuccessMessage(text) {
    if ($.fn.jGrowl) {
        $.jGrowl("<i class='glyphicon glyphicon-ok'></i> " + text, {
            theme: 'alert alert-success',
            pool: 2,
            closer: false,
            life: 3000,
            closerTemplate: '',
            themeState: '',
            position: 'top-right',
            closeTemplate: ''
        });
    } else {
        alert(text);
    }
    return true;
}

function showErrorMessage(text) {
    if ($.fn.jGrowl) {
        $.jGrowl("<i class='fa fa-warning'></i> " + text, {
            theme: 'alert alert-danger',
            position: 'top-right',
            pool: 2,
            closer: false,
            closerTemplate: '',
            life: 5000,
            themeState: '',
        });
    } else {
        alert(text);
    }
    return true;
}

function page_loaded() {
    $('.popover-trigger').popover({
        trigger: "hover"
    });
    $('.ui-portlet-content').each(function() {
        if (jQuery.trim($(this).html()) == '') {
            $(this).parent('.ui-portlet').hide();
        }
    });
    $('[data-toggle="tooltip"],.showtooltip').tooltip({
        container: 'body',
        html: true
    });
    $('[data-toggle="popover"]').popover({
        html: true
    });
    $('.delete-pop').popover({
        trigger: 'click',
        container: 'body',
        placement: 'top',
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3>' + '<div class="popover-content">确定删除此内容吗？ </div>' + ' <div class="popover_bar text-center" style="margin-bottom:10px;"><a href="javascript:;" class="btn btn-primary btn-sm pop-comfirm">确定</a>&nbsp;<a href="javascript:;" class="btn btn-default btn-sm pop-cancel">取消</a></div>' + '</div>',
        html: true,
    }).unbind('shown.bs.popover').on('shown.bs.popover', function() {
        var $this = $(this);
        $this.trigger('blur');
        var pop = $this.data('bs.popover').tip();
        pop.find('.pop-cancel').unbind('click').click(function() {
            $this.popover('hide');
        });
        pop.find('.pop-comfirm').unbind('click').click(function() {
            $this.popover('hide');
            ajaxAction($this.data('url'), null, null, function(request) {
                if (request.success || request.ret == 0) {
                    $this.parents('.appmsg:first').remove();
                }
            });
        })
    });
}
$(document).ready(function() {
    page_loaded();
});

function detectCapsLock(e, obj) {
    var valueCapsLock = e.keyCode ? e.keyCode : e.which;
    var valueShift = e.shiftKey ? e.shiftKey : (valueCapsLock == 16 ? true : false);
    obj.className = (valueCapsLock >= 65 && valueCapsLock <= 90 && !valueShift || valueCapsLock >= 97 && valueCapsLock <= 122 && valueShift) ? 'form-control clck txt' : 'form-control txt';
    $(obj).blur(function() {
        $(this).className = 'form-control txt';
    });
}

function showValidateErrors(request, model, suffix) {
    var tempmodel = model;
    var field_name = '';
    var error_message = '';
    var firsterror = true;
    for (var i in request) {
        tempmodel = model;
        field_name = i;
        var split_str = i.split('.');
        if (split_str.length > 1) {
            tempmodel = split_str[0];
            field_name = split_str[1];
        }
        var field = field_name.replace(/\b\w+\b/g, function(word) {
            return word.substring(0, 1).toUpperCase() + word.substring(1);
        });
        field = field.replace(/\_\w/g, function(word) {
            return word.substring(1, 2).toUpperCase();
        });
        if (firsterror) {
            window.location.hash = '#' + tempmodel + field + suffix;
            firsterror = false;
        }
        $("#error_" + tempmodel + field + suffix).remove();
        $('#' + tempmodel + field + suffix).parent('div:first').append("<span id='error_" + tempmodel + field + suffix + "' name='error_" + tempmodel + field + suffix + "' class='ui-state-error ui-corner-all' style='position: absolute;'><span class='ui-icon ui-icon-alert'></span>" + request[i] + "</span>");
        var txt = $('label[for="' + tempmodel + field + suffix + '"]').html();
        error_message += txt + ':' + request[i] + "<br/>";
    }
    if (error_message != '') {
        show_message(error_message, 8);
    }
}

function addNewCrawlRegular() {
    var field = $('.model-schema-list').val();
    $('.model-schema-area').before($('<div class="regexp-add"><label for="CrawlRegexp' + field + '">Regexp ' + field + '</label><textarea id="CrawlRegexp' + field + '" cols="60" rows="2" name="data[Crawl][regexp_' + field + ']"></textarea></div>'));
}
var AjaxHelper = {
    dialog_open: false,
    open_help: function() {
        $('#ajax_doing_help').html('<img src="/img/ajax/circle_ball.gif" /> 正在提交...');
        $('#ajax_doing_help').dialog({
            width: 650,
            close: function(event, ui) {
                $('#invite-user-html').hide().appendTo('body');
            }
        });
        this.dialog_open = true;
    },
    has_init_tab: false,
    friends_tab: null
};

function showAlert(info, obj, infoSign) {
    if ($('#' + infoSign).size() > 0) {
        return;
    }
    var newd = document.createElement("span");
    newd.id = infoSign;
    newd.className = 'ui-state-error';
    newd.innerHTML = info;
    $(obj).append($(newd));
}

function removeAlert(infoSign) {
    $(infoSign).remove();
}

function clearSubmitError(obj) {
    $(obj).parent().find('.errorInfo').remove();
}

function clearWaitInfo(obj) {
    if (obj) {
        $(obj).parent().find('.waitInfo').remove();
    } else {
        $(".waitInfo").remove();
    }
}

function showWaitInfo(info, obj) {
    try {
        if (obj == null) return;
        clearWaitInfo();
        var newd = document.createElement("span");
        newd.className = 'waitInfo';
        newd.id = 'waitInfo';
        newd.innerHTML = info;
        obj.parentNode.appendChild(newd);
    } catch (e) {}
}

function showWaitInfoOnInner(info, obj) {
    try {
        if (obj == null) return;
        clearWaitInfo();
        var newd = document.createElement("span");
        newd.className = 'waitInfo';
        newd.id = 'waitInfo';
        newd.innerHTML = info;
        obj.innerHTML = '';
        obj.appendChild(newd);
    } catch (e) {}
}

function upload_multi_file(file, serverData) {
    try {
        var progress = progress_list[file.id];
        progress.setComplete();
        if (serverData === " ") {
            this.customSettings.upload_successful = false;
        } else {
            var data = eval("(" + serverData + ")");
            if (data.status == 1) {
                this.customSettings.upload_successful = true;
                var filesize = '';
                if (data.size / 1024 / 1024 > 1) {
                    filesize = Math.round(data.size / 1024 / 1024 * 100) / 100 + 'MB';
                } else if (data.size / 1024 > 1) {
                    filesize = Math.round(data.size / 1024 * 100) / 100 + 'KB';
                } else {
                    filesize = data.size + 'B';
                }
                $("#fileuploadinfo_" + data.fieldname + "_" + data.data_id).append('<div class="col-md-4  upload-fileitem">' + ' <a target="_blank" href="' + BASEURL + '/uploadfiles/download/' + data.id + '" class="btn btn-success "><i class="glyphicon glyphicon-cloud-download"></i><div>' + data.name + '</div><small>File Size: ' + filesize + '</small></a>' + '<i class="glyphicon glyphicon-remove remove" data-id="' + data.data_id + '" title="Remove"></i>' + '</div>');
            }
        }
    } catch (e) {
        alert(serverData);
    }
}
$(function() {
    $('.ui-navi li').hover(function() {
        $(this).children(".ui-drop-menu:first").show();
    }, function() {
        $(this).children(".ui-drop-menu:first").hide();
    });
    $(document).on('click', '[data-toggle="tab"]', function() {
        var target = $(this).attr('href');
        if ($(target).html() == "" || $(this).data('refresh') == "always") {
            if ($(this).data('url')) {
                $(target).html('<img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载...');
                $(target).load($(this).data('url'), function() {
                    tab_loaded();

                    function tab_loaded() {
                        page_loaded();
                        $(target).find('a').click(function() {
                            var url = $(this).attr('href');
                            var re = /^#/;
                            if (typeof($(this).attr('onclick')) != "undefined" || $(this).attr('target') == '_blank' || typeof(url) == "undefined" || re.test(url) || url.substr(0, 10).toLowerCase() == 'javascript') {
                                return true;
                            }
                            $(target).load(url, function() {
                                tab_loaded();
                            });
                            return false;
                        });
                    }
                });
            }
        }
    });
    if (sso.is_login()) {
        getUnreadMsgNum();
    }
    $(".ui-sidemenu li").hover(function() {
        var li_width = $(this).width();
        var li_offset = $(this).offset();
        $(this).children("a").addClass("ui-state-default");
        var submenu = $(this).children(".ui-secondmenu");
        if (li_offset.left > $(window).width() / 2) {
            submenu.css('left', -submenu.width() + 2).show();
        } else {
            submenu.css('left', li_width - 2).show();
        }
        var offset = submenu.offset();
        if (li_offset.top - $(window).scrollTop() + submenu.height() > $(window).height()) {
            if (submenu.height() < $(window).height()) {
                submenu.css('top', $(window).height() - 2 - li_offset.top - submenu.height() + $(window).scrollTop());
            } else {
                submenu.css('top', -li_offset.top + $(window).scrollTop() + 2);
            }
        }
    }, function() {
        $(this).children("a").removeClass("ui-state-default");
        $(".ui-secondmenu", this).hide();
    });
});

function WxMsgCoverimgUploaded(data) {
    if ($('#WxMsgThumbMediaId').size() > 0) {
        if (data.media_id) {
            $('#WxMsgThumbMediaId').val(data.media_id);
        } else {
            $('#WxMsgThumbMediaId').val('');
        }
    }
}(function($) {
    $.fn.UItoTop = function(options) {
        var defaults = {
                text: 'To Top',
                min: 200,
                inDelay: 600,
                outDelay: 400,
                containerID: 'toTop',
                containerHoverID: 'toTopHover',
                scrollSpeed: 1200,
                easingType: 'linear'
            },
            settings = $.extend(defaults, options),
            containerIDhash = '#' + settings.containerID,
            containerHoverIDHash = '#' + settings.containerHoverID;
        $('body').append('<a href="#" id="' + settings.containerID + '">' + settings.text + '</a>');
        $(containerIDhash).hide().on('click.UItoTop', function() {
            $('html, body').animate({
                scrollTop: 0
            }, settings.scrollSpeed, settings.easingType);
            $('#' + settings.containerHoverID, this).stop().animate({
                'opacity': 0
            }, settings.inDelay, settings.easingType);
            return false;
        }).prepend('<span id="' + settings.containerHoverID + '"></span>').hover(function() {
            $(containerHoverIDHash, this).stop().animate({
                'opacity': 1
            }, 600, 'linear');
        }, function() {
            $(containerHoverIDHash, this).stop().animate({
                'opacity': 0
            }, 700, 'linear');
        });
        $(window).scroll(function() {
            var sd = $(window).scrollTop();
            if (typeof document.body.style.maxHeight === "undefined") {
                $(containerIDhash).css({
                    'position': 'absolute',
                    'top': sd + $(window).height() - 50
                });
            }
            if (sd > settings.min) $(containerIDhash).fadeIn(settings.inDelay);
            else $(containerIDhash).fadeOut(settings.Outdelay);
        });
    };
})(jQuery);
$(function() {
    $().UItoTop({
        easingType: 'easeOutQuart'
    });
});
/**!
 * MixItUp v2.1.9
 *
 * @copyright Copyright 2015 KunkaLabs Limited.
 * @author    KunkaLabs Limited.
 * @link      https://mixitup.kunkalabs.com
 *
 * @license   Commercial use requires a commercial license.
 *            https://mixitup.kunkalabs.com/licenses/
 *
 *            Non-commercial use permitted under terms of CC-BY-NC license.
 *            http://creativecommons.org/licenses/by-nc/3.0/
 */
!
    function(a, b) {
        a.MixItUp = function() {
            var b = this;
            b._execAction("_constructor", 0), a.extend(b, {
                selectors: {
                    target: ".mix",
                    filter: ".filter",
                    sort: ".sort"
                },
                animation: {
                    enable: !0,
                    effects: "fade scale",
                    duration: 600,
                    easing: "ease",
                    perspectiveDistance: "3000",
                    perspectiveOrigin: "50% 50%",
                    queue: !0,
                    queueLimit: 1,
                    animateChangeLayout: !1,
                    animateResizeContainer: !0,
                    animateResizeTargets: !1,
                    staggerSequence: !1,
                    reverseOut: !1
                },
                callbacks: {
                    onMixLoad: !1,
                    onMixStart: !1,
                    onMixBusy: !1,
                    onMixEnd: !1,
                    onMixFail: !1,
                    _user: !1
                },
                controls: {
                    enable: !0,
                    live: !1,
                    toggleFilterButtons: !1,
                    toggleLogic: "or",
                    activeClass: "active"
                },
                layout: {
                    display: "inline-block",
                    containerClass: "",
                    containerClassFail: "fail"
                },
                load: {
                    filter: "all",
                    sort: !1
                },
                _$body: null,
                _$container: null,
                _$targets: null,
                _$parent: null,
                _$sortButtons: null,
                _$filterButtons: null,
                _suckMode: !1,
                _mixing: !1,
                _sorting: !1,
                _clicking: !1,
                _loading: !0,
                _changingLayout: !1,
                _changingClass: !1,
                _changingDisplay: !1,
                _origOrder: [],
                _startOrder: [],
                _newOrder: [],
                _activeFilter: null,
                _toggleArray: [],
                _toggleString: "",
                _activeSort: "default:asc",
                _newSort: null,
                _startHeight: null,
                _newHeight: null,
                _incPadding: !0,
                _newDisplay: null,
                _newClass: null,
                _targetsBound: 0,
                _targetsDone: 0,
                _queue: [],
                _$show: a(),
                _$hide: a()
            }), b._execAction("_constructor", 1)
        }, a.MixItUp.prototype = {
            constructor: a.MixItUp,
            _instances: {},
            _handled: {
                _filter: {},
                _sort: {}
            },
            _bound: {
                _filter: {},
                _sort: {}
            },
            _actions: {},
            _filters: {},
            extend: function(b) {
                for (var c in b) a.MixItUp.prototype[c] = b[c]
            },
            addAction: function(b, c, d, e) {
                a.MixItUp.prototype._addHook("_actions", b, c, d, e)
            },
            addFilter: function(b, c, d, e) {
                a.MixItUp.prototype._addHook("_filters", b, c, d, e)
            },
            _addHook: function(b, c, d, e, f) {
                var g = a.MixItUp.prototype[b],
                    h = {};
                f = 1 === f || "post" === f ? "post" : "pre", h[c] = {}, h[c][f] = {}, h[c][f][d] = e, a.extend(!0, g, h)
            },
            _init: function(b, c) {
                var d = this;
                if (d._execAction("_init", 0, arguments), c && a.extend(!0, d, c), d._$body = a("body"), d._domNode = b, d._$container = a(b), d._$container.addClass(d.layout.containerClass), d._id = b.id, d._platformDetect(), d._brake = d._getPrefixedCSS("transition", "none"), d._refresh(!0), d._$parent = d._$targets.parent().length ? d._$targets.parent() : d._$container, d.load.sort && (d._newSort = d._parseSort(d.load.sort), d._newSortString = d.load.sort, d._activeSort = d.load.sort, d._sort(), d._printSort()), d._activeFilter = "all" === d.load.filter ? d.selectors.target : "none" === d.load.filter ? "" : d.load.filter, d.controls.enable && d._bindHandlers(), d.controls.toggleFilterButtons) {
                    d._buildToggleArray();
                    for (var e = 0; e < d._toggleArray.length; e++) d._updateControls({
                        filter: d._toggleArray[e],
                        sort: d._activeSort
                    }, !0)
                } else d.controls.enable && d._updateControls({
                    filter: d._activeFilter,
                    sort: d._activeSort
                });
                d._filter(), d._init = !0, d._$container.data("mixItUp", d), d._execAction("_init", 1, arguments), d._buildState(), d._$targets.css(d._brake), d._goMix(d.animation.enable)
            },
            _platformDetect: function() {
                var a = this,
                    c = ["Webkit", "Moz", "O", "ms"],
                    d = ["webkit", "moz"],
                    e = window.navigator.appVersion.match(/Chrome\/(\d+)\./) || !1,
                    f = "undefined" != typeof InstallTrigger,
                    g = function(a) {
                        for (var b = 0; b < c.length; b++) if (c[b] + "Transition" in a.style) return {
                            prefix: "-" + c[b].toLowerCase() + "-",
                            vendor: c[b]
                        };
                        return "transition" in a.style ? "" : !1
                    },
                    h = g(a._domNode);
                a._execAction("_platformDetect", 0), a._chrome = e ? parseInt(e[1], 10) : !1, a._ff = f ? parseInt(window.navigator.userAgent.match(/rv:([^)]+)\)/)[1]) : !1, a._prefix = h.prefix, a._vendor = h.vendor, a._suckMode = window.atob && a._prefix ? !1 : !0, a._suckMode && (a.animation.enable = !1), a._ff && a._ff <= 4 && (a.animation.enable = !1);
                for (var i = 0; i < d.length && !window.requestAnimationFrame; i++) window.requestAnimationFrame = window[d[i] + "RequestAnimationFrame"];
                "function" != typeof Object.getPrototypeOf && ("object" == typeof "test".__proto__ ? Object.getPrototypeOf = function(a) {
                    return a.__proto__
                } : Object.getPrototypeOf = function(a) {
                    return a.constructor.prototype
                }), a._domNode.nextElementSibling === b && Object.defineProperty(Element.prototype, "nextElementSibling", {
                    get: function() {
                        for (var a = this.nextSibling; a;) {
                            if (1 === a.nodeType) return a;
                            a = a.nextSibling
                        }
                        return null
                    }
                }), a._execAction("_platformDetect", 1)
            },
            _refresh: function(a, c) {
                var d = this;
                d._execAction("_refresh", 0, arguments), d._$targets = d._$container.find(d.selectors.target);
                for (var e = 0; e < d._$targets.length; e++) {
                    var f = d._$targets[e];
                    if (f.dataset === b || c) {
                        f.dataset = {};
                        for (var g = 0; g < f.attributes.length; g++) {
                            var h = f.attributes[g],
                                i = h.name,
                                j = h.value;
                            if (i.indexOf("data-") > -1) {
                                var k = d._helpers._camelCase(i.substring(5, i.length));
                                f.dataset[k] = j
                            }
                        }
                    }
                    f.mixParent === b && (f.mixParent = d._id)
                }
                if (d._$targets.length && a || !d._origOrder.length && d._$targets.length) {
                    d._origOrder = [];
                    for (var e = 0; e < d._$targets.length; e++) {
                        var f = d._$targets[e];
                        d._origOrder.push(f)
                    }
                }
                d._execAction("_refresh", 1, arguments)
            },
            _bindHandlers: function() {
                var c = this,
                    d = a.MixItUp.prototype._bound._filter,
                    e = a.MixItUp.prototype._bound._sort;
                c._execAction("_bindHandlers", 0), c.controls.live ? c._$body.on("click.mixItUp." + c._id, c.selectors.sort, function() {
                    c._processClick(a(this), "sort")
                }).on("click.mixItUp." + c._id, c.selectors.filter, function() {
                    c._processClick(a(this), "filter")
                }) : (c._$sortButtons = a(c.selectors.sort), c._$filterButtons = a(c.selectors.filter), c._$sortButtons.on("click.mixItUp." + c._id, function() {
                    c._processClick(a(this), "sort")
                }), c._$filterButtons.on("click.mixItUp." + c._id, function() {
                    c._processClick(a(this), "filter")
                })), d[c.selectors.filter] = d[c.selectors.filter] === b ? 1 : d[c.selectors.filter] + 1, e[c.selectors.sort] = e[c.selectors.sort] === b ? 1 : e[c.selectors.sort] + 1, c._execAction("_bindHandlers", 1)
            },
            _processClick: function(c, d) {
                var e = this,
                    f = function(c, d, f) {
                        var g = a.MixItUp.prototype;
                        g._handled["_" + d][e.selectors[d]] = g._handled["_" + d][e.selectors[d]] === b ? 1 : g._handled["_" + d][e.selectors[d]] + 1, g._handled["_" + d][e.selectors[d]] === g._bound["_" + d][e.selectors[d]] && (c[(f ? "remove" : "add") + "Class"](e.controls.activeClass), delete g._handled["_" + d][e.selectors[d]])
                    };
                if (e._execAction("_processClick", 0, arguments), !e._mixing || e.animation.queue && e._queue.length < e.animation.queueLimit) {
                    if (e._clicking = !0, "sort" === d) {
                        var g = c.attr("data-sort");
                        (!c.hasClass(e.controls.activeClass) || g.indexOf("random") > -1) && (a(e.selectors.sort).removeClass(e.controls.activeClass), f(c, d), e.sort(g))
                    }
                    if ("filter" === d) {
                        var h, i = c.attr("data-filter"),
                            j = "or" === e.controls.toggleLogic ? "," : "";
                        e.controls.toggleFilterButtons ? (e._buildToggleArray(), c.hasClass(e.controls.activeClass) ? (f(c, d, !0), h = e._toggleArray.indexOf(i), e._toggleArray.splice(h, 1)) : (f(c, d), e._toggleArray.push(i)), e._toggleArray = a.grep(e._toggleArray, function(a) {
                            return a
                        }), e._toggleString = e._toggleArray.join(j), e.filter(e._toggleString)) : c.hasClass(e.controls.activeClass) || (a(e.selectors.filter).removeClass(e.controls.activeClass), f(c, d), e.filter(i))
                    }
                    e._execAction("_processClick", 1, arguments)
                } else "function" == typeof e.callbacks.onMixBusy && e.callbacks.onMixBusy.call(e._domNode, e._state, e), e._execAction("_processClickBusy", 1, arguments)
            },
            _buildToggleArray: function() {
                var a = this,
                    b = a._activeFilter.replace(/\s/g, "");
                if (a._execAction("_buildToggleArray", 0, arguments), "or" === a.controls.toggleLogic) a._toggleArray = b.split(",");
                else {
                    a._toggleArray = b.split("."), !a._toggleArray[0] && a._toggleArray.shift();
                    for (var c, d = 0; c = a._toggleArray[d]; d++) a._toggleArray[d] = "." + c
                }
                a._execAction("_buildToggleArray", 1, arguments)
            },
            _updateControls: function(c, d) {
                var e = this,
                    f = {
                        filter: c.filter,
                        sort: c.sort
                    },
                    g = function(a, b) {
                        try {
                            d && "filter" === h && "none" !== f.filter && "" !== f.filter ? a.filter(b).addClass(e.controls.activeClass) : a.removeClass(e.controls.activeClass).filter(b).addClass(e.controls.activeClass)
                        } catch (c) {}
                    },
                    h = "filter",
                    i = null;
                e._execAction("_updateControls", 0, arguments), c.filter === b && (f.filter = e._activeFilter), c.sort === b && (f.sort = e._activeSort), f.filter === e.selectors.target && (f.filter = "all");
                for (var j = 0; 2 > j; j++) i = e.controls.live ? a(e.selectors[h]) : e["_$" + h + "Buttons"], i && g(i, "[data-" + h + '="' + f[h] + '"]'), h = "sort";
                e._execAction("_updateControls", 1, arguments)
            },
            _filter: function() {
                var b = this;
                b._execAction("_filter", 0);
                for (var c = 0; c < b._$targets.length; c++) {
                    var d = a(b._$targets[c]);
                    d.is(b._activeFilter) ? b._$show = b._$show.add(d) : b._$hide = b._$hide.add(d)
                }
                b._execAction("_filter", 1)
            },
            _sort: function() {
                var a = this,
                    b = function(a) {
                        for (var b = a.slice(), c = b.length, d = c; d--;) {
                            var e = parseInt(Math.random() * c),
                                f = b[d];
                            b[d] = b[e], b[e] = f
                        }
                        return b
                    };
                a._execAction("_sort", 0), a._startOrder = [];
                for (var c = 0; c < a._$targets.length; c++) {
                    var d = a._$targets[c];
                    a._startOrder.push(d)
                }
                switch (a._newSort[0].sortBy) {
                    case "default":
                        a._newOrder = a._origOrder;
                        break;
                    case "random":
                        a._newOrder = b(a._startOrder);
                        break;
                    case "custom":
                        a._newOrder = a._newSort[0].order;
                        break;
                    default:
                        a._newOrder = a._startOrder.concat().sort(function(b, c) {
                            return a._compare(b, c)
                        })
                }
                a._execAction("_sort", 1)
            },
            _compare: function(a, b, c) {
                c = c ? c : 0;
                var d = this,
                    e = d._newSort[c].order,
                    f = function(a) {
                        return a.dataset[d._newSort[c].sortBy] || 0
                    },
                    g = isNaN(1 * f(a)) ? f(a).toLowerCase() : 1 * f(a),
                    h = isNaN(1 * f(b)) ? f(b).toLowerCase() : 1 * f(b);
                return h > g ? "asc" === e ? -1 : 1 : g > h ? "asc" === e ? 1 : -1 : g === h && d._newSort.length > c + 1 ? d._compare(a, b, c + 1) : 0
            },
            _printSort: function(a) {
                var b = this,
                    c = a ? b._startOrder : b._newOrder,
                    d = b._$parent[0].querySelectorAll(b.selectors.target),
                    e = d.length ? d[d.length - 1].nextElementSibling : null,
                    f = document.createDocumentFragment();
                b._execAction("_printSort", 0, arguments);
                for (var g = 0; g < d.length; g++) {
                    var h = d[g],
                        i = h.nextSibling;
                    "absolute" !== h.style.position && (i && "#text" === i.nodeName && b._$parent[0].removeChild(i), b._$parent[0].removeChild(h))
                }
                for (var g = 0; g < c.length; g++) {
                    var j = c[g];
                    if ("default" !== b._newSort[0].sortBy || "desc" !== b._newSort[0].order || a) f.appendChild(j), f.appendChild(document.createTextNode(" "));
                    else {
                        var k = f.firstChild;
                        f.insertBefore(j, k), f.insertBefore(document.createTextNode(" "), j)
                    }
                }
                e ? b._$parent[0].insertBefore(f, e) : b._$parent[0].appendChild(f), b._execAction("_printSort", 1, arguments)
            },
            _parseSort: function(a) {
                for (var b = this, c = "string" == typeof a ? a.split(" ") : [a], d = [], e = 0; e < c.length; e++) {
                    var f = "string" == typeof a ? c[e].split(":") : ["custom", c[e]],
                        g = {
                            sortBy: b._helpers._camelCase(f[0]),
                            order: f[1] || "asc"
                        };
                    if (d.push(g), "default" === g.sortBy || "random" === g.sortBy) break
                }
                return b._execFilter("_parseSort", d, arguments)
            },
            _parseEffects: function() {
                var a = this,
                    b = {
                        opacity: "",
                        transformIn: "",
                        transformOut: "",
                        filter: ""
                    },
                    c = function(b, c, d) {
                        if (a.animation.effects.indexOf(b) > -1) {
                            if (c) {
                                var e = a.animation.effects.indexOf(b + "(");
                                if (e > -1) {
                                    var f = a.animation.effects.substring(e),
                                        g = /\(([^)]+)\)/.exec(f),
                                        h = g[1];
                                    return {
                                        val: h
                                    }
                                }
                            }
                            return !0
                        }
                        return !1
                    },
                    d = function(a, b) {
                        return b ? "-" === a.charAt(0) ? a.substr(1, a.length) : "-" + a : a
                    },
                    e = function(a, e) {
                        for (var f = [
                            ["scale", ".01"],
                            ["translateX", "20px"],
                            ["translateY", "20px"],
                            ["translateZ", "20px"],
                            ["rotateX", "90deg"],
                            ["rotateY", "90deg"],
                            ["rotateZ", "180deg"]
                        ], g = 0; g < f.length; g++) {
                            var h = f[g][0],
                                i = f[g][1],
                                j = e && "scale" !== h;
                            b[a] += c(h) ? h + "(" + d(c(h, !0).val || i, j) + ") " : ""
                        }
                    };
                return b.opacity = c("fade") ? c("fade", !0).val || "0" : "1", e("transformIn"), a.animation.reverseOut ? e("transformOut", !0) : b.transformOut = b.transformIn, b.transition = {}, b.transition = a._getPrefixedCSS("transition", "all " + a.animation.duration + "ms " + a.animation.easing + ", opacity " + a.animation.duration + "ms linear"), a.animation.stagger = c("stagger") ? !0 : !1, a.animation.staggerDuration = parseInt(c("stagger") && c("stagger", !0).val ? c("stagger", !0).val : 100), a._execFilter("_parseEffects", b)
            },
            _buildState: function(a) {
                var b = this,
                    c = {};
                return b._execAction("_buildState", 0), c = {
                    activeFilter: "" === b._activeFilter ? "none" : b._activeFilter,
                    activeSort: a && b._newSortString ? b._newSortString : b._activeSort,
                    fail: !b._$show.length && "" !== b._activeFilter,
                    $targets: b._$targets,
                    $show: b._$show,
                    $hide: b._$hide,
                    totalTargets: b._$targets.length,
                    totalShow: b._$show.length,
                    totalHide: b._$hide.length,
                    display: a && b._newDisplay ? b._newDisplay : b.layout.display
                }, a ? b._execFilter("_buildState", c) : (b._state = c, void b._execAction("_buildState", 1))
            },
            _goMix: function(a) {
                var b = this,
                    c = function() {
                        b._chrome && 31 === b._chrome && f(b._$parent[0]), b._setInter(), d()
                    },
                    d = function() {
                        var a = window.pageYOffset,
                            c = window.pageXOffset;
                        document.documentElement.scrollHeight;
                        b._getInterMixData(), b._setFinal(), b._getFinalMixData(), window.pageYOffset !== a && window.scrollTo(c, a), b._prepTargets(), window.requestAnimationFrame ? requestAnimationFrame(e) : setTimeout(function() {
                            e()
                        }, 20)
                    },
                    e = function() {
                        b._animateTargets(), 0 === b._targetsBound && b._cleanUp()
                    },
                    f = function(a) {
                        var b = a.parentElement,
                            c = document.createElement("div"),
                            d = document.createDocumentFragment();
                        b.insertBefore(c, a), d.appendChild(a), b.replaceChild(a, c)
                    },
                    g = b._buildState(!0);
                b._execAction("_goMix", 0, arguments), !b.animation.duration && (a = !1), b._mixing = !0, b._$container.removeClass(b.layout.containerClassFail), "function" == typeof b.callbacks.onMixStart && b.callbacks.onMixStart.call(b._domNode, b._state, g, b), b._$container.trigger("mixStart", [b._state, g, b]), b._getOrigMixData(), a && !b._suckMode ? window.requestAnimationFrame ? requestAnimationFrame(c) : c() : b._cleanUp(), b._execAction("_goMix", 1, arguments)
            },
            _getTargetData: function(a, b) {
                var c, d = this;
                a.dataset[b + "PosX"] = a.offsetLeft, a.dataset[b + "PosY"] = a.offsetTop, d.animation.animateResizeTargets && (c = d._suckMode ? {
                    marginBottom: "",
                    marginRight: ""
                } : window.getComputedStyle(a), a.dataset[b + "MarginBottom"] = parseInt(c.marginBottom), a.dataset[b + "MarginRight"] = parseInt(c.marginRight), a.dataset[b + "Width"] = a.offsetWidth, a.dataset[b + "Height"] = a.offsetHeight)
            },
            _getOrigMixData: function() {
                var a = this,
                    b = a._suckMode ? {
                        boxSizing: ""
                    } : window.getComputedStyle(a._$parent[0]),
                    c = b.boxSizing || b[a._vendor + "BoxSizing"];
                a._incPadding = "border-box" === c, a._execAction("_getOrigMixData", 0), !a._suckMode && (a.effects = a._parseEffects()), a._$toHide = a._$hide.filter(":visible"), a._$toShow = a._$show.filter(":hidden"), a._$pre = a._$targets.filter(":visible"), a._startHeight = a._incPadding ? a._$parent.outerHeight() : a._$parent.height();
                for (var d = 0; d < a._$pre.length; d++) {
                    var e = a._$pre[d];
                    a._getTargetData(e, "orig")
                }
                a._execAction("_getOrigMixData", 1)
            },
            _setInter: function() {
                var a = this;
                a._execAction("_setInter", 0), a._changingLayout && a.animation.animateChangeLayout ? (a._$toShow.css("display", a._newDisplay), a._changingClass && a._$container.removeClass(a.layout.containerClass).addClass(a._newClass)) : a._$toShow.css("display", a.layout.display), a._execAction("_setInter", 1)
            },
            _getInterMixData: function() {
                var a = this;
                a._execAction("_getInterMixData", 0);
                for (var b = 0; b < a._$toShow.length; b++) {
                    var c = a._$toShow[b];
                    a._getTargetData(c, "inter")
                }
                for (var b = 0; b < a._$pre.length; b++) {
                    var c = a._$pre[b];
                    a._getTargetData(c, "inter")
                }
                a._execAction("_getInterMixData", 1)
            },
            _setFinal: function() {
                var a = this;
                a._execAction("_setFinal", 0), a._sorting && a._printSort(), a._$toHide.removeStyle("display"), a._changingLayout && a.animation.animateChangeLayout && a._$pre.css("display", a._newDisplay), a._execAction("_setFinal", 1)
            },
            _getFinalMixData: function() {
                var a = this;
                a._execAction("_getFinalMixData", 0);
                for (var b = 0; b < a._$toShow.length; b++) {
                    var c = a._$toShow[b];
                    a._getTargetData(c, "final")
                }
                for (var b = 0; b < a._$pre.length; b++) {
                    var c = a._$pre[b];
                    a._getTargetData(c, "final")
                }
                a._newHeight = a._incPadding ? a._$parent.outerHeight() : a._$parent.height(), a._sorting && a._printSort(!0), a._$toShow.removeStyle("display"), a._$pre.css("display", a.layout.display), a._changingClass && a.animation.animateChangeLayout && a._$container.removeClass(a._newClass).addClass(a.layout.containerClass), a._execAction("_getFinalMixData", 1)
            },
            _prepTargets: function() {
                var b = this,
                    c = {
                        _in: b._getPrefixedCSS("transform", b.effects.transformIn),
                        _out: b._getPrefixedCSS("transform", b.effects.transformOut)
                    };
                b._execAction("_prepTargets", 0), b.animation.animateResizeContainer && b._$parent.css("height", b._startHeight + "px");
                for (var d = 0; d < b._$toShow.length; d++) {
                    var e = b._$toShow[d],
                        f = a(e);
                    e.style.opacity = b.effects.opacity, e.style.display = b._changingLayout && b.animation.animateChangeLayout ? b._newDisplay : b.layout.display, f.css(c._in), b.animation.animateResizeTargets && (e.style.width = e.dataset.finalWidth + "px", e.style.height = e.dataset.finalHeight + "px", e.style.marginRight = -(e.dataset.finalWidth - e.dataset.interWidth) + 1 * e.dataset.finalMarginRight + "px", e.style.marginBottom = -(e.dataset.finalHeight - e.dataset.interHeight) + 1 * e.dataset.finalMarginBottom + "px")
                }
                for (var d = 0; d < b._$pre.length; d++) {
                    var e = b._$pre[d],
                        f = a(e),
                        g = {
                            x: e.dataset.origPosX - e.dataset.interPosX,
                            y: e.dataset.origPosY - e.dataset.interPosY
                        },
                        c = b._getPrefixedCSS("transform", "translate(" + g.x + "px," + g.y + "px)");
                    f.css(c), b.animation.animateResizeTargets && (e.style.width = e.dataset.origWidth + "px", e.style.height = e.dataset.origHeight + "px", e.dataset.origWidth - e.dataset.finalWidth && (e.style.marginRight = -(e.dataset.origWidth - e.dataset.interWidth) + 1 * e.dataset.origMarginRight + "px"), e.dataset.origHeight - e.dataset.finalHeight && (e.style.marginBottom = -(e.dataset.origHeight - e.dataset.interHeight) + 1 * e.dataset.origMarginBottom + "px"))
                }
                b._execAction("_prepTargets", 1)
            },
            _animateTargets: function() {
                var b = this;
                b._execAction("_animateTargets", 0), b._targetsDone = 0, b._targetsBound = 0, b._$parent.css(b._getPrefixedCSS("perspective", b.animation.perspectiveDistance + "px")).css(b._getPrefixedCSS("perspective-origin", b.animation.perspectiveOrigin)), b.animation.animateResizeContainer && b._$parent.css(b._getPrefixedCSS("transition", "height " + b.animation.duration + "ms ease")).css("height", b._newHeight + "px");
                for (var c = 0; c < b._$toShow.length; c++) {
                    var d = b._$toShow[c],
                        e = a(d),
                        f = {
                            x: d.dataset.finalPosX - d.dataset.interPosX,
                            y: d.dataset.finalPosY - d.dataset.interPosY
                        },
                        g = b._getDelay(c),
                        h = {};
                    d.style.opacity = "";
                    for (var i = 0; 2 > i; i++) {
                        var j = 0 === i ? j = b._prefix : "";
                        b._ff && b._ff <= 20 && (h[j + "transition-property"] = "all", h[j + "transition-timing-function"] = b.animation.easing + "ms", h[j + "transition-duration"] = b.animation.duration + "ms"), h[j + "transition-delay"] = g + "ms", h[j + "transform"] = "translate(" + f.x + "px," + f.y + "px)"
                    }(b.effects.transform || b.effects.opacity) && b._bindTargetDone(e), b._ff && b._ff <= 20 ? e.css(h) : e.css(b.effects.transition).css(h)
                }
                for (var c = 0; c < b._$pre.length; c++) {
                    var d = b._$pre[c],
                        e = a(d),
                        f = {
                            x: d.dataset.finalPosX - d.dataset.interPosX,
                            y: d.dataset.finalPosY - d.dataset.interPosY
                        },
                        g = b._getDelay(c);
                    (d.dataset.finalPosX !== d.dataset.origPosX || d.dataset.finalPosY !== d.dataset.origPosY) && b._bindTargetDone(e), e.css(b._getPrefixedCSS("transition", "all " + b.animation.duration + "ms " + b.animation.easing + " " + g + "ms")), e.css(b._getPrefixedCSS("transform", "translate(" + f.x + "px," + f.y + "px)")), b.animation.animateResizeTargets && (d.dataset.origWidth - d.dataset.finalWidth && 1 * d.dataset.finalWidth && (d.style.width = d.dataset.finalWidth + "px", d.style.marginRight = -(d.dataset.finalWidth - d.dataset.interWidth) + 1 * d.dataset.finalMarginRight + "px"), d.dataset.origHeight - d.dataset.finalHeight && 1 * d.dataset.finalHeight && (d.style.height = d.dataset.finalHeight + "px", d.style.marginBottom = -(d.dataset.finalHeight - d.dataset.interHeight) + 1 * d.dataset.finalMarginBottom + "px"))
                }
                b._changingClass && b._$container.removeClass(b.layout.containerClass).addClass(b._newClass);
                for (var c = 0; c < b._$toHide.length; c++) {
                    for (var d = b._$toHide[c], e = a(d), g = b._getDelay(c), k = {}, i = 0; 2 > i; i++) {
                        var j = 0 === i ? j = b._prefix : "";
                        k[j + "transition-delay"] = g + "ms", k[j + "transform"] = b.effects.transformOut, k.opacity = b.effects.opacity
                    }
                    e.css(b.effects.transition).css(k), (b.effects.transform || b.effects.opacity) && b._bindTargetDone(e)
                }
                b._execAction("_animateTargets", 1)
            },
            _bindTargetDone: function(b) {
                var c = this,
                    d = b[0];
                c._execAction("_bindTargetDone", 0, arguments), d.dataset.bound || (d.dataset.bound = !0, c._targetsBound++, b.on("webkitTransitionEnd.mixItUp transitionend.mixItUp", function(e) {
                    (e.originalEvent.propertyName.indexOf("transform") > -1 || e.originalEvent.propertyName.indexOf("opacity") > -1) && a(e.originalEvent.target).is(c.selectors.target) && (b.off(".mixItUp"), delete d.dataset.bound, c._targetDone())
                })), c._execAction("_bindTargetDone", 1, arguments)
            },
            _targetDone: function() {
                var a = this;
                a._execAction("_targetDone", 0), a._targetsDone++, a._targetsDone === a._targetsBound && a._cleanUp(), a._execAction("_targetDone", 1)
            },
            _cleanUp: function() {
                var b = this,
                    c = b.animation.animateResizeTargets ? "transform opacity width height margin-bottom margin-right" : "transform opacity";
                unBrake = function() {
                    b._$targets.removeStyle("transition", b._prefix)
                }, b._execAction("_cleanUp", 0), b._changingLayout ? b._$show.css("display", b._newDisplay) : b._$show.css("display", b.layout.display), b._$targets.css(b._brake), b._$targets.removeStyle(c, b._prefix).removeAttr("data-inter-pos-x data-inter-pos-y data-final-pos-x data-final-pos-y data-orig-pos-x data-orig-pos-y data-orig-height data-orig-width data-final-height data-final-width data-inter-width data-inter-height data-orig-margin-right data-orig-margin-bottom data-inter-margin-right data-inter-margin-bottom data-final-margin-right data-final-margin-bottom"), b._$hide.removeStyle("display"), b._$parent.removeStyle("height transition perspective-distance perspective perspective-origin-x perspective-origin-y perspective-origin perspectiveOrigin", b._prefix), b._sorting && (b._printSort(), b._activeSort = b._newSortString, b._sorting = !1), b._changingLayout && (b._changingDisplay && (b.layout.display = b._newDisplay, b._changingDisplay = !1), b._changingClass && (b._$parent.removeClass(b.layout.containerClass).addClass(b._newClass), b.layout.containerClass = b._newClass, b._changingClass = !1), b._changingLayout = !1), b._refresh(), b._buildState(), b._state.fail && b._$container.addClass(b.layout.containerClassFail), b._$show = a(), b._$hide = a(), window.requestAnimationFrame && requestAnimationFrame(unBrake), b._mixing = !1, "function" == typeof b.callbacks._user && b.callbacks._user.call(b._domNode, b._state, b), "function" == typeof b.callbacks.onMixEnd && b.callbacks.onMixEnd.call(b._domNode, b._state, b), b._$container.trigger("mixEnd", [b._state, b]), b._state.fail && ("function" == typeof b.callbacks.onMixFail && b.callbacks.onMixFail.call(b._domNode, b._state, b), b._$container.trigger("mixFail", [b._state, b])), b._loading && ("function" == typeof b.callbacks.onMixLoad && b.callbacks.onMixLoad.call(b._domNode, b._state, b), b._$container.trigger("mixLoad", [b._state, b])), b._queue.length && (b._execAction("_queue", 0), b.multiMix(b._queue[0][0], b._queue[0][1], b._queue[0][2]), b._queue.splice(0, 1)), b._execAction("_cleanUp", 1), b._loading = !1
            },
            _getPrefixedCSS: function(a, b, c) {
                var d = this,
                    e = {},
                    f = "",
                    g = -1;
                for (g = 0; 2 > g; g++) f = 0 === g ? d._prefix : "", c ? e[f + a] = f + b : e[f + a] = b;
                return d._execFilter("_getPrefixedCSS", e, arguments)
            },
            _getDelay: function(a) {
                var b = this,
                    c = "function" == typeof b.animation.staggerSequence ? b.animation.staggerSequence.call(b._domNode, a, b._state) : a,
                    d = b.animation.stagger ? c * b.animation.staggerDuration : 0;
                return b._execFilter("_getDelay", d, arguments)
            },
            _parseMultiMixArgs: function(a) {
                for (var b = this, c = {
                    command: null,
                    animate: b.animation.enable,
                    callback: null
                }, d = 0; d < a.length; d++) {
                    var e = a[d];
                    null !== e && ("object" == typeof e || "string" == typeof e ? c.command = e : "boolean" == typeof e ? c.animate = e : "function" == typeof e && (c.callback = e))
                }
                return b._execFilter("_parseMultiMixArgs", c, arguments)
            },
            _parseInsertArgs: function(b) {
                for (var c = this, d = {
                    index: 0,
                    $object: a(),
                    multiMix: {
                        filter: c._state.activeFilter
                    },
                    callback: null
                }, e = 0; e < b.length; e++) {
                    var f = b[e];
                    "number" == typeof f ? d.index = f : "object" == typeof f && f instanceof a ? d.$object = f : "object" == typeof f && c._helpers._isElement(f) ? d.$object = a(f) : "object" == typeof f && null !== f ? d.multiMix = f : "boolean" != typeof f || f ? "function" == typeof f && (d.callback = f) : d.multiMix = !1
                }
                return c._execFilter("_parseInsertArgs", d, arguments)
            },
            _execAction: function(a, b, c) {
                var d = this,
                    e = b ? "post" : "pre";
                if (!d._actions.isEmptyObject && d._actions.hasOwnProperty(a)) for (var f in d._actions[a][e]) d._actions[a][e][f].call(d, c)
            },
            _execFilter: function(a, b, c) {
                var d = this;
                if (d._filters.isEmptyObject || !d._filters.hasOwnProperty(a)) return b;
                for (var e in d._filters[a]) return d._filters[a][e].call(d, c)
            },
            _helpers: {
                _camelCase: function(a) {
                    return a.replace(/-([a-z])/g, function(a) {
                        return a[1].toUpperCase()
                    })
                },
                _isElement: function(a) {
                    return window.HTMLElement ? a instanceof HTMLElement : null !== a && 1 === a.nodeType && "string" === a.nodeName
                }
            },
            isMixing: function() {
                var a = this;
                return a._execFilter("isMixing", a._mixing)
            },
            filter: function() {
                var a = this,
                    b = a._parseMultiMixArgs(arguments);
                a._clicking && (a._toggleString = ""), a.multiMix({
                    filter: b.command
                }, b.animate, b.callback)
            },
            sort: function() {
                var a = this,
                    b = a._parseMultiMixArgs(arguments);
                a.multiMix({
                    sort: b.command
                }, b.animate, b.callback)
            },
            changeLayout: function() {
                var a = this,
                    b = a._parseMultiMixArgs(arguments);
                a.multiMix({
                    changeLayout: b.command
                }, b.animate, b.callback)
            },
            multiMix: function() {
                var a = this,
                    c = a._parseMultiMixArgs(arguments);
                if (a._execAction("multiMix", 0, arguments), a._mixing) a.animation.queue && a._queue.length < a.animation.queueLimit ? (a._queue.push(arguments), a.controls.enable && !a._clicking && a._updateControls(c.command), a._execAction("multiMixQueue", 1, arguments)) : ("function" == typeof a.callbacks.onMixBusy && a.callbacks.onMixBusy.call(a._domNode, a._state, a), a._$container.trigger("mixBusy", [a._state, a]), a._execAction("multiMixBusy", 1, arguments));
                else {
                    a.controls.enable && !a._clicking && (a.controls.toggleFilterButtons && a._buildToggleArray(), a._updateControls(c.command, a.controls.toggleFilterButtons)), a._queue.length < 2 && (a._clicking = !1), delete a.callbacks._user, c.callback && (a.callbacks._user = c.callback);
                    var d = c.command.sort,
                        e = c.command.filter,
                        f = c.command.changeLayout;
                    a._refresh(), d && (a._newSort = a._parseSort(d), a._newSortString = d, a._sorting = !0, a._sort()), e !== b && (e = "all" === e ? a.selectors.target : e, a._activeFilter = e), a._filter(), f && (a._newDisplay = "string" == typeof f ? f : f.display || a.layout.display, a._newClass = f.containerClass || "", (a._newDisplay !== a.layout.display || a._newClass !== a.layout.containerClass) && (a._changingLayout = !0, a._changingClass = a._newClass !== a.layout.containerClass, a._changingDisplay = a._newDisplay !== a.layout.display)), a._$targets.css(a._brake), a._goMix(c.animate ^ a.animation.enable ? c.animate : a.animation.enable), a._execAction("multiMix", 1, arguments)
                }
            },
            insert: function() {
                var a = this,
                    b = a._parseInsertArgs(arguments),
                    c = "function" == typeof b.callback ? b.callback : null,
                    d = document.createDocumentFragment(),
                    e = function() {
                        return a._refresh(), a._$targets.length ? b.index < a._$targets.length || !a._$targets.length ? a._$targets[b.index] : a._$targets[a._$targets.length - 1].nextElementSibling : a._$parent[0].children[0]
                    }();
                if (a._execAction("insert", 0, arguments), b.$object) {
                    for (var f = 0; f < b.$object.length; f++) {
                        var g = b.$object[f];
                        d.appendChild(g), d.appendChild(document.createTextNode(" "))
                    }
                    a._$parent[0].insertBefore(d, e)
                }
                a._execAction("insert", 1, arguments), "object" == typeof b.multiMix && a.multiMix(b.multiMix, c)
            },
            prepend: function() {
                var a = this,
                    b = a._parseInsertArgs(arguments);
                a.insert(0, b.$object, b.multiMix, b.callback)
            },
            append: function() {
                var a = this,
                    b = a._parseInsertArgs(arguments);
                a.insert(a._state.totalTargets, b.$object, b.multiMix, b.callback)
            },
            getOption: function(a) {
                var c = this,
                    d = function(a, c) {
                        for (var d = c.split("."), e = d.pop(), f = d.length, g = 1, h = d[0] || c;
                             (a = a[h]) && f > g;) h = d[g], g++;
                        return a !== b ? a[e] !== b ? a[e] : a : void 0
                    };
                return a ? c._execFilter("getOption", d(c, a), arguments) : c
            },
            setOptions: function(b) {
                var c = this;
                c._execAction("setOptions", 0, arguments), "object" == typeof b && a.extend(!0, c, b), c._execAction("setOptions", 1, arguments)
            },
            getState: function() {
                var a = this;
                return a._execFilter("getState", a._state, a)
            },
            forceRefresh: function() {
                var a = this;
                a._refresh(!1, !0)
            },
            destroy: function(b) {
                var c = this,
                    d = a.MixItUp.prototype._bound._filter,
                    e = a.MixItUp.prototype._bound._sort;
                c._execAction("destroy", 0, arguments), c._$body.add(a(c.selectors.sort)).add(a(c.selectors.filter)).off(".mixItUp");
                for (var f = 0; f < c._$targets.length; f++) {
                    var g = c._$targets[f];
                    b && (g.style.display = ""), delete g.mixParent
                }
                c._execAction("destroy", 1, arguments), d[c.selectors.filter] && d[c.selectors.filter] > 1 ? d[c.selectors.filter]-- : 1 === d[c.selectors.filter] && delete d[c.selectors.filter], e[c.selectors.sort] && e[c.selectors.sort] > 1 ? e[c.selectors.sort]-- : 1 === e[c.selectors.sort] && delete e[c.selectors.sort], delete a.MixItUp.prototype._instances[c._id]
            }
        }, a.fn.mixItUp = function() {
            var c, d = arguments,
                e = [],
                f = function(b, c) {
                    var d = new a.MixItUp,
                        e = function() {
                            return ("00000" + (16777216 * Math.random() << 0).toString(16)).substr(-6).toUpperCase()
                        };
                    d._execAction("_instantiate", 0, arguments), b.id = b.id ? b.id : "MixItUp" + e(), d._instances[b.id] || (d._instances[b.id] = d, d._init(b, c)), d._execAction("_instantiate", 1, arguments)
                };
            return c = this.each(function() {
                if (d && "string" == typeof d[0]) {
                    var c = a.MixItUp.prototype._instances[this.id];
                    if ("isLoaded" === d[0]) e.push(c ? !0 : !1);
                    else {
                        var g = c[d[0]](d[1], d[2], d[3]);
                        g !== b && e.push(g)
                    }
                } else f(this, d[0])
            }), e.length ? e.length > 1 ? e : e[0] : c
        }, a.fn.removeStyle = function(c, d) {
            return d = d ? d : "", this.each(function() {
                for (var e = this, f = c.split(" "), g = 0; g < f.length; g++) for (var h = 0; 4 > h; h++) {
                    switch (h) {
                        case 0:
                            var i = f[g];
                            break;
                        case 1:
                            var i = a.MixItUp.prototype._helpers._camelCase(i);
                            break;
                        case 2:
                            var i = d + f[g];
                            break;
                        case 3:
                            var i = a.MixItUp.prototype._helpers._camelCase(d + f[g])
                    }
                    if (e.style[i] !== b && "unknown" != typeof e.style[i] && e.style[i].length > 0 && (e.style[i] = ""), !d && 1 === h) break
                }
                e.attributes && e.attributes.style && e.attributes.style !== b && "" === e.attributes.style.value && e.attributes.removeNamedItem("style")
            })
        }
    }(jQuery);;

!
    function(d, y, k, j) {
        function s(a, b) {
            var c = Math.max(0, a[0] - b[0], b[0] - a[1]),
                e = Math.max(0, a[2] - b[1], b[1] - a[3]);
            return c + e
        }
        function t(a, b, c, e) {
            for (var h = a.length, e = e ? "offset" : "position", c = c || 0; h--;) {
                var f = a[h].el ? a[h].el : d(a[h]),
                    i = f[e]();
                i.left += parseInt(f.css("margin-left"), 10);
                i.top += parseInt(f.css("margin-top"), 10);
                b[h] = [i.left - c, i.left + f.outerWidth() + c, i.top - c, i.top + f.outerHeight() + c]
            }
        }
        function m(a, b) {
            var c = b.offset();
            return {
                left: a.left - c.left,
                top: a.top - c.top
            }
        }
        function u(a, b, c) {
            for (var b = [b.left, b.top], c = c && [c.left, c.top], e, h = a.length, d = []; h--;) e = a[h], d[h] = [h, s(e, b), c && s(e, c)];
            return d = d.sort(function(a, b) {
                return b[1] - a[1] || b[2] - a[2] || b[0] - a[0]
            })
        }
        function n(a) {
            this.options = d.extend({}, l, a);
            this.containers = [];
            this.options.rootGroup || (this.scrollProxy = d.proxy(this.scroll, this), this.dragProxy = d.proxy(this.drag, this), this.dropProxy = d.proxy(this.drop, this), this.placeholder = d(this.options.placeholder), a.isValidTarget || (this.options.isValidTarget = j))
        }
        function q(a, b) {
            this.el = a;
            this.options = d.extend({}, w, b);
            this.group = n.get(this.options);
            this.rootGroup = this.options.rootGroup || this.group;
            this.handle = this.rootGroup.options.handle || this.rootGroup.options.itemSelector;
            var c = this.rootGroup.options.itemPath;
            this.target = c ? this.el.find(c) : this.el;
            this.target.on(o.start, this.handle, d.proxy(this.dragInit, this));
            this.options.drop && this.group.containers.push(this)
        }
        var o, w = {
                drag: !0,
                drop: !0,
                exclude: "",
                nested: !0,
                vertical: !0
            },
            l = {
                afterMove: function() {},
                containerPath: "",
                containerSelector: "ol, ul",
                distance: 0,
                delay: 0,
                handle: "",
                itemPath: "",
                itemSelector: "li",
                isValidTarget: function() {
                    return !0
                },
                onCancel: function() {},
                onDrag: function(a, b) {
                    a.css(b)
                },
                onDragStart: function(a) {
                    a.css({
                        height: a.height(),
                        width: a.width()
                    });
                    a.addClass("dragged");
                    d("body").addClass("dragging")
                },
                onDrop: function(a) {
                    a.removeClass("dragged").removeAttr("style");
                    d("body").removeClass("dragging")
                },
                onMousedown: function(a, b, c) {
                    if (!c.target.nodeName.match(/^(input|select)$/i)) return c.preventDefault(), !0
                },
                placeholder: '<li class="placeholder"/>',
                pullPlaceholder: !0,
                serialize: function(a, b, c) {
                    a = d.extend({}, a.data());
                    if (c) return [b];
                    b[0] && (a.children = b);
                    delete a.subContainers;
                    delete a.sortable;
                    return a
                },
                tolerance: 0
            },
            p = {},
            v = 0,
            x = {
                left: 0,
                top: 0,
                bottom: 0,
                right: 0
            };
        o = {
            start: "touchstart.sortable mousedown.sortable",
            drop: "touchend.sortable touchcancel.sortable mouseup.sortable",
            drag: "touchmove.sortable mousemove.sortable",
            scroll: "scroll.sortable"
        };
        n.get = function(a) {
            p[a.group] || (a.group === j && (a.group = v++), p[a.group] = new n(a));
            return p[a.group]
        };
        n.prototype = {
            dragInit: function(a, b) {
                this.$document = d(b.el[0].ownerDocument);
                this.item = d(a.target).closest(this.options.itemSelector);
                this.itemContainer = b;
                !this.item.is(this.options.exclude) && this.options.onMousedown(this.item, l.onMousedown, a) && (this.setPointer(a), this.toggleListeners("on"), this.setupDelayTimer(), this.dragInitDone = !0)
            },
            drag: function(a) {
                if (!this.dragging) {
                    if (!this.distanceMet(a) || !this.delayMet) return;
                    this.options.onDragStart(this.item, this.itemContainer, l.onDragStart, a);
                    this.item.before(this.placeholder);
                    this.dragging = !0
                }
                this.setPointer(a);
                this.options.onDrag(this.item, m(this.pointer, this.item.offsetParent()), l.onDrag, a);
                var b = a.pageX || a.originalEvent.pageX,
                    a = a.pageY || a.originalEvent.pageY,
                    c = this.sameResultBox,
                    e = this.options.tolerance;
                if (!c || c.top - e > a || c.bottom + e < a || c.left - e > b || c.right + e < b) this.searchValidTarget() || this.placeholder.detach()
            },
            drop: function(a) {
                this.toggleListeners("off");
                this.dragInitDone = !1;
                if (this.dragging) {
                    if (this.placeholder.closest("html")[0]) this.placeholder.before(this.item).detach();
                    else this.options.onCancel(this.item, this.itemContainer, l.onCancel, a);
                    this.options.onDrop(this.item, this.getContainer(this.item), l.onDrop, a);
                    this.clearDimensions();
                    this.clearOffsetParent();
                    this.lastAppendedItem = this.sameResultBox = j;
                    this.dragging = !1
                }
            },
            searchValidTarget: function(a, b) {
                a || (a = this.relativePointer || this.pointer, b = this.lastRelativePointer || this.lastPointer);
                for (var c = u(this.getContainerDimensions(), a, b), e = c.length; e--;) {
                    var d = c[e][0];
                    if (!c[e][1] || this.options.pullPlaceholder) if (d = this.containers[d], !d.disabled) {
                        if (!this.$getOffsetParent()) var f = d.getItemOffsetParent(),
                            a = m(a, f),
                            b = m(b, f);
                        if (d.searchValidTarget(a, b)) return !0
                    }
                }
                this.sameResultBox && (this.sameResultBox = j)
            },
            movePlaceholder: function(a, b, c, e) {
                var d = this.lastAppendedItem;
                if (e || !(d && d[0] === b[0])) b[c](this.placeholder), this.lastAppendedItem = b, this.sameResultBox = e, this.options.afterMove(this.placeholder, a, b)
            },
            getContainerDimensions: function() {
                this.containerDimensions || t(this.containers, this.containerDimensions = [], this.options.tolerance, !this.$getOffsetParent());
                return this.containerDimensions
            },
            getContainer: function(a) {
                return a.closest(this.options.containerSelector).data(k)
            },
            $getOffsetParent: function() {
                if (this.offsetParent === j) {
                    var a = this.containers.length - 1,
                        b = this.containers[a].getItemOffsetParent();
                    if (!this.options.rootGroup) for (; a--;) if (b[0] != this.containers[a].getItemOffsetParent()[0]) {
                        b = !1;
                        break
                    }
                    this.offsetParent = b
                }
                return this.offsetParent
            },
            setPointer: function(a) {
                a = this.getPointer(a);
                if (this.$getOffsetParent()) {
                    var b = m(a, this.$getOffsetParent());
                    this.lastRelativePointer = this.relativePointer;
                    this.relativePointer = b
                }
                this.lastPointer = this.pointer;
                this.pointer = a
            },
            distanceMet: function(a) {
                a = this.getPointer(a);
                return Math.max(Math.abs(this.pointer.left - a.left), Math.abs(this.pointer.top - a.top)) >= this.options.distance
            },
            getPointer: function(a) {
                return {
                    left: a.pageX || a.originalEvent.pageX,
                    top: a.pageY || a.originalEvent.pageY
                }
            },
            setupDelayTimer: function() {
                var a = this;
                this.delayMet = !this.options.delay;
                this.delayMet || (clearTimeout(this._mouseDelayTimer), this._mouseDelayTimer = setTimeout(function() {
                    a.delayMet = !0
                }, this.options.delay))
            },
            scroll: function() {
                this.clearDimensions();
                this.clearOffsetParent()
            },
            toggleListeners: function(a) {
                var b = this;
                d.each(["drag", "drop", "scroll"], function(c, e) {
                    b.$document[a](o[e], b[e + "Proxy"])
                })
            },
            clearOffsetParent: function() {
                this.offsetParent = j
            },
            clearDimensions: function() {
                this.traverse(function(a) {
                    a._clearDimensions()
                })
            },
            traverse: function(a) {
                a(this);
                for (var b = this.containers.length; b--;) this.containers[b].traverse(a)
            },
            _clearDimensions: function() {
                this.containerDimensions = j
            },
            _destroy: function() {
                p[this.options.group] = j
            }
        };
        q.prototype = {
            dragInit: function(a) {
                var b = this.rootGroup;
                !this.disabled && !b.dragInitDone && this.options.drag && this.isValidDrag(a) && b.dragInit(a, this)
            },
            isValidDrag: function(a) {
                return 1 == a.which || "touchstart" == a.type && 1 == a.originalEvent.touches.length
            },
            searchValidTarget: function(a, b) {
                var c = u(this.getItemDimensions(), a, b),
                    e = c.length,
                    d = this.rootGroup,
                    f = !d.options.isValidTarget || d.options.isValidTarget(d.item, this);
                if (!e && f) return d.movePlaceholder(this, this.target, "append"), !0;
                for (; e--;) if (d = c[e][0], !c[e][1] && this.hasChildGroup(d)) {
                    if (this.getContainerGroup(d).searchValidTarget(a, b)) return !0
                } else if (f) return this.movePlaceholder(d, a), !0
            },
            movePlaceholder: function(a, b) {
                var c = d(this.items[a]),
                    e = this.itemDimensions[a],
                    h = "after",
                    f = c.outerWidth(),
                    i = c.outerHeight(),
                    g = c.offset(),
                    g = {
                        left: g.left,
                        right: g.left + f,
                        top: g.top,
                        bottom: g.top + i
                    };
                this.options.vertical ? b.top <= (e[2] + e[3]) / 2 ? (h = "before", g.bottom -= i / 2) : g.top += i / 2 : b.left <= (e[0] + e[1]) / 2 ? (h = "before", g.right -= f / 2) : g.left += f / 2;
                this.hasChildGroup(a) && (g = x);
                this.rootGroup.movePlaceholder(this, c, h, g)
            },
            getItemDimensions: function() {
                this.itemDimensions || (this.items = this.$getChildren(this.el, "item").filter(":not(.placeholder, .dragged)").get(), t(this.items, this.itemDimensions = [], this.options.tolerance));
                return this.itemDimensions
            },
            getItemOffsetParent: function() {
                var a = this.el;
                return "relative" === a.css("position") || "absolute" === a.css("position") || "fixed" === a.css("position") ? a : a.offsetParent()
            },
            hasChildGroup: function(a) {
                return this.options.nested && this.getContainerGroup(a)
            },
            getContainerGroup: function(a) {
                var b = d.data(this.items[a], "subContainers");
                if (b === j) {
                    var c = this.$getChildren(this.items[a], "container"),
                        b = !1;
                    c[0] && (b = d.extend({}, this.options, {
                        rootGroup: this.rootGroup,
                        group: v++
                    }), b = c[k](b).data(k).group);
                    d.data(this.items[a], "subContainers", b)
                }
                return b
            },
            $getChildren: function(a, b) {
                var c = this.rootGroup.options,
                    e = c[b + "Path"],
                    c = c[b + "Selector"],
                    a = d(a);
                e && (a = a.find(e));
                return a.children(c)
            },
            _serialize: function(a, b) {
                var c = this,
                    e = this.$getChildren(a, b ? "item" : "container").not(this.options.exclude).map(function() {
                        return c._serialize(d(this), !b)
                    }).get();
                return this.rootGroup.options.serialize(a, e, b)
            },
            traverse: function(a) {
                d.each(this.items || [], function() {
                    var b = d.data(this, "subContainers");
                    b && b.traverse(a)
                });
                a(this)
            },
            _clearDimensions: function() {
                this.itemDimensions = j
            },
            _destroy: function() {
                var a = this;
                this.target.off(o.start, this.handle);
                this.el.removeData(k);
                this.options.drop && (this.group.containers = d.grep(this.group.containers, function(b) {
                    return b != a
                }));
                d.each(this.items || [], function() {
                    d.removeData(this, "subContainers")
                })
            }
        };
        var r = {
            enable: function() {
                this.traverse(function(a) {
                    a.disabled = !1
                })
            },
            disable: function() {
                this.traverse(function(a) {
                    a.disabled = !0
                })
            },
            serialize: function() {
                return this._serialize(this.el, !0)
            },
            refresh: function() {
                this.traverse(function(a) {
                    a._clearDimensions()
                })
            },
            destroy: function() {
                this.traverse(function(a) {
                    a._destroy()
                })
            }
        };
        d.extend(q.prototype, r);
        d.fn[k] = function(a) {
            var b = Array.prototype.slice.call(arguments, 1);
            return this.map(function() {
                var c = d(this),
                    e = c.data(k);
                if (e && r[a]) return r[a].apply(e, b) || this;
                !e && (a === j || "object" === typeof a) && c.data(k, new q(c, a));
                return this
            })
        }
    }(jQuery, window, "sortable");